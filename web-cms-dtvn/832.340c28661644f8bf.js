(self.webpackChunkweb_cms_dtvn=self.webpackChunkweb_cms_dtvn||[]).push([[832],{6675:(mt,yt,L)=>{"use strict";L.d(yt,{I:()=>j});var k=L(1764),nt=L.n(k),T=L(5268),Q=L.n(T);nt().extend(Q());class j{static isoToVnTime(C){return C&&0!==C.length?nt().utc(C).local().format("DD/MM/YYYY HH:mm:ss"):"N/A"}}},3832:(mt,yt,L)=>{"use strict";L.r(yt),L.d(yt,{MapModule:()=>ut});var k=L(9808),nt=L(8753),T=L(5e3);class Q{}var et,j=L(8407),Y=L(4520),H=(L(2937),L(8215));class W{}et=W,W.OpenStreetMap_Mapnik=j.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),W.CartoDB_Positron=j.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}),W.Esri_WorldImagery=j.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}),W.baseMaps={"Street Map":et.OpenStreetMap_Mapnik,"Light Map":et.CartoDB_Positron,"Satellite Map":et.Esri_WorldImagery};class ${}var ot=L(6675),R=L(5330),ct=L(9783),K=L(845),_=L(5787);let X=(()=>{class w{constructor(g,M,J,at){this.ref=g,this.config=M,this.messageService=J,this.dialogService=at,this.loading=!1}ngOnInit(){this.config.data&&(this.station=this.config.data.station,this.fetchListOfNozzles())}fetchListOfNozzles(){}onDestroy(){this.ref.destroy()}convertTime(g){return ot.I.isoToVnTime(g)}}return w.\u0275fac=function(g){return new(g||w)(T.Y36(R.E7),T.Y36(R.S),T.Y36(ct.ez),T.Y36(R.xA))},w.\u0275cmp=T.Xpm({type:w,selectors:[["app-station-detail"]],decls:8,vars:0,consts:[[1,"outbound"],[1,"header","flex","align-items-center","justify-content-between","border-bottom-1","border-gray-300"],[1,"ml-2","text-xl","font-bold"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-danger","p-button-text",3,"click"],[1,"content"],[1,"footer","flex","align-items-center","justify-content-end","border-top-1","border-gray-300"],["pButton","","pRipple","","type","button","label","H\u1ee7y b\u1ecf","icon","fa-solid fa-times",1,"p-button-outlined","mr-1",3,"click"]],template:function(g,M){1&g&&(T.TgZ(0,"div",0)(1,"div",1)(2,"span",2),T._uU(3,"Chi ti\u1ebft C\u1eeda h\xe0ng x\u0103ng d\u1ea7u"),T.qZA(),T.TgZ(4,"button",3),T.NdJ("click",function(){return M.onDestroy()}),T.qZA()(),T._UZ(5,"div",4),T.TgZ(6,"div",5)(7,"button",6),T.NdJ("click",function(){return M.onDestroy()}),T.qZA()()())},directives:[K.Hq,_.H],styles:[".outbound[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;overflow:hidden}.outbound[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:45px}.outbound[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:absolute;top:45px;bottom:45px;left:0;width:100%;overflow:auto}.outbound[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{position:absolute;bottom:0;height:45px;left:0;width:100%}"]}),w})(),B=(()=>{class w{constructor(){}ngOnInit(){}}return w.\u0275fac=function(g){return new(g||w)},w.\u0275cmp=T.Xpm({type:w,selectors:[["app-map-tooltip"]],inputs:{station:"station"},decls:0,vars:0,template:function(g,M){},styles:["#tooltip[_ngcontent-%COMP%]{width:250px}"]}),w})();var ht=L(7376);function ft(w,F){if(1&w){const g=T.EpF();T.TgZ(0,"div",1)(1,"button",2),T.NdJ("click",function(){return T.CHM(g),T.oxw().onCommandSelect("get-location")}),T.qZA()()}}function b(w,F){if(1&w){const g=T.EpF();T.TgZ(0,"div",1)(1,"button",3),T.NdJ("click",function(){return T.CHM(g),T.oxw().onCommandSelect("view-info")}),T.qZA(),T._UZ(2,"p-divider",4),T.TgZ(3,"button",5),T.NdJ("click",function(){return T.CHM(g),T.oxw().onCommandSelect("google-map")}),T.qZA()()}}let rt=(()=>{class w{constructor(){this.type="on-map",this.onSelect=new T.vpe}ngOnInit(){}onCommandSelect(g){this.onSelect.emit(g)}}return w.\u0275fac=function(g){return new(g||w)},w.\u0275cmp=T.Xpm({type:w,selectors:[["app-map-popup"]],inputs:{type:"type"},outputs:{onSelect:"onSelect"},decls:2,vars:2,consts:[["class","p-fluid",4,"ngIf"],[1,"p-fluid"],["pButton","","pRipple","","type","button","icon","pi pi-map-marker","label","Xem t\u1ecda \u0111\u1ed9",1,"p-button-text","text-left","m-0","p-1",3,"click"],["pButton","","pRipple","","type","button","icon","pi pi-eye","label","Xem chi ti\u1ebft",1,"p-button-text","text-left","m-0","p-1",3,"click"],["styleClass","m-1 p-0"],["pButton","","pRipple","","type","button","icon","pi pi-search","label","V\u1ecb tr\xed tr\xean Google Maps",1,"p-button-text","text-left","m-0","p-1",3,"click"]],template:function(g,M){1&g&&(T.YNc(0,ft,2,0,"div",0),T.YNc(1,b,4,0,"div",0)),2&g&&(T.Q6J("ngIf","on-map"==M.type),T.xp6(1),T.Q6J("ngIf","on-marker"==M.type||"on-qr"==M.type))},directives:[k.O5,K.Hq,_.H,ht.i],styles:[""]}),w})();var I=L(1489),dt=L(5431),D=L(7675),G=L(97);const z=["divBound"],V=["divDetail"];function it(w,F){1&w&&T._UZ(0,"a",9),2&w&&T.Q6J("innerHTML",F.$implicit.name,T.oJD)}function p(w,F){1&w&&T._UZ(0,"div",10),2&w&&T.Q6J("innerHTML",F.$implicit,T.oJD)}function v(w,F){if(1&w){const g=T.EpF();T.TgZ(0,"div",2,3),T.NdJ("resize",function(){return T.CHM(g),T.oxw().onWindowResize()},!1,T.Jf7),T._UZ(2,"div",4),T.TgZ(3,"div",5),T.NdJ("keyup",function(J){return T.CHM(g),T.oxw().onKeyupSearch(J)}),T.TgZ(4,"ng-autocomplete",6),T.NdJ("selected",function(J){return T.CHM(g),T.oxw().onSelectedSearch(J)})("inputChanged",function(J){return T.CHM(g),T.oxw().onChangeSearch(J)}),T.qZA(),T.YNc(5,it,1,1,"ng-template",null,7,T.W1O),T.YNc(7,p,1,1,"ng-template",null,8,T.W1O),T.qZA()()}if(2&w){const g=T.MAs(6),M=T.MAs(8),J=T.oxw();T.xp6(4),T.Q6J("data",J.dataSuggests)("searchKeyword",J.keyword)("itemTemplate",g)("minQueryLength",1)("notFoundTemplate",M)}}function x(w,F){1&w&&(T._UZ(0,"i",18),T.TgZ(1,"span",19),T._uU(2,"B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp v\xe0o m\u1ee5c n\xe0y!"),T.qZA())}function O(w,F){if(1&w){const g=T.EpF();T.TgZ(0,"div",11)(1,"p-messages",12),T.YNc(2,x,3,0,"ng-template",13),T.qZA()(),T.TgZ(3,"div",14)(4,"div",15),T.NdJ("click",function(){return T.CHM(g),T.oxw().onGoBackHome()}),T._UZ(5,"span",16),T.TgZ(6,"span",17),T._uU(7,"Quay l\u1ea1i Trang ch\u1ee7"),T.qZA()()()}}const S=[{path:"",component:(()=>{class w{constructor(g,M,J,at,It,Et,Dt){this.sHttpService=g,this.messageService=M,this.renderer=J,this.dialogService=at,this.permissionService=It,this.viewContainerRef=Et,this.router=Dt,this.display_info=!1,this.homeLat=21.028291,this.homeLng=105.843517,this.tooltipMap=new Map,this.firstDraw=!0,this.pixiStations=[],this.en_right_click=!1,this.stations=[],this.dataSuggests=[],this.keyword="name",this.keywordIn=""}ngOnDestroy(){this.loadTimer&&clearInterval(this.loadTimer),this.destroyAllTooltips(),this.pixiOverlay&&this.pixiOverlay.removeFrom(this.leafletMap),this.leafletMap&&this.leafletMap.remove(),this.subPermission&&this.subPermission.unsubscribe()}setStyleDiv(){this.windowWidth=this.divBound.nativeElement.offsetWidth,this.windowWidth<576?this.display_info&&(this.renderer.setStyle(this.divDetail.nativeElement,"width","100%"),this.renderer.setStyle(this.divDetail.nativeElement,"height","70%")):this.display_info&&(this.renderer.setStyle(this.divDetail.nativeElement,"width","400px"),this.renderer.setStyle(this.divDetail.nativeElement,"height","100%"))}ngAfterViewInit(){this.setStyleDiv(),this.initMap()}ngAfterViewChecked(){this.setStyleDiv()}onWindowResize(){this.setStyleDiv()}ngOnInit(){this.loadDataEngine(),this.subPermission=this.permissionService.currentPermission.subscribe(g=>{g&&(this.permission=g)})}initMap(){this.leafletMap&&this.leafletMap.remove(),this.leafletMap=null;let g=W.baseMaps;this.leafletMap=j.map("leaflet-map",{center:[this.homeLat,this.homeLng],zoom:H.o.MAP_ZOOM_INIT,layers:[W.OpenStreetMap_Mapnik],attributionControl:!1,zoomControl:!1}),j.control.layers(g,{}).addTo(this.leafletMap).setPosition("bottomright"),j.control.scale().addTo(this.leafletMap).setPosition("bottomleft");let M=j.easyButton("fa-solid fa-location-crosshairs",(at,It)=>this.getCurrentPosition()),J=j.easyButton({states:[{stateName:"on-right-click",icon:"fa-computer-mouse",title:"on-right-click",onClick:at=>{this.ctrlRightClick=at,this.en_right_click=!0,at.state("off-right-click")}},{icon:"fa-hand-pointer",stateName:"off-right-click",title:"off-right-click",onClick:at=>{this.ctrlRightClick=at,this.en_right_click=!1,at.state("on-right-click")}}]});j.easyBar([M,J]).addTo(this.leafletMap).setPosition("topright"),this.leafletMap.on("click",at=>{this.markerClicked?(this.popupItem&&this.popupItem.removeFrom(this.leafletMap),this.popupItem=j.popup({closeButton:!1}).setLatLng([this.markerClicked.lat,this.markerClicked.lng]).setContent(`${this.markerClicked.originObject.name?this.markerClicked.originObject.name:"--"}`).openOn(this.leafletMap),this.selectedStation=this.markerClicked.originObject,this.markerClicked=null,this.en_right_click?this.openPopup(at.latlng,"on-marker",this.selectedStation):this.onViewDetail(),this.en_right_click=!1,this.ctrlRightClick&&this.ctrlRightClick.state("on-right-click")):(this.en_right_click=!1,this.ctrlRightClick&&this.ctrlRightClick.state("on-right-click"),this.popupItem&&this.popupItem.removeFrom(this.leafletMap),this.popupMenu&&this.popupMenu.removeFrom(this.leafletMap),this.destroyAllTooltips(),this.myMarker&&this.myMarker.removeFrom(this.leafletMap))}),this.leafletMap.on("contextmenu",at=>{this.markerClicked?(this.popupItem&&this.popupItem.removeFrom(this.leafletMap),this.popupItem=j.popup({closeButton:!1}).setLatLng([this.markerClicked.lat,this.markerClicked.lng]).setContent(`${this.markerClicked.originObject.name?this.markerClicked.originObject.name:"--"}`).openOn(this.leafletMap),this.selectedStation=this.markerClicked.originObject,this.markerClicked=null,this.openPopup(at.latlng,"on-marker",this.selectedStation)):this.openPopup(at.latlng,"on-map",null)}),this.leafletMap.whenReady(()=>{setTimeout(()=>{this.initPixiOverlay()},100),this.autoReload()})}autoReload(){this.loadTimer=setInterval(()=>{this.fetchListOfStations()},1e3*H.o.TIME_UPDATE)}initPixiOverlay(){this.pixiContainer&&(this.pixiContainer.destroy(),this.pixiContainer=null),this.pixiContainer=new Y.Container;var g={doubleBuffering:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,autoPreventDefault:!1};this.pixiOverlay=j.pixiOverlay((M,J)=>{this.pixiUtils=M,this.pixiEvent=J,"add"===J.type?this.fetchListOfStations():"moveend"===J.type&&(this.drawMarker(),this.fetchListOfStations())},this.pixiContainer,g),this.pixiOverlay.addTo(this.leafletMap)}getCurrentPosition(){navigator.geolocation?navigator.geolocation.getCurrentPosition(g=>{let M=g.coords.latitude,J=g.coords.longitude;this.leafletMap.flyTo([M,J],18);var at=j.icon({iconUrl:"/assets/user-32.png",iconSize:[24,24],iconAnchor:[12,0]});this.myMarker=j.marker([M,J],{icon:at}).addTo(this.leafletMap),this.myMarker.bindTooltip(`V\u1ecb tr\xed c\u1ee7a t\xf4i:(${M},${J})`,{direction:"top"}).openTooltip()},g=>{switch(g.code){case g.PERMISSION_DENIED:this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"Quy\u1ec1n truy c\u1eadp v\u1ecb tr\xed b\u1ecb t\u1eeb ch\u1ed1i. C\u1ea7n cho ph\xe9p \u0111\u1ec3 m\u1edf l\u1ea1i quy\u1ec1n truy c\u1eadp"});break;case g.POSITION_UNAVAILABLE:this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"V\u1ecb tr\xed kh\xf4ng s\u1eb5n s\xe0ng"});break;case g.TIMEOUT:this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"Th\u1eddi gian l\u1ea5y t\u1ecda \u0111\u1ed9 qu\xe1 l\xe2u"})}},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0}):this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"Tr\xecnh duy\u1ec7t kh\xf4ng h\u1ed7 tr\u1ee3 l\u1ea5y t\u1ecda \u0111\u1ed9 \u0111\u1ecba l\xfd"})}fetchListOfStations(){let g;this.leafletMap&&(g=this.leafletMap.getBounds()),g&&this.sHttpService.getByLocation(g._southWest.lat,g._southWest.lng,g._northEast.lat,g._northEast.lng).subscribe({next:M=>{M&&200===M.status?(console.log("fetchListOfStations",M),this.stations=M.metadata,this.destroyAllTooltips(),this.selectedStation&&(this.selectedStation=this.stations.find(J=>J._id==this.selectedStation._id)),this.createMarker()):(this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:`${M.message}`}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",M.message))},error:M=>{let J;J=M&&M.error&&M.error.message?M.error.message:"C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i!",this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:J}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",M)}})}createMarker(){this.pixiStations.forEach(g=>{g.sprite.destroy()}),this.pixiStations=[],this.stations.forEach(g=>{if(g.latitude&&g.longitude){let M="assets/g.png";g.status||(M="assets/b.png");let J=new Q;J.lat=g.latitude,J.lng=g.longitude,J.sprite=Y.Sprite.from(M),J.firstDraw=!0,J.preZoom=null,J.originObject=g,this.pixiStations.push(J)}}),this.prepareMarkerToDraw()}prepareMarkerToDraw(){this.pixiStations.forEach(g=>{g.sprite.interactive=!0,g.sprite.buttonMode=!0;let M=g.originObject;g.sprite.on("click",()=>{this.markerClicked=g,this.destroyTooltip(M._id)}),g.sprite.on("tap",()=>{this.markerClicked=g,this.destroyTooltip(M._id)}),g.sprite.on("mouseover",()=>{this.destroyTooltip(M._id),this.openTooltip(M)}),g.sprite.on("mouseout",()=>{this.destroyTooltip(M._id)}),g.sprite.on("rightclick",()=>{this.markerClicked=g,this.destroyTooltip(M._id)}),this.pixiContainer.addChild(g.sprite)}),this.firstDraw?setTimeout(()=>{this.drawMarker(),this.firstDraw=!1},100):this.drawMarker()}drawMarker(){this.pixiStations.forEach(g=>{let M=this.pixiUtils.latLngToLayerPoint([g.lat,g.lng]);g.sprite.x=M.x,g.sprite.y=M.y,g.sprite.anchor.set(.5,.5),g.sprite.scale.set(1/this.pixiUtils.getScale())}),this.pixiUtils.getRenderer().render(this.pixiUtils.getContainer())}onCloseDeviceDetail(){this.display_info=!1,this.selectedStation=null,this.popupItem&&this.popupItem.removeFrom(this.leafletMap)}openTooltip(g){let M=this.viewContainerRef.createComponent(B);M.instance.station=g;let J=j.tooltip({direction:"bottom",opacity:.95});J.setContent(M.location.nativeElement),J.setLatLng([g.latitude,g.longitude]),J.addTo(this.leafletMap),this.tooltipMap.set(g._id,{tooltip:J,ref:M})}destroyAllTooltips(){this.tooltipMap.size&&this.tooltipMap.forEach((g,M)=>{g.tooltip&&g.tooltip.removeFrom(this.leafletMap),g.ref&&g.ref.destroy()})}destroyTooltip(g){if(this.tooltipMap.has(g)){let M=this.tooltipMap.get(g);M.tooltip&&M.tooltip.removeFrom(this.leafletMap),M.ref&&M.ref.destroy(),this.tooltipMap.delete(g)}}openPopup(g,M,J){this.popupItem&&this.popupItem.removeFrom(this.leafletMap),this.destroyPopup(),this.popupRef=this.viewContainerRef.createComponent(rt),this.popupRef.instance.type=M,this.popupRef.instance.station=J,this.popupRef.instance.onSelect.subscribe(at=>{this.onPopupSelect(at,g),setTimeout(()=>{this.destroyPopup()},100)}),this.popupMenu=j.popup({closeButton:!1,maxWidth:350,minWidth:200}).setLatLng(g).setContent(this.popupRef.location.nativeElement).openOn(this.leafletMap)}destroyPopup(){this.popupMenu&&this.popupMenu.removeFrom(this.leafletMap),this.popupRef&&this.popupRef.destroy()}onPopupSelect(g,M){"get-location"==g?j.popup({closeButton:!1}).setLatLng(M).setContent(`T\u1ecda \u0111\u1ed9: (${M.lat}, ${M.lng}`).openOn(this.leafletMap):"view-info"==g?this.onViewDetail():"google-map"==g&&window.open(`https://www.google.com/maps/search/?api=1&query=${this.selectedStation.latitude},${this.selectedStation.longitude}`)}onViewDetail(){this.dialogService.open(X,{data:{station:this.selectedStation},showHeader:!1,height:"99%",width:"99%",contentStyle:{padding:"0",margin:0}})}loadDataEngine(){this.sHttpService.getAll().subscribe({next:g=>{if(g&&200===g.status){console.log("loadDataEngine",g);let M=g.metadata;M&&0!==M.length&&M.forEach(J=>{let at=new $;at._id=J._id,at.name=`${J.name} (${J.code})`,at.code=J.code,at.latitude=J.latitude,at.longitude=J.longitude,this.dataSuggests.push(at)})}else this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"C\u1ea3nh b\xe1o: No Content"})},error:g=>{let M;M=g&&g.error&&g.error.message?g.error.message:"C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i!",this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:M}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",g)}})}onSelectedSearch(g){if(g.latitude&&g.longitude){let M=j.latLng(g.latitude,g.longitude);this.leafletMap.setView(M,17),this.popupItem&&this.popupItem.removeFrom(this.leafletMap),this.popupItem=j.popup({closeButton:!1}).setLatLng(M).setContent(`${g.name}<br>(${g.latitude}, ${g.longitude})`).openOn(this.leafletMap)}else this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"C\u1eeda h\xe0ng ch\u01b0a \u0111\u01b0\u1ee3c g\xe1n t\u1ecda \u0111\u1ed9 tr\xean b\u1ea3n \u0111\u1ed3"})}onChangeSearch(g){this.keywordIn=g}onKeyupSearch(g){"Enter"===g.key&&this.searchByEnter(this.keywordIn)}searchByEnter(g){let M=[];this.dataSuggests.forEach(J=>{let at=J.name.toLowerCase(),It=g.toLowerCase();at.includes(It)&&M.push(J)}),M&&0!==M.length?(1===M.length&&this.leafletMap.setView([M[0].latitude,M[0].longitude],17),M.forEach(J=>{this.popupItem&&this.popupItem.removeFrom(this.leafletMap),this.popupItem=j.popup({autoClose:!1,closeButton:!1}).setLatLng([J.latitude,J.longitude]).setContent(`${J.name}<br>(${J.latitude}, ${J.longitude})`).openOn(this.leafletMap)})):this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"Kh\xf4ng c\xf3 C\u1eeda h\xe0ng ph\xf9 h\u1ee3p"})}onGoBackHome(){this.router.navigate(["/"])}}return w.\u0275fac=function(g){return new(g||w)(T.Y36(I.P),T.Y36(ct.ez),T.Y36(T.Qsj),T.Y36(R.xA),T.Y36(dt.$),T.Y36(T.s_b),T.Y36(nt.F0))},w.\u0275cmp=T.Xpm({type:w,selectors:[["app-map-management"]],viewQuery:function(g,M){if(1&g&&(T.Gf(z,5,T.SBq),T.Gf(V,5,T.SBq)),2&g){let J;T.iGM(J=T.CRH())&&(M.divBound=J.first),T.iGM(J=T.CRH())&&(M.divDetail=J.first)}},decls:3,vars:2,consts:[["class","relative h-full w-full",3,"resize",4,"ngIf","ngIfElse"],["noPermission",""],[1,"relative","h-full","w-full",3,"resize"],["divBound",""],["id","leaflet-map"],["id","search",3,"keyup"],["placeholder","**Nh\u1eadp t\xean, code...","notFoundText","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u ph\xf9 h\u1ee3p.",3,"data","searchKeyword","itemTemplate","minQueryLength","notFoundTemplate","selected","inputChanged"],["itemTemplate",""],["notFoundTemplate",""],[2,"font-size","0.8em","padding","8px",3,"innerHTML"],[2,"font-size","0.8em",3,"innerHTML"],[1,"flex","align-items-center","justify-content-center"],["severity","error"],["pTemplate",""],[1,"flex","align-items-center","justify-content-center","cursor-pointer"],["pRipple","",1,"flex","align-items-center","justify-content-center","w-full","h-4rem","max-w-20rem","bg-blue-500","border-round-md","shadow-8","text-white","font-bold",3,"click"],[1,"fa-solid","fa-home"],[1,"text-center","text-xl","mx-2"],[1,"pi","pi-times-circle"],[1,"ml-2"]],template:function(g,M){if(1&g&&(T.YNc(0,v,9,5,"div",0),T.YNc(1,O,8,0,"ng-template",null,1,T.W1O)),2&g){const J=T.MAs(2);T.Q6J("ngIf",M.permission.station.self)("ngIfElse",J)}},directives:[k.O5,D.YR,G.V,ct.jx,_.H],styles:["#leaflet-map[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;width:100%;z-index:210}#search[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:300px;z-index:212;padding:2px}"]}),w})()}];let A=(()=>{class w{}return w.\u0275fac=function(g){return new(g||w)},w.\u0275mod=T.oAB({type:w}),w.\u0275inj=T.cJS({imports:[[nt.Bz.forChild(S)],nt.Bz]}),w})();var N=L(8910);let ut=(()=>{class w{}return w.\u0275fac=function(g){return new(g||w)},w.\u0275mod=T.oAB({type:w}),w.\u0275inj=T.cJS({imports:[[k.ez,A,N.m]]}),w})()},9170:mt=>{"use strict";var yt=Object.prototype.hasOwnProperty,L="~";function k(){}function nt(Y,C,H){this.fn=Y,this.context=C,this.once=H||!1}function T(Y,C,H,et,W){if("function"!=typeof H)throw new TypeError("The listener must be a function");var $=new nt(H,et||Y,W),Z=L?L+C:C;return Y._events[Z]?Y._events[Z].fn?Y._events[Z]=[Y._events[Z],$]:Y._events[Z].push($):(Y._events[Z]=$,Y._eventsCount++),Y}function Q(Y,C){0==--Y._eventsCount?Y._events=new k:delete Y._events[C]}function j(){this._events=new k,this._eventsCount=0}Object.create&&(k.prototype=Object.create(null),(new k).__proto__||(L=!1)),j.prototype.eventNames=function(){var H,et,C=[];if(0===this._eventsCount)return C;for(et in H=this._events)yt.call(H,et)&&C.push(L?et.slice(1):et);return Object.getOwnPropertySymbols?C.concat(Object.getOwnPropertySymbols(H)):C},j.prototype.listeners=function(C){var et=this._events[L?L+C:C];if(!et)return[];if(et.fn)return[et.fn];for(var W=0,$=et.length,Z=new Array($);W<$;W++)Z[W]=et[W].fn;return Z},j.prototype.listenerCount=function(C){var et=this._events[L?L+C:C];return et?et.fn?1:et.length:0},j.prototype.emit=function(C,H,et,W,$,Z){var ot=L?L+C:C;if(!this._events[ot])return!1;var K,_,R=this._events[ot],ct=arguments.length;if(R.fn){switch(R.once&&this.removeListener(C,R.fn,void 0,!0),ct){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,H),!0;case 3:return R.fn.call(R.context,H,et),!0;case 4:return R.fn.call(R.context,H,et,W),!0;case 5:return R.fn.call(R.context,H,et,W,$),!0;case 6:return R.fn.call(R.context,H,et,W,$,Z),!0}for(_=1,K=new Array(ct-1);_<ct;_++)K[_-1]=arguments[_];R.fn.apply(R.context,K)}else{var B,X=R.length;for(_=0;_<X;_++)switch(R[_].once&&this.removeListener(C,R[_].fn,void 0,!0),ct){case 1:R[_].fn.call(R[_].context);break;case 2:R[_].fn.call(R[_].context,H);break;case 3:R[_].fn.call(R[_].context,H,et);break;case 4:R[_].fn.call(R[_].context,H,et,W);break;default:if(!K)for(B=1,K=new Array(ct-1);B<ct;B++)K[B-1]=arguments[B];R[_].fn.apply(R[_].context,K)}}return!0},j.prototype.on=function(C,H,et){return T(this,C,H,et,!1)},j.prototype.once=function(C,H,et){return T(this,C,H,et,!0)},j.prototype.removeListener=function(C,H,et,W){var $=L?L+C:C;if(!this._events[$])return this;if(!H)return Q(this,$),this;var Z=this._events[$];if(Z.fn)Z.fn===H&&(!W||Z.once)&&(!et||Z.context===et)&&Q(this,$);else{for(var ot=0,R=[],ct=Z.length;ot<ct;ot++)(Z[ot].fn!==H||W&&!Z[ot].once||et&&Z[ot].context!==et)&&R.push(Z[ot]);R.length?this._events[$]=1===R.length?R[0]:R:Q(this,$)}return this},j.prototype.removeAllListeners=function(C){var H;return C?this._events[H=L?L+C:C]&&Q(this,H):(this._events=new k,this._eventsCount=0),this},j.prototype.off=j.prototype.removeListener,j.prototype.addListener=j.prototype.on,j.prefixed=L,j.EventEmitter=j,mt.exports=j},3957:(mt,yt,L)=>{"use strict";var k=L(5203),nt=L(5685),T=nt(k("String.prototype.indexOf"));mt.exports=function(j,Y){var C=k(j,!!Y);return"function"==typeof C&&T(j,".prototype.")>-1?nt(C):C}},5685:(mt,yt,L)=>{"use strict";var k=L(4444),nt=L(5203),T=L(9511),Q=L(2844),j=nt("%Function.prototype.apply%"),Y=nt("%Function.prototype.call%"),C=nt("%Reflect.apply%",!0)||k.call(Y,j),H=L(3907),et=nt("%Math.max%");mt.exports=function(Z){if("function"!=typeof Z)throw new Q("a function is required");var ot=C(k,Y,arguments);return T(ot,1+et(0,Z.length-(arguments.length-1)),!0)};var W=function(){return C(k,j,arguments)};H?H(mt.exports,"apply",{value:W}):mt.exports.apply=W},1764:function(mt){mt.exports=function(){"use strict";var L=6e4,k=36e5,nt="millisecond",T="second",Q="minute",j="hour",Y="day",C="week",H="month",et="quarter",W="year",$="date",Z="Invalid Date",ot=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,R=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ct={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(D){var G=["th","st","nd","rd"],z=D%100;return"["+D+(G[(z-20)%10]||G[z]||G[0])+"]"}},K=function(D,G,z){var V=String(D);return!V||V.length>=G?D:""+Array(G+1-V.length).join(z)+D},_={s:K,z:function(D){var G=-D.utcOffset(),z=Math.abs(G),V=Math.floor(z/60),it=z%60;return(G<=0?"+":"-")+K(V,2,"0")+":"+K(it,2,"0")},m:function D(G,z){if(G.date()<z.date())return-D(z,G);var V=12*(z.year()-G.year())+(z.month()-G.month()),it=G.clone().add(V,H),p=z-it<0,v=G.clone().add(V+(p?-1:1),H);return+(-(V+(z-it)/(p?it-v:v-it))||0)},a:function(D){return D<0?Math.ceil(D)||0:Math.floor(D)},p:function(D){return{M:H,y:W,w:C,d:Y,D:$,h:j,m:Q,s:T,ms:nt,Q:et}[D]||String(D||"").toLowerCase().replace(/s$/,"")},u:function(D){return void 0===D}},X="en",B={};B[X]=ct;var ht=function(D){return D instanceof I},ft=function D(G,z,V){var it;if(!G)return X;if("string"==typeof G){var p=G.toLowerCase();B[p]&&(it=p),z&&(B[p]=z,it=p);var v=G.split("-");if(!it&&v.length>1)return D(v[0])}else{var x=G.name;B[x]=G,it=x}return!V&&it&&(X=it),it||!V&&X},b=function(D,G){if(ht(D))return D.clone();var z="object"==typeof G?G:{};return z.date=D,z.args=arguments,new I(z)},rt=_;rt.l=ft,rt.i=ht,rt.w=function(D,G){return b(D,{locale:G.$L,utc:G.$u,x:G.$x,$offset:G.$offset})};var I=function(){function D(z){this.$L=ft(z.locale,null,!0),this.parse(z)}var G=D.prototype;return G.parse=function(z){this.$d=function(V){var it=V.date,p=V.utc;if(null===it)return new Date(NaN);if(rt.u(it))return new Date;if(it instanceof Date)return new Date(it);if("string"==typeof it&&!/Z$/i.test(it)){var v=it.match(ot);if(v){var x=v[2]-1||0,O=(v[7]||"0").substring(0,3);return p?new Date(Date.UTC(v[1],x,v[3]||1,v[4]||0,v[5]||0,v[6]||0,O)):new Date(v[1],x,v[3]||1,v[4]||0,v[5]||0,v[6]||0,O)}}return new Date(it)}(z),this.$x=z.x||{},this.init()},G.init=function(){var z=this.$d;this.$y=z.getFullYear(),this.$M=z.getMonth(),this.$D=z.getDate(),this.$W=z.getDay(),this.$H=z.getHours(),this.$m=z.getMinutes(),this.$s=z.getSeconds(),this.$ms=z.getMilliseconds()},G.$utils=function(){return rt},G.isValid=function(){return this.$d.toString()!==Z},G.isSame=function(z,V){var it=b(z);return this.startOf(V)<=it&&it<=this.endOf(V)},G.isAfter=function(z,V){return b(z)<this.startOf(V)},G.isBefore=function(z,V){return this.endOf(V)<b(z)},G.$g=function(z,V,it){return rt.u(z)?this[V]:this.set(it,z)},G.unix=function(){return Math.floor(this.valueOf()/1e3)},G.valueOf=function(){return this.$d.getTime()},G.startOf=function(z,V){var it=this,p=!!rt.u(V)||V,v=rt.p(z),x=function(F,g){var M=rt.w(it.$u?Date.UTC(it.$y,g,F):new Date(it.$y,g,F),it);return p?M:M.endOf(Y)},O=function(F,g){return rt.w(it.toDate()[F].apply(it.toDate("s"),(p?[0,0,0,0]:[23,59,59,999]).slice(g)),it)},E=this.$W,S=this.$M,A=this.$D,N="set"+(this.$u?"UTC":"");switch(v){case W:return p?x(1,0):x(31,11);case H:return p?x(1,S):x(0,S+1);case C:var ut=this.$locale().weekStart||0,w=(E<ut?E+7:E)-ut;return x(p?A-w:A+(6-w),S);case Y:case $:return O(N+"Hours",0);case j:return O(N+"Minutes",1);case Q:return O(N+"Seconds",2);case T:return O(N+"Milliseconds",3);default:return this.clone()}},G.endOf=function(z){return this.startOf(z,!1)},G.$set=function(z,V){var it,p=rt.p(z),v="set"+(this.$u?"UTC":""),x=(it={},it[Y]=v+"Date",it[$]=v+"Date",it[H]=v+"Month",it[W]=v+"FullYear",it[j]=v+"Hours",it[Q]=v+"Minutes",it[T]=v+"Seconds",it[nt]=v+"Milliseconds",it)[p],O=p===Y?this.$D+(V-this.$W):V;if(p===H||p===W){var E=this.clone().set($,1);E.$d[x](O),E.init(),this.$d=E.set($,Math.min(this.$D,E.daysInMonth())).$d}else x&&this.$d[x](O);return this.init(),this},G.set=function(z,V){return this.clone().$set(z,V)},G.get=function(z){return this[rt.p(z)]()},G.add=function(z,V){var it,p=this;z=Number(z);var v=rt.p(V),x=function(S){var A=b(p);return rt.w(A.date(A.date()+Math.round(S*z)),p)};if(v===H)return this.set(H,this.$M+z);if(v===W)return this.set(W,this.$y+z);if(v===Y)return x(1);if(v===C)return x(7);var O=(it={},it[Q]=L,it[j]=k,it[T]=1e3,it)[v]||1,E=this.$d.getTime()+z*O;return rt.w(E,this)},G.subtract=function(z,V){return this.add(-1*z,V)},G.format=function(z){var V=this,it=this.$locale();if(!this.isValid())return it.invalidDate||Z;var p=z||"YYYY-MM-DDTHH:mm:ssZ",v=rt.z(this),x=this.$H,O=this.$m,E=this.$M,S=it.weekdays,A=it.months,N=function(g,M,J,at){return g&&(g[M]||g(V,p))||J[M].slice(0,at)},ut=function(g){return rt.s(x%12||12,g,"0")},w=it.meridiem||function(g,M,J){var at=g<12?"AM":"PM";return J?at.toLowerCase():at},F={YY:String(this.$y).slice(-2),YYYY:this.$y,M:E+1,MM:rt.s(E+1,2,"0"),MMM:N(it.monthsShort,E,A,3),MMMM:N(A,E),D:this.$D,DD:rt.s(this.$D,2,"0"),d:String(this.$W),dd:N(it.weekdaysMin,this.$W,S,2),ddd:N(it.weekdaysShort,this.$W,S,3),dddd:S[this.$W],H:String(x),HH:rt.s(x,2,"0"),h:ut(1),hh:ut(2),a:w(x,O,!0),A:w(x,O,!1),m:String(O),mm:rt.s(O,2,"0"),s:String(this.$s),ss:rt.s(this.$s,2,"0"),SSS:rt.s(this.$ms,3,"0"),Z:v};return p.replace(R,function(g,M){return M||F[g]||v.replace(":","")})},G.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},G.diff=function(z,V,it){var p,v=rt.p(V),x=b(z),O=(x.utcOffset()-this.utcOffset())*L,E=this-x,S=rt.m(this,x);return S=(p={},p[W]=S/12,p[H]=S,p[et]=S/3,p[C]=(E-O)/6048e5,p[Y]=(E-O)/864e5,p[j]=E/k,p[Q]=E/L,p[T]=E/1e3,p)[v]||E,it?S:rt.a(S)},G.daysInMonth=function(){return this.endOf(H).$D},G.$locale=function(){return B[this.$L]},G.locale=function(z,V){if(!z)return this.$L;var it=this.clone(),p=ft(z,V,!0);return p&&(it.$L=p),it},G.clone=function(){return rt.w(this.$d,this)},G.toDate=function(){return new Date(this.valueOf())},G.toJSON=function(){return this.isValid()?this.toISOString():null},G.toISOString=function(){return this.$d.toISOString()},G.toString=function(){return this.$d.toUTCString()},D}(),dt=I.prototype;return b.prototype=dt,[["$ms",nt],["$s",T],["$m",Q],["$H",j],["$W",Y],["$M",H],["$y",W],["$D",$]].forEach(function(D){dt[D[1]]=function(G){return this.$g(G,D[0],D[1])}}),b.extend=function(D,G){return D.$i||(D(G,I,b),D.$i=!0),b},b.locale=ft,b.isDayjs=ht,b.unix=function(D){return b(1e3*D)},b.en=B[X],b.Ls=B,b.p={},b}()},5268:function(mt){mt.exports=function(){"use strict";var L=/[+-]\d\d(?::?\d\d)?/g,k=/([+-]|\d\d)/g;return function(nt,T,Q){var j=T.prototype;Q.utc=function(Z){return new T({date:Z,utc:!0,args:arguments})},j.utc=function(Z){var ot=Q(this.toDate(),{locale:this.$L,utc:!0});return Z?ot.add(this.utcOffset(),"minute"):ot},j.local=function(){return Q(this.toDate(),{locale:this.$L,utc:!1})};var Y=j.parse;j.parse=function(Z){Z.utc&&(this.$u=!0),this.$utils().u(Z.$offset)||(this.$offset=Z.$offset),Y.call(this,Z)};var C=j.init;j.init=function(){if(this.$u){var Z=this.$d;this.$y=Z.getUTCFullYear(),this.$M=Z.getUTCMonth(),this.$D=Z.getUTCDate(),this.$W=Z.getUTCDay(),this.$H=Z.getUTCHours(),this.$m=Z.getUTCMinutes(),this.$s=Z.getUTCSeconds(),this.$ms=Z.getUTCMilliseconds()}else C.call(this)};var H=j.utcOffset;j.utcOffset=function(Z,ot){var R=this.$utils().u;if(R(Z))return this.$u?0:R(this.$offset)?H.call(this):this.$offset;if("string"==typeof Z&&null===(Z=function(X){void 0===X&&(X="");var B=X.match(L);if(!B)return null;var ht=(""+B[0]).match(k)||["-",0,0],b=60*+ht[1]+ +ht[2];return 0===b?0:"+"===ht[0]?b:-b}(Z)))return this;var ct=Math.abs(Z)<=16?60*Z:Z,K=this;if(ot)return K.$offset=ct,K.$u=0===Z,K;if(0!==Z){var _=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(K=this.local().add(ct+_,"minute")).$offset=ct,K.$x.$localOffset=_}else K=this.utc();return K};var et=j.format;j.format=function(Z){return et.call(this,Z||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":""))},j.valueOf=function(){var Z=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*Z},j.isUTC=function(){return!!this.$u},j.toISOString=function(){return this.toDate().toISOString()},j.toString=function(){return this.toDate().toUTCString()};var W=j.toDate;j.toDate=function(Z){return"s"===Z&&this.$offset?Q(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():W.call(this)};var $=j.diff;j.diff=function(Z,ot,R){if(Z&&this.$u===Z.$u)return $.call(this,Z,ot,R);var ct=this.local(),K=Q(Z).local();return $.call(ct,K,ot,R)}}}()},7484:(mt,yt,L)=>{"use strict";var k=L(3907),nt=L(5917),T=L(2844),Q=L(7378);mt.exports=function(Y,C,H){if(!Y||"object"!=typeof Y&&"function"!=typeof Y)throw new T("`obj` must be an object or a function`");if("string"!=typeof C&&"symbol"!=typeof C)throw new T("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new T("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new T("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new T("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new T("`loose`, if provided, must be a boolean");var et=arguments.length>3?arguments[3]:null,W=arguments.length>4?arguments[4]:null,$=arguments.length>5?arguments[5]:null,Z=arguments.length>6&&arguments[6],ot=!!Q&&Q(Y,C);if(k)k(Y,C,{configurable:null===$&&ot?ot.configurable:!$,enumerable:null===et&&ot?ot.enumerable:!et,value:H,writable:null===W&&ot?ot.writable:!W});else{if(!Z&&(et||W||$))throw new nt("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");Y[C]=H}}},5469:mt=>{"use strict";function yt(p,v,x){x=x||2;var N,ut,w,F,g,M,J,O=v&&v.length,E=O?v[0]*x:p.length,S=L(p,0,E,x,!0),A=[];if(!S||S.next===S.prev)return A;if(O&&(S=function C(p,v,x,O){var S,A,w,E=[];for(S=0,A=v.length;S<A;S++)(w=L(p,v[S]*O,S<A-1?v[S+1]*O:p.length,O,!1))===w.next&&(w.steiner=!0),E.push(ct(w));for(E.sort(H),S=0;S<E.length;S++)x=et(E[S],x);return x}(p,v,S,x)),p.length>80*x){N=w=p[0],ut=F=p[1];for(var at=x;at<E;at+=x)(g=p[at])<N&&(N=g),(M=p[at+1])<ut&&(ut=M),g>w&&(w=g),M>F&&(F=M);J=0!==(J=Math.max(w-N,F-ut))?32767/J:0}return nt(S,A,x,N,ut,J,0),A}function L(p,v,x,O,E){var S,A;if(E===it(p,v,x,O)>0)for(S=v;S<x;S+=O)A=G(S,p[S],p[S+1],A);else for(S=x-O;S>=v;S-=O)A=G(S,p[S],p[S+1],A);return A&&B(A,A.next)&&(z(A),A=A.next),A}function k(p,v){if(!p)return p;v||(v=p);var O,x=p;do{if(O=!1,x.steiner||!B(x,x.next)&&0!==X(x.prev,x,x.next))x=x.next;else{if(z(x),(x=v=x.prev)===x.next)break;O=!0}}while(O||x!==v);return v}function nt(p,v,x,O,E,S,A){if(p){!A&&S&&function Z(p,v,x,O){var E=p;do{0===E.z&&(E.z=R(E.x,E.y,v,x,O)),E.prevZ=E.prev,E.nextZ=E.next,E=E.next}while(E!==p);E.prevZ.nextZ=null,E.prevZ=null,function ot(p){var v,x,O,E,S,A,N,ut,w=1;do{for(x=p,p=null,S=null,A=0;x;){for(A++,O=x,N=0,v=0;v<w&&(N++,O=O.nextZ);v++);for(ut=w;N>0||ut>0&&O;)0!==N&&(0===ut||!O||x.z<=O.z)?(E=x,x=x.nextZ,N--):(E=O,O=O.nextZ,ut--),S?S.nextZ=E:p=E,E.prevZ=S,S=E;x=O}S.nextZ=null,w*=2}while(A>1)}(E)}(p,O,E,S);for(var ut,w,N=p;p.prev!==p.next;)if(ut=p.prev,w=p.next,S?Q(p,O,E,S):T(p))v.push(ut.i/x|0),v.push(p.i/x|0),v.push(w.i/x|0),z(p),p=w.next,N=w.next;else if((p=w)===N){A?1===A?nt(p=j(k(p),v,x),v,x,O,E,S,2):2===A&&Y(p,v,x,O,E,S):nt(k(p),v,x,O,E,S,1);break}}}function T(p){var v=p.prev,x=p,O=p.next;if(X(v,x,O)>=0)return!1;for(var E=v.x,S=x.x,A=O.x,N=v.y,ut=x.y,w=O.y,F=E<S?E<A?E:A:S<A?S:A,g=N<ut?N<w?N:w:ut<w?ut:w,M=E>S?E>A?E:A:S>A?S:A,J=N>ut?N>w?N:w:ut>w?ut:w,at=O.next;at!==v;){if(at.x>=F&&at.x<=M&&at.y>=g&&at.y<=J&&K(E,N,S,ut,A,w,at.x,at.y)&&X(at.prev,at,at.next)>=0)return!1;at=at.next}return!0}function Q(p,v,x,O){var E=p.prev,S=p,A=p.next;if(X(E,S,A)>=0)return!1;for(var N=E.x,ut=S.x,w=A.x,F=E.y,g=S.y,M=A.y,J=N<ut?N<w?N:w:ut<w?ut:w,at=F<g?F<M?F:M:g<M?g:M,It=N>ut?N>w?N:w:ut>w?ut:w,Et=F>g?F>M?F:M:g>M?g:M,Dt=R(J,at,v,x,O),Lt=R(It,Et,v,x,O),St=p.prevZ,xt=p.nextZ;St&&St.z>=Dt&&xt&&xt.z<=Lt;){if(St.x>=J&&St.x<=It&&St.y>=at&&St.y<=Et&&St!==E&&St!==A&&K(N,F,ut,g,w,M,St.x,St.y)&&X(St.prev,St,St.next)>=0||(St=St.prevZ,xt.x>=J&&xt.x<=It&&xt.y>=at&&xt.y<=Et&&xt!==E&&xt!==A&&K(N,F,ut,g,w,M,xt.x,xt.y)&&X(xt.prev,xt,xt.next)>=0))return!1;xt=xt.nextZ}for(;St&&St.z>=Dt;){if(St.x>=J&&St.x<=It&&St.y>=at&&St.y<=Et&&St!==E&&St!==A&&K(N,F,ut,g,w,M,St.x,St.y)&&X(St.prev,St,St.next)>=0)return!1;St=St.prevZ}for(;xt&&xt.z<=Lt;){if(xt.x>=J&&xt.x<=It&&xt.y>=at&&xt.y<=Et&&xt!==E&&xt!==A&&K(N,F,ut,g,w,M,xt.x,xt.y)&&X(xt.prev,xt,xt.next)>=0)return!1;xt=xt.nextZ}return!0}function j(p,v,x){var O=p;do{var E=O.prev,S=O.next.next;!B(E,S)&&ht(E,O,O.next,S)&&I(E,S)&&I(S,E)&&(v.push(E.i/x|0),v.push(O.i/x|0),v.push(S.i/x|0),z(O),z(O.next),O=p=S),O=O.next}while(O!==p);return k(O)}function Y(p,v,x,O,E,S){var A=p;do{for(var N=A.next.next;N!==A.prev;){if(A.i!==N.i&&_(A,N)){var ut=D(A,N);return A=k(A,A.next),ut=k(ut,ut.next),nt(A,v,x,O,E,S,0),void nt(ut,v,x,O,E,S,0)}N=N.next}A=A.next}while(A!==p)}function H(p,v){return p.x-v.x}function et(p,v){var x=function W(p,v){var A,x=v,O=p.x,E=p.y,S=-1/0;do{if(E<=x.y&&E>=x.next.y&&x.next.y!==x.y){var N=x.x+(E-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(N<=O&&N>S&&(S=N,A=x.x<x.next.x?x:x.next,N===O))return A}x=x.next}while(x!==v);if(!A)return null;var M,ut=A,w=A.x,F=A.y,g=1/0;x=A;do{O>=x.x&&x.x>=w&&O!==x.x&&K(E<F?O:S,E,w,F,E<F?S:O,E,x.x,x.y)&&(M=Math.abs(E-x.y)/(O-x.x),I(x,p)&&(M<g||M===g&&(x.x>A.x||x.x===A.x&&$(A,x)))&&(A=x,g=M)),x=x.next}while(x!==ut);return A}(p,v);if(!x)return v;var O=D(x,p);return k(O,O.next),k(x,x.next)}function $(p,v){return X(p.prev,p,v.prev)<0&&X(v.next,p,p.next)<0}function R(p,v,x,O,E){return(p=1431655765&((p=858993459&((p=252645135&((p=16711935&((p=(p-x)*E|0)|p<<8))|p<<4))|p<<2))|p<<1))|(v=1431655765&((v=858993459&((v=252645135&((v=16711935&((v=(v-O)*E|0)|v<<8))|v<<4))|v<<2))|v<<1))<<1}function ct(p){var v=p,x=p;do{(v.x<x.x||v.x===x.x&&v.y<x.y)&&(x=v),v=v.next}while(v!==p);return x}function K(p,v,x,O,E,S,A,N){return(E-A)*(v-N)>=(p-A)*(S-N)&&(p-A)*(O-N)>=(x-A)*(v-N)&&(x-A)*(S-N)>=(E-A)*(O-N)}function _(p,v){return p.next.i!==v.i&&p.prev.i!==v.i&&!function rt(p,v){var x=p;do{if(x.i!==p.i&&x.next.i!==p.i&&x.i!==v.i&&x.next.i!==v.i&&ht(x,x.next,p,v))return!0;x=x.next}while(x!==p);return!1}(p,v)&&(I(p,v)&&I(v,p)&&function dt(p,v){var x=p,O=!1,E=(p.x+v.x)/2,S=(p.y+v.y)/2;do{x.y>S!=x.next.y>S&&x.next.y!==x.y&&E<(x.next.x-x.x)*(S-x.y)/(x.next.y-x.y)+x.x&&(O=!O),x=x.next}while(x!==p);return O}(p,v)&&(X(p.prev,p,v.prev)||X(p,v.prev,v))||B(p,v)&&X(p.prev,p,p.next)>0&&X(v.prev,v,v.next)>0)}function X(p,v,x){return(v.y-p.y)*(x.x-v.x)-(v.x-p.x)*(x.y-v.y)}function B(p,v){return p.x===v.x&&p.y===v.y}function ht(p,v,x,O){var E=b(X(p,v,x)),S=b(X(p,v,O)),A=b(X(x,O,p)),N=b(X(x,O,v));return!!(E!==S&&A!==N||0===E&&ft(p,x,v)||0===S&&ft(p,O,v)||0===A&&ft(x,p,O)||0===N&&ft(x,v,O))}function ft(p,v,x){return v.x<=Math.max(p.x,x.x)&&v.x>=Math.min(p.x,x.x)&&v.y<=Math.max(p.y,x.y)&&v.y>=Math.min(p.y,x.y)}function b(p){return p>0?1:p<0?-1:0}function I(p,v){return X(p.prev,p,p.next)<0?X(p,v,p.next)>=0&&X(p,p.prev,v)>=0:X(p,v,p.prev)<0||X(p,p.next,v)<0}function D(p,v){var x=new V(p.i,p.x,p.y),O=new V(v.i,v.x,v.y),E=p.next,S=v.prev;return p.next=v,v.prev=p,x.next=E,E.prev=x,O.next=x,x.prev=O,S.next=O,O.prev=S,O}function G(p,v,x,O){var E=new V(p,v,x);return O?(E.next=O.next,E.prev=O,O.next.prev=E,O.next=E):(E.prev=E,E.next=E),E}function z(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function V(p,v,x){this.i=p,this.x=v,this.y=x,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function it(p,v,x,O){for(var E=0,S=v,A=x-O;S<x;S+=O)E+=(p[A]-p[S])*(p[S+1]+p[A+1]),A=S;return E}mt.exports=yt,mt.exports.default=yt,yt.deviation=function(p,v,x,O){var E=v&&v.length,A=Math.abs(it(p,0,E?v[0]*x:p.length,x));if(E)for(var N=0,ut=v.length;N<ut;N++)A-=Math.abs(it(p,v[N]*x,N<ut-1?v[N+1]*x:p.length,x));var g=0;for(N=0;N<O.length;N+=3){var M=O[N]*x,J=O[N+1]*x,at=O[N+2]*x;g+=Math.abs((p[M]-p[at])*(p[J+1]-p[M+1])-(p[M]-p[J])*(p[at+1]-p[M+1]))}return 0===A&&0===g?0:Math.abs((g-A)/A)},yt.flatten=function(p){for(var v=p[0][0].length,x={vertices:[],holes:[],dimensions:v},O=0,E=0;E<p.length;E++){for(var S=0;S<p[E].length;S++)for(var A=0;A<v;A++)x.vertices.push(p[E][S][A]);E>0&&x.holes.push(O+=p[E-1].length)}return x}},3907:(mt,yt,L)=>{"use strict";var nt=L(5203)("%Object.defineProperty%",!0)||!1;if(nt)try{nt({},"a",{value:1})}catch(T){nt=!1}mt.exports=nt},3644:mt=>{"use strict";mt.exports=EvalError},9062:mt=>{"use strict";mt.exports=Error},1298:mt=>{"use strict";mt.exports=RangeError},2681:mt=>{"use strict";mt.exports=ReferenceError},5917:mt=>{"use strict";mt.exports=SyntaxError},2844:mt=>{"use strict";mt.exports=TypeError},7289:mt=>{"use strict";mt.exports=URIError},5731:function(mt,yt,L){var k;!function(nt){var D,T=nt.Promise,Q=T&&"resolve"in T&&"reject"in T&&"all"in T&&"race"in T&&(new T(function(G){D=G}),"function"==typeof D);yt?(yt.Promise=Q?T:dt,yt.Polyfill=dt):void 0!==(k=function(){return Q?T:dt}.call(yt,L,yt,mt))&&(mt.exports=k);var j="pending",Y="sealed",C="fulfilled",H="rejected",et=function(){};function W(D){return"[object Array]"===Object.prototype.toString.call(D)}var ot,$="undefined"!=typeof setImmediate?setImmediate:setTimeout,Z=[];function R(){for(var D=0;D<Z.length;D++)Z[D][0](Z[D][1]);Z=[],ot=!1}function ct(D,G){Z.push([D,G]),ot||(ot=!0,$(R,0))}function _(D){var G=D.owner,z=G.state_,V=G.data_,it=D[z],p=D.then;if("function"==typeof it){z=C;try{V=it(V)}catch(v){ft(p,v)}}X(p,V)||(z===C&&B(p,V),z===H&&ft(p,V))}function X(D,G){var z;try{if(D===G)throw new TypeError("A promises callback cannot return that same promise.");if(G&&("function"==typeof G||"object"==typeof G)){var V=G.then;if("function"==typeof V)return V.call(G,function(it){z||(z=!0,G!==it?B(D,it):ht(D,it))},function(it){z||(z=!0,ft(D,it))}),!0}}catch(it){return z||ft(D,it),!0}return!1}function B(D,G){(D===G||!X(D,G))&&ht(D,G)}function ht(D,G){D.state_===j&&(D.state_=Y,D.data_=G,ct(rt,D))}function ft(D,G){D.state_===j&&(D.state_=Y,D.data_=G,ct(I,D))}function b(D){var G=D.then_;D.then_=void 0;for(var z=0;z<G.length;z++)_(G[z])}function rt(D){D.state_=C,b(D)}function I(D){D.state_=H,b(D)}function dt(D){if("function"!=typeof D)throw new TypeError("Promise constructor takes a function argument");if(!(this instanceof dt))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function K(D,G){function V(it){ft(G,it)}try{D(function z(it){B(G,it)},V)}catch(it){V(it)}}(D,this)}dt.prototype={constructor:dt,state_:j,then_:null,data_:void 0,then:function(D,G){var z={owner:this,then:new this.constructor(et),fulfilled:D,rejected:G};return this.state_===C||this.state_===H?ct(_,z):this.then_.push(z),z.then},catch:function(D){return this.then(null,D)}},dt.all=function(D){if(!W(D))throw new TypeError("You must pass an array to Promise.all().");return new this(function(z,V){var it=[],p=0;function v(E){return p++,function(S){it[E]=S,--p||z(it)}}for(var O,x=0;x<D.length;x++)(O=D[x])&&"function"==typeof O.then?O.then(v(x),V):it[x]=O;p||z(it)})},dt.race=function(D){if(!W(D))throw new TypeError("You must pass an array to Promise.race().");return new this(function(z,V){for(var p,it=0;it<D.length;it++)(p=D[it])&&"function"==typeof p.then?p.then(z,V):z(p)})},dt.resolve=function(D){return D&&"object"==typeof D&&D.constructor===this?D:new this(function(z){z(D)})},dt.reject=function(D){return new this(function(z,V){V(D)})}}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this)},3457:mt=>{"use strict";var yt="Function.prototype.bind called on incompatible ",L=Object.prototype.toString,k=Math.max,nt="[object Function]",T=function(C,H){for(var et=[],W=0;W<C.length;W+=1)et[W]=C[W];for(var $=0;$<H.length;$+=1)et[$+C.length]=H[$];return et},Q=function(C,H){for(var et=[],W=H||0,$=0;W<C.length;W+=1,$+=1)et[$]=C[W];return et},j=function(Y,C){for(var H="",et=0;et<Y.length;et+=1)H+=Y[et],et+1<Y.length&&(H+=C);return H};mt.exports=function(C){var H=this;if("function"!=typeof H||L.apply(H)!==nt)throw new TypeError(yt+H);for(var W,et=Q(arguments,1),$=function(){if(this instanceof W){var K=H.apply(this,T(et,arguments));return Object(K)===K?K:this}return H.apply(C,T(et,arguments))},Z=k(0,H.length-et.length),ot=[],R=0;R<Z;R++)ot[R]="$"+R;if(W=Function("binder","return function ("+j(ot,",")+"){ return binder.apply(this,arguments); }")($),H.prototype){var ct=function(){};ct.prototype=H.prototype,W.prototype=new ct,ct.prototype=null}return W}},4444:(mt,yt,L)=>{"use strict";var k=L(3457);mt.exports=Function.prototype.bind||k},5203:(mt,yt,L)=>{"use strict";var k,nt=L(9062),T=L(3644),Q=L(1298),j=L(2681),Y=L(5917),C=L(2844),H=L(7289),et=Function,W=function(O){try{return et('"use strict"; return ('+O+").constructor;")()}catch(E){}},$=Object.getOwnPropertyDescriptor;if($)try{$({},"")}catch(O){$=null}var Z=function(){throw new C},ot=$?function(){try{return Z}catch(O){try{return $(arguments,"callee").get}catch(E){return Z}}}():Z,R=L(2969)(),ct=L(9757)(),K=Object.getPrototypeOf||(ct?function(O){return O.__proto__}:null),_={},X="undefined"!=typeof Uint8Array&&K?K(Uint8Array):k,B={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?k:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?k:ArrayBuffer,"%ArrayIteratorPrototype%":R&&K?K([][Symbol.iterator]()):k,"%AsyncFromSyncIteratorPrototype%":k,"%AsyncFunction%":_,"%AsyncGenerator%":_,"%AsyncGeneratorFunction%":_,"%AsyncIteratorPrototype%":_,"%Atomics%":"undefined"==typeof Atomics?k:Atomics,"%BigInt%":"undefined"==typeof BigInt?k:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?k:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?k:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?k:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":nt,"%eval%":eval,"%EvalError%":T,"%Float32Array%":"undefined"==typeof Float32Array?k:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?k:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?k:FinalizationRegistry,"%Function%":et,"%GeneratorFunction%":_,"%Int8Array%":"undefined"==typeof Int8Array?k:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?k:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?k:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":R&&K?K(K([][Symbol.iterator]())):k,"%JSON%":"object"==typeof JSON?JSON:k,"%Map%":"undefined"==typeof Map?k:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&R&&K?K((new Map)[Symbol.iterator]()):k,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?k:Promise,"%Proxy%":"undefined"==typeof Proxy?k:Proxy,"%RangeError%":Q,"%ReferenceError%":j,"%Reflect%":"undefined"==typeof Reflect?k:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?k:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&R&&K?K((new Set)[Symbol.iterator]()):k,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?k:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":R&&K?K(""[Symbol.iterator]()):k,"%Symbol%":R?Symbol:k,"%SyntaxError%":Y,"%ThrowTypeError%":ot,"%TypedArray%":X,"%TypeError%":C,"%Uint8Array%":"undefined"==typeof Uint8Array?k:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?k:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?k:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?k:Uint32Array,"%URIError%":H,"%WeakMap%":"undefined"==typeof WeakMap?k:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?k:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?k:WeakSet};if(K)try{null.error}catch(O){var ht=K(K(O));B["%Error.prototype%"]=ht}var ft=function O(E){var S;if("%AsyncFunction%"===E)S=W("async function () {}");else if("%GeneratorFunction%"===E)S=W("function* () {}");else if("%AsyncGeneratorFunction%"===E)S=W("async function* () {}");else if("%AsyncGenerator%"===E){var A=O("%AsyncGeneratorFunction%");A&&(S=A.prototype)}else if("%AsyncIteratorPrototype%"===E){var N=O("%AsyncGenerator%");N&&K&&(S=K(N.prototype))}return B[E]=S,S},b={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},rt=L(4444),I=L(7699),dt=rt.call(Function.call,Array.prototype.concat),D=rt.call(Function.apply,Array.prototype.splice),G=rt.call(Function.call,String.prototype.replace),z=rt.call(Function.call,String.prototype.slice),V=rt.call(Function.call,RegExp.prototype.exec),it=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,p=/\\(\\)?/g,v=function(E){var S=z(E,0,1),A=z(E,-1);if("%"===S&&"%"!==A)throw new Y("invalid intrinsic syntax, expected closing `%`");if("%"===A&&"%"!==S)throw new Y("invalid intrinsic syntax, expected opening `%`");var N=[];return G(E,it,function(ut,w,F,g){N[N.length]=F?G(g,p,"$1"):w||ut}),N},x=function(E,S){var N,A=E;if(I(b,A)&&(A="%"+(N=b[A])[0]+"%"),I(B,A)){var ut=B[A];if(ut===_&&(ut=ft(A)),void 0===ut&&!S)throw new C("intrinsic "+E+" exists, but is not available. Please file an issue!");return{alias:N,name:A,value:ut}}throw new Y("intrinsic "+E+" does not exist!")};mt.exports=function(E,S){if("string"!=typeof E||0===E.length)throw new C("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof S)throw new C('"allowMissing" argument must be a boolean');if(null===V(/^%?[^%]*%?$/,E))throw new Y("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var A=v(E),N=A.length>0?A[0]:"",ut=x("%"+N+"%",S),w=ut.name,F=ut.value,g=!1,M=ut.alias;M&&(N=M[0],D(A,dt([0,1],M)));for(var J=1,at=!0;J<A.length;J+=1){var It=A[J],Et=z(It,0,1),Dt=z(It,-1);if(('"'===Et||"'"===Et||"`"===Et||'"'===Dt||"'"===Dt||"`"===Dt)&&Et!==Dt)throw new Y("property names with quotes must have matching quotes");if(("constructor"===It||!at)&&(g=!0),I(B,w="%"+(N+="."+It)+"%"))F=B[w];else if(null!=F){if(!(It in F)){if(!S)throw new C("base intrinsic for "+E+" exists, but the property is not available.");return}if($&&J+1>=A.length){var Lt=$(F,It);F=(at=!!Lt)&&"get"in Lt&&!("originalValue"in Lt.get)?Lt.get:F[It]}else at=I(F,It),F=F[It];at&&!g&&(B[w]=F)}}return F}},7378:(mt,yt,L)=>{"use strict";var nt=L(5203)("%Object.getOwnPropertyDescriptor%",!0);if(nt)try{nt([],"length")}catch(T){nt=null}mt.exports=nt},7027:(mt,yt,L)=>{"use strict";var k=L(3907),nt=function(){return!!k};nt.hasArrayLengthDefineBug=function(){if(!k)return null;try{return 1!==k([],"length",{value:1}).length}catch(Q){return!0}},mt.exports=nt},9757:mt=>{"use strict";var yt={__proto__:null,foo:{}},L=Object;mt.exports=function(){return{__proto__:yt}.foo===yt.foo&&!(yt instanceof L)}},2969:(mt,yt,L)=>{"use strict";var k="undefined"!=typeof Symbol&&Symbol,nt=L(1983);mt.exports=function(){return"function"==typeof k&&"function"==typeof Symbol&&"symbol"==typeof k("foo")&&"symbol"==typeof Symbol("bar")&&nt()}},1983:mt=>{"use strict";mt.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var L={},k=Symbol("test"),nt=Object(k);if("string"==typeof k||"[object Symbol]"!==Object.prototype.toString.call(k)||"[object Symbol]"!==Object.prototype.toString.call(nt))return!1;for(k in L[k]=42,L)return!1;if("function"==typeof Object.keys&&0!==Object.keys(L).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(L).length)return!1;var Q=Object.getOwnPropertySymbols(L);if(1!==Q.length||Q[0]!==k||!Object.prototype.propertyIsEnumerable.call(L,k))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var j=Object.getOwnPropertyDescriptor(L,k);if(42!==j.value||!0!==j.enumerable)return!1}return!0}},7699:(mt,yt,L)=>{"use strict";var k=Function.prototype.call,nt=Object.prototype.hasOwnProperty,T=L(4444);mt.exports=T.call(k,nt)},936:(mt,yt)=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});var L=function(){function j(Y,C){for(var H=0;H<C.length;H++){var et=C[H];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(Y,et.key,et)}}return function(Y,C,H){return C&&j(Y.prototype,C),H&&j(Y,H),Y}}();function k(j,Y){if(!(j instanceof Y))throw new TypeError("Cannot call a class as a function")}var nt=function(){function j(Y,C,H){void 0===C&&(C=!1),k(this,j),this._fn=Y,this._once=C,this._thisArg=H,this._next=this._prev=this._owner=null}return L(j,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),j}();function T(j,Y){return j._head?(j._tail._next=Y,Y._prev=j._tail,j._tail=Y):(j._head=Y,j._tail=Y),Y._owner=j,Y}var Q=function(){function j(){k(this,j),this._head=this._tail=void 0}return L(j,[{key:"handlers",value:function(){var C=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],H=this._head;if(C)return!!H;for(var et=[];H;)et.push(H),H=H._next;return et}},{key:"has",value:function(C){if(!(C instanceof nt))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return C._owner===this}},{key:"dispatch",value:function(){var C=this._head;if(!C)return!1;for(;C;)C._once&&this.detach(C),C._fn.apply(C._thisArg,arguments),C=C._next;return!0}},{key:"add",value:function(C){var H=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof C)throw new Error("MiniSignal#add(): First arg must be a Function.");return T(this,new nt(C,!1,H))}},{key:"once",value:function(C){var H=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof C)throw new Error("MiniSignal#once(): First arg must be a Function.");return T(this,new nt(C,!0,H))}},{key:"detach",value:function(C){if(!(C instanceof nt))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return C._owner!==this||(C._prev&&(C._prev._next=C._next),C._next&&(C._next._prev=C._prev),C===this._head?(this._head=C._next,null===C._next&&(this._tail=null)):C===this._tail&&(this._tail=C._prev,this._tail._next=null),C._owner=null),this}},{key:"detachAll",value:function(){var C=this._head;if(!C)return this;for(this._head=this._tail=null;C;)C._owner=null,C=C._next;return this}}]),j}();Q.MiniSignalBinding=nt,yt.default=Q,mt.exports=yt.default},5943:mt=>{"use strict";var yt=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;function nt(Q){if(null==Q)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(Q)}mt.exports=function T(){try{if(!Object.assign)return!1;var Q=new String("abc");if(Q[5]="de","5"===Object.getOwnPropertyNames(Q)[0])return!1;for(var j={},Y=0;Y<10;Y++)j["_"+String.fromCharCode(Y)]=Y;if("0123456789"!==Object.getOwnPropertyNames(j).map(function(et){return j[et]}).join(""))return!1;var H={};return"abcdefghijklmnopqrst".split("").forEach(function(et){H[et]=et}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},H)).join("")}catch(et){return!1}}()?Object.assign:function(Q,j){for(var Y,H,C=nt(Q),et=1;et<arguments.length;et++){for(var W in Y=Object(arguments[et]))L.call(Y,W)&&(C[W]=Y[W]);if(yt){H=yt(Y);for(var $=0;$<H.length;$++)k.call(Y,H[$])&&(C[H[$]]=Y[H[$]])}}return C}},7024:(mt,yt,L)=>{var k="function"==typeof Map&&Map.prototype,nt=Object.getOwnPropertyDescriptor&&k?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,T=k&&nt&&"function"==typeof nt.get?nt.get:null,Q=k&&Map.prototype.forEach,j="function"==typeof Set&&Set.prototype,Y=Object.getOwnPropertyDescriptor&&j?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,C=j&&Y&&"function"==typeof Y.get?Y.get:null,H=j&&Set.prototype.forEach,W="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,Z="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,R="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,ct=Boolean.prototype.valueOf,K=Object.prototype.toString,_=Function.prototype.toString,X=String.prototype.match,B=String.prototype.slice,ht=String.prototype.replace,ft=String.prototype.toUpperCase,b=String.prototype.toLowerCase,rt=RegExp.prototype.test,I=Array.prototype.concat,dt=Array.prototype.join,D=Array.prototype.slice,G=Math.floor,z="function"==typeof BigInt?BigInt.prototype.valueOf:null,V=Object.getOwnPropertySymbols,it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,p="function"==typeof Symbol&&"object"==typeof Symbol.iterator,v="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol,1)?Symbol.toStringTag:null,x=Object.prototype.propertyIsEnumerable,O=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(U){return U.__proto__}:null);function E(U,q){if(U===1/0||U===-1/0||U!=U||U&&U>-1e3&&U<1e3||rt.call(/e/,q))return q;var Xt=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof U){var Vt=U<0?-G(-U):G(U);if(Vt!==U){var Zt=String(Vt),Ct=B.call(q,Zt.length+1);return ht.call(Zt,Xt,"$&_")+"."+ht.call(ht.call(Ct,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ht.call(q,Xt,"$&_")}var S=L(4654),A=S.custom,N=Dt(A)?A:null;function ut(U,q,Xt){var Vt="double"===(Xt.quoteStyle||q)?'"':"'";return Vt+U+Vt}function w(U){return ht.call(String(U),/"/g,"&quot;")}function F(U){return!("[object Array]"!==Gt(U)||v&&"object"==typeof U&&v in U)}function M(U){return!("[object RegExp]"!==Gt(U)||v&&"object"==typeof U&&v in U)}function Dt(U){if(p)return U&&"object"==typeof U&&U instanceof Symbol;if("symbol"==typeof U)return!0;if(!U||"object"!=typeof U||!it)return!1;try{return it.call(U),!0}catch(q){}return!1}mt.exports=function U(q,Xt,Vt,Zt){var Ct=Xt||{};if(xt(Ct,"quoteStyle")&&"single"!==Ct.quoteStyle&&"double"!==Ct.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(xt(Ct,"maxStringLength")&&("number"==typeof Ct.maxStringLength?Ct.maxStringLength<0&&Ct.maxStringLength!==1/0:null!==Ct.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var de=!xt(Ct,"customInspect")||Ct.customInspect;if("boolean"!=typeof de&&"symbol"!==de)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(xt(Ct,"indent")&&null!==Ct.indent&&"\t"!==Ct.indent&&!(parseInt(Ct.indent,10)===Ct.indent&&Ct.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(xt(Ct,"numericSeparator")&&"boolean"!=typeof Ct.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var me=Ct.numericSeparator;if(void 0===q)return"undefined";if(null===q)return"null";if("boolean"==typeof q)return q?"true":"false";if("string"==typeof q)return _e(q,Ct);if("number"==typeof q){if(0===q)return 1/0/q>0?"0":"-0";var qt=String(q);return me?E(q,qt):qt}if("bigint"==typeof q){var ue=String(q)+"n";return me?E(q,ue):ue}var Cr=void 0===Ct.depth?5:Ct.depth;if(void 0===Vt&&(Vt=0),Vt>=Cr&&Cr>0&&"object"==typeof q)return F(q)?"[Array]":"[Object]";var le=function Mr(U,q){var Xt;if("\t"===U.indent)Xt="\t";else{if(!("number"==typeof U.indent&&U.indent>0))return null;Xt=dt.call(Array(U.indent+1)," ")}return{base:Xt,prev:dt.call(Array(q+1),Xt)}}(Ct,Vt);if(void 0===Zt)Zt=[];else if(se(Zt,q)>=0)return"[Circular]";function fe(jt,Ut,oi){if(Ut&&(Zt=D.call(Zt)).push(Ut),oi){var Lr={depth:Ct.depth};return xt(Ct,"quoteStyle")&&(Lr.quoteStyle=Ct.quoteStyle),U(jt,Lr,Vt+1,Zt)}return U(jt,Ct,Vt+1,Zt)}if("function"==typeof q&&!M(q)){var lt=function Kt(U){if(U.name)return U.name;var q=X.call(_.call(U),/^function\s*([\w$]+)/);return q?q[1]:null}(q),ar=we(q,fe);return"[Function"+(lt?": "+lt:" (anonymous)")+"]"+(ar.length>0?" { "+dt.call(ar,", ")+" }":"")}if(Dt(q)){var oe=p?ht.call(String(q),/^(Symbol\(.*\))_[^)]*$/,"$1"):it.call(q);return"object"!=typeof q||p?oe:Se(oe)}if(function ei(U){return!(!U||"object"!=typeof U)&&("undefined"!=typeof HTMLElement&&U instanceof HTMLElement||"string"==typeof U.nodeName&&"function"==typeof U.getAttribute)}(q)){for(var te="<"+b.call(String(q.nodeName)),Rr=q.attributes||[],sr=0;sr<Rr.length;sr++)te+=" "+Rr[sr].name+"="+ut(w(Rr[sr].value),"double",Ct);return te+=">",q.childNodes&&q.childNodes.length&&(te+="..."),te+"</"+b.call(String(q.nodeName))+">"}if(F(q)){if(0===q.length)return"[]";var je=we(q,fe);return le&&!function Or(U){for(var q=0;q<U.length;q++)if(se(U[q],"\n")>=0)return!1;return!0}(je)?"["+or(je,le)+"]":"[ "+dt.call(je,", ")+" ]"}if(function J(U){return!("[object Error]"!==Gt(U)||v&&"object"==typeof U&&v in U)}(q)){var ur=we(q,fe);return"cause"in Error.prototype||!("cause"in q)||x.call(q,"cause")?0===ur.length?"["+String(q)+"]":"{ ["+String(q)+"] "+dt.call(ur,", ")+" }":"{ ["+String(q)+"] "+dt.call(I.call("[cause]: "+fe(q.cause),ur),", ")+" }"}if("object"==typeof q&&de){if(N&&"function"==typeof q[N]&&S)return S(q,{depth:Cr-Vt});if("symbol"!==de&&"function"==typeof q.inspect)return q.inspect()}if(function Ye(U){if(!T||!U||"object"!=typeof U)return!1;try{T.call(U);try{C.call(U)}catch(q){return!0}return U instanceof Map}catch(q){}return!1}(q)){var Dr=[];return Q&&Q.call(q,function(jt,Ut){Dr.push(fe(Ut,q,!0)+" => "+fe(jt,q))}),ri("Map",T.call(q),Dr,le)}if(function ti(U){if(!C||!U||"object"!=typeof U)return!1;try{C.call(U);try{T.call(U)}catch(q){return!0}return U instanceof Set}catch(q){}return!1}(q)){var ii=[];return H&&H.call(q,function(jt){ii.push(fe(jt,q))}),ri("Set",C.call(q),ii,le)}if(function Jr(U){if(!W||!U||"object"!=typeof U)return!1;try{W.call(U,W);try{Z.call(U,Z)}catch(q){return!0}return U instanceof WeakMap}catch(q){}return!1}(q))return Ar("WeakMap");if(function Pr(U){if(!Z||!U||"object"!=typeof U)return!1;try{Z.call(U,Z);try{W.call(U,W)}catch(q){return!0}return U instanceof WeakSet}catch(q){}return!1}(q))return Ar("WeakSet");if(function Di(U){if(!R||!U||"object"!=typeof U)return!1;try{return R.call(U),!0}catch(q){}return!1}(q))return Ar("WeakRef");if(function It(U){return!("[object Number]"!==Gt(U)||v&&"object"==typeof U&&v in U)}(q))return Se(fe(Number(q)));if(function Lt(U){if(!U||"object"!=typeof U||!z)return!1;try{return z.call(U),!0}catch(q){}return!1}(q))return Se(fe(z.call(q)));if(function Et(U){return!("[object Boolean]"!==Gt(U)||v&&"object"==typeof U&&v in U)}(q))return Se(ct.call(q));if(function at(U){return!("[object String]"!==Gt(U)||v&&"object"==typeof U&&v in U)}(q))return Se(fe(String(q)));if("undefined"!=typeof window&&q===window)return"{ [object Window] }";if(q===global)return"{ [object globalThis] }";if(!function g(U){return!("[object Date]"!==Gt(U)||v&&"object"==typeof U&&v in U)}(q)&&!M(q)){var Fe=we(q,fe),Fr=O?O(q)===Object.prototype:q instanceof Object||q.constructor===Object,Pe=q instanceof Object?"":"null prototype",Ie=!Fr&&v&&Object(q)===q&&v in q?B.call(Gt(q),8,-1):Pe?"Object":"",hr=(Fr||"function"!=typeof q.constructor?"":q.constructor.name?q.constructor.name+" ":"")+(Ie||Pe?"["+dt.call(I.call([],Ie||[],Pe||[]),": ")+"] ":"");return 0===Fe.length?hr+"{}":le?hr+"{"+or(Fe,le)+"}":hr+"{ "+dt.call(Fe,", ")+" }"}return String(q)};var St=Object.prototype.hasOwnProperty||function(U){return U in this};function xt(U,q){return St.call(U,q)}function Gt(U){return K.call(U)}function se(U,q){if(U.indexOf)return U.indexOf(q);for(var Xt=0,Vt=U.length;Xt<Vt;Xt++)if(U[Xt]===q)return Xt;return-1}function _e(U,q){if(U.length>q.maxStringLength){var Xt=U.length-q.maxStringLength,Vt="... "+Xt+" more character"+(Xt>1?"s":"");return _e(B.call(U,0,q.maxStringLength),q)+Vt}return ut(ht.call(ht.call(U,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Ir),"single",q)}function Ir(U){var q=U.charCodeAt(0),Xt={8:"b",9:"t",10:"n",12:"f",13:"r"}[q];return Xt?"\\"+Xt:"\\x"+(q<16?"0":"")+ft.call(q.toString(16))}function Se(U){return"Object("+U+")"}function Ar(U){return U+" { ? }"}function ri(U,q,Xt,Vt){return U+" ("+q+") {"+(Vt?or(Xt,Vt):dt.call(Xt,", "))+"}"}function or(U,q){if(0===U.length)return"";var Xt="\n"+q.prev+q.base;return Xt+dt.call(U,","+Xt)+"\n"+q.prev}function we(U,q){var Xt=F(U),Vt=[];if(Xt){Vt.length=U.length;for(var Zt=0;Zt<U.length;Zt++)Vt[Zt]=xt(U,Zt)?q(U[Zt],U):""}var de,Ct="function"==typeof V?V(U):[];if(p){de={};for(var me=0;me<Ct.length;me++)de["$"+Ct[me]]=Ct[me]}for(var qt in U)!xt(U,qt)||Xt&&String(Number(qt))===qt&&qt<U.length||p&&de["$"+qt]instanceof Symbol||(rt.call(/[^\w$]/,qt)?Vt.push(q(qt,U)+": "+q(U[qt],U)):Vt.push(qt+": "+q(U[qt],U)));if("function"==typeof V)for(var ue=0;ue<Ct.length;ue++)x.call(U,Ct[ue])&&Vt.push("["+q(Ct[ue])+"]: "+q(U[Ct[ue]],U));return Vt}},9515:mt=>{"use strict";mt.exports=(yt,L={})=>{if(!yt)return;const k={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}},nt=k.parser[L.strictMode?"strict":"loose"].exec(yt),T={};let Q=14;for(;Q--;)T[k.key[Q]]=nt[Q]||"";return T[k.q.name]={},T[k.key[12]].replace(k.q.parser,function(j,Y,C){Y&&(T[k.q.name][Y]=C)}),T}},4520:(mt,yt,L)=>{"use strict";L.r(yt),L.d(yt,{ALPHA_MODES:()=>Lt,AbstractBatchRenderer:()=>qo,AbstractRenderer:()=>Wo,AccessibilityManager:()=>Jn,AnimatedSprite:()=>mh,AppLoaderPlugin:()=>pa,Application:()=>jr,Attribute:()=>$i,BLEND_MODES:()=>F,BUFFER_BITS:()=>w,BasePrepare:()=>Oa,BaseRenderTexture:()=>Br,BaseTexture:()=>Wt,BatchDrawCall:()=>bi,BatchGeometry:()=>an,BatchPluginFactory:()=>ea,BatchRenderer:()=>ra,BatchShaderGenerator:()=>Qo,BatchTextureArray:()=>Ti,BitmapFont:()=>Ue,BitmapFontData:()=>qr,BitmapFontLoader:()=>Ha,BitmapText:()=>Hu,Bounds:()=>Nr,Buffer:()=>ie,CLEAR_MODES:()=>St,Circle:()=>oi,Container:()=>ye,CountLimiter:()=>Aa,DEG_TO_RAD:()=>hr,DRAW_MODES:()=>g,DisplayObject:()=>Jt,ENV:()=>N,Ellipse:()=>Lr,Extract:()=>oa,FORMATS:()=>M,FillStyle:()=>dn,Filter:()=>Oe,FilterState:()=>vo,Framebuffer:()=>di,GC_MODES:()=>xt,GLFramebuffer:()=>xo,GLProgram:()=>Go,GLTexture:()=>xi,GRAPHICS_CURVES:()=>dr,Geometry:()=>cr,Graphics:()=>Tn,GraphicsData:()=>xn,GraphicsGeometry:()=>wa,IGLUniformData:()=>Fs,InteractionData:()=>Xi,InteractionEvent:()=>eo,InteractionManager:()=>io,InteractionTrackingData:()=>ui,LINE_CAP:()=>be,LINE_JOIN:()=>xe,LineStyle:()=>Pa,Loader:()=>Je,LoaderResource:()=>zr,MASK_TYPES:()=>Kt,MIPMAP_MODES:()=>Dt,MSAA_QUALITY:()=>se,MaskData:()=>Eo,Matrix:()=>Qt,Mesh:()=>gr,MeshBatchUvs:()=>Ba,MeshGeometry:()=>Kr,MeshMaterial:()=>Zr,NineSlicePlane:()=>ph,ObjectRenderer:()=>Ur,ObservablePoint:()=>ze,PI_2:()=>Ie,PRECISION:()=>Gt,ParticleContainer:()=>au,ParticleRenderer:()=>ya,PlaneGeometry:()=>za,Point:()=>ee,Polygon:()=>lr,Prepare:()=>Ca,Program:()=>Gr,Quad:()=>po,QuadUv:()=>Zi,RAD_TO_DEG:()=>ni,RENDERER_TYPE:()=>ut,Rectangle:()=>Ut,RenderTexture:()=>Ke,RenderTexturePool:()=>lo,Renderer:()=>Me,RopeGeometry:()=>Va,RoundedRectangle:()=>$n,Runner:()=>ae,SCALE_MODES:()=>It,SHAPES:()=>jt,Shader:()=>Ne,SimpleMesh:()=>dh,SimplePlane:()=>Wa,SimpleRope:()=>ch,Sprite:()=>yr,SpriteMaskFilter:()=>Fo,Spritesheet:()=>Ra,SpritesheetLoader:()=>Da,State:()=>Be,System:()=>ce,TARGETS:()=>J,TEXT_GRADIENT:()=>er,TYPES:()=>at,TemporaryDisplayObject:()=>Ui,Text:()=>An,TextMetrics:()=>pe,TextStyle:()=>rr,Texture:()=>Rt,TextureLoader:()=>da,TextureMatrix:()=>_i,TextureUvs:()=>Wi,Ticker:()=>re,TickerPlugin:()=>to,TilingSprite:()=>Cu,TilingSpriteRenderer:()=>Na,TimeLimiter:()=>Mu,Transform:()=>Li,UPDATE_PRIORITY:()=>ge,UniformGroup:()=>Le,VERSION:()=>gh,ViewableBuffer:()=>Ko,WRAP_MODES:()=>Et,accessibleTarget:()=>Kn,autoDetectRenderer:()=>$o,checkMaxIfStatementsInShader:()=>Ro,defaultFilterVertex:()=>on,defaultVertex:()=>Zo,filters:()=>_h,graphicsUtils:()=>fu,groupD8:()=>$t,interactiveTarget:()=>ro,isMobile:()=>V,resources:()=>ss,settings:()=>v,systems:()=>Hs,uniformParsers:()=>yi,useDeprecated:()=>yh,utils:()=>k});var k={};L.r(k),L.d(k,{BaseTextureCache:()=>te,CanvasRenderTarget:()=>je,DATA_URI:()=>Dr,EventEmitter:()=>O(),ProgramCache:()=>ar,TextureCache:()=>oe,clearTextureCache:()=>sr,correctBlendMode:()=>Mr,createIndicesForQuads:()=>q,decomposeDataUri:()=>ii,deprecation:()=>lt,destroyTextureCache:()=>Rr,determineCrossOrigin:()=>Fr,earcut:()=>S(),getBufferType:()=>Xt,getResolutionOfUrl:()=>Pe,hex2rgb:()=>_e,hex2string:()=>Ir,interleaveTypedArrays:()=>Zt,isMobile:()=>V,isPow2:()=>de,isWebGLSupported:()=>ei,log2:()=>me,nextPow2:()=>Ct,premultiplyBlendMode:()=>Or,premultiplyRgba:()=>or,premultiplyTint:()=>we,premultiplyTintToRgba:()=>U,removeItems:()=>qt,rgb2hex:()=>Ar,sayHello:()=>ti,sign:()=>ue,skipHello:()=>Di,string2hex:()=>Se,trimCanvas:()=>ur,uid:()=>le,url:()=>A});var nt=L(5731),T=L(5943),Q=L.n(T);if(window.Promise||(window.Promise=nt.Polyfill),Object.assign||(Object.assign=Q()),Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!window.performance||!window.performance.now){var Y=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-Y}}for(var C=Date.now(),H=["ms","moz","webkit","o"],et=0;et<H.length&&!window.requestAnimationFrame;++et){var W=H[et];window.requestAnimationFrame=window[W+"RequestAnimationFrame"],window.cancelAnimationFrame=window[W+"CancelAnimationFrame"]||window[W+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(n){if("function"!=typeof n)throw new TypeError(n+"is not a function");var r=Date.now(),t=16+C-r;return t<0&&(t=0),C=r,window.setTimeout(function(){C=Date.now(),n(performance.now())},t)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){return clearTimeout(n)}),Math.sign||(Math.sign=function(r){return 0===(r=Number(r))||isNaN(r)?r:r>0?1:-1}),Number.isInteger||(Number.isInteger=function(r){return"number"==typeof r&&isFinite(r)&&Math.floor(r)===r}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array);var $=/iPhone/i,Z=/iPod/i,ot=/iPad/i,R=/\biOS-universal(?:.+)Mac\b/i,ct=/\bAndroid(?:.+)Mobile\b/i,K=/Android/i,_=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,X=/Silk/i,B=/Windows Phone/i,ht=/\bWindows(?:.+)ARM\b/i,ft=/BlackBerry/i,b=/BB10/i,rt=/Opera Mini/i,I=/\b(CriOS|Chrome)(?:.+)Mobile/i,dt=/Mobile(?:.+)Firefox\b/i,D=function(n){return void 0!==n&&"MacIntel"===n.platform&&"number"==typeof n.maxTouchPoints&&n.maxTouchPoints>1&&"undefined"==typeof MSStream},V=function z(n){var r={userAgent:"",platform:"",maxTouchPoints:0};n||"undefined"==typeof navigator?"string"==typeof n?r.userAgent=n:n&&n.userAgent&&(r={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0}):r={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var t=r.userAgent,e=t.split("[FBAN");void 0!==e[1]&&(t=e[0]),void 0!==(e=t.split("Twitter"))[1]&&(t=e[0]);var i=function G(n){return function(r){return r.test(n)}}(t),o={apple:{phone:i($)&&!i(B),ipod:i(Z),tablet:!i($)&&(i(ot)||D(r))&&!i(B),universal:i(R),device:(i($)||i(Z)||i(ot)||i(R)||D(r))&&!i(B)},amazon:{phone:i(_),tablet:!i(_)&&i(X),device:i(_)||i(X)},android:{phone:!i(B)&&i(_)||!i(B)&&i(ct),tablet:!i(B)&&!i(_)&&!i(ct)&&(i(X)||i(K)),device:!i(B)&&(i(_)||i(X)||i(ct)||i(K))||i(/\bokhttp\b/i)},windows:{phone:i(B),tablet:i(ht),device:i(B)||i(ht)},other:{blackberry:i(ft),blackberry10:i(b),opera:i(rt),firefox:i(dt),chrome:i(I),device:i(ft)||i(b)||i(rt)||i(dt)||i(I)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(window.navigator),v={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function it(n){var t,r=!0;(V.tablet||V.phone)&&(V.apple.device&&(t=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(t[1],10)<11&&(r=!1),V.android.device&&(t=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(t[1],10)<7&&(r=!1));return r?n:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:V.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:function p(){return!V.apple.device}(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},x=L(9170),O=L.n(x),E=L(5469),S=L.n(E),A=L(8762),N=(()=>{return(n=N||(N={}))[n.WEBGL_LEGACY=0]="WEBGL_LEGACY",n[n.WEBGL=1]="WEBGL",n[n.WEBGL2=2]="WEBGL2",N;var n})(),ut=(()=>{return(n=ut||(ut={}))[n.UNKNOWN=0]="UNKNOWN",n[n.WEBGL=1]="WEBGL",n[n.CANVAS=2]="CANVAS",ut;var n})(),w=(()=>{return(n=w||(w={}))[n.COLOR=16384]="COLOR",n[n.DEPTH=256]="DEPTH",n[n.STENCIL=1024]="STENCIL",w;var n})(),F=(()=>{return(n=F||(F={}))[n.NORMAL=0]="NORMAL",n[n.ADD=1]="ADD",n[n.MULTIPLY=2]="MULTIPLY",n[n.SCREEN=3]="SCREEN",n[n.OVERLAY=4]="OVERLAY",n[n.DARKEN=5]="DARKEN",n[n.LIGHTEN=6]="LIGHTEN",n[n.COLOR_DODGE=7]="COLOR_DODGE",n[n.COLOR_BURN=8]="COLOR_BURN",n[n.HARD_LIGHT=9]="HARD_LIGHT",n[n.SOFT_LIGHT=10]="SOFT_LIGHT",n[n.DIFFERENCE=11]="DIFFERENCE",n[n.EXCLUSION=12]="EXCLUSION",n[n.HUE=13]="HUE",n[n.SATURATION=14]="SATURATION",n[n.COLOR=15]="COLOR",n[n.LUMINOSITY=16]="LUMINOSITY",n[n.NORMAL_NPM=17]="NORMAL_NPM",n[n.ADD_NPM=18]="ADD_NPM",n[n.SCREEN_NPM=19]="SCREEN_NPM",n[n.NONE=20]="NONE",n[n.SRC_OVER=0]="SRC_OVER",n[n.SRC_IN=21]="SRC_IN",n[n.SRC_OUT=22]="SRC_OUT",n[n.SRC_ATOP=23]="SRC_ATOP",n[n.DST_OVER=24]="DST_OVER",n[n.DST_IN=25]="DST_IN",n[n.DST_OUT=26]="DST_OUT",n[n.DST_ATOP=27]="DST_ATOP",n[n.ERASE=26]="ERASE",n[n.SUBTRACT=28]="SUBTRACT",n[n.XOR=29]="XOR",F;var n})(),g=(()=>{return(n=g||(g={}))[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",g;var n})(),M=(()=>{return(n=M||(M={}))[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",M;var n})(),J=(()=>{return(n=J||(J={}))[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",J;var n})(),at=(()=>{return(n=at||(at={}))[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.FLOAT=5126]="FLOAT",n[n.HALF_FLOAT=36193]="HALF_FLOAT",at;var n})(),It=(()=>{return(n=It||(It={}))[n.NEAREST=0]="NEAREST",n[n.LINEAR=1]="LINEAR",It;var n})(),Et=(()=>{return(n=Et||(Et={}))[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",Et;var n})(),Dt=(()=>{return(n=Dt||(Dt={}))[n.OFF=0]="OFF",n[n.POW2=1]="POW2",n[n.ON=2]="ON",Dt;var n})(),Lt=(()=>{return(n=Lt||(Lt={}))[n.NPM=0]="NPM",n[n.UNPACK=1]="UNPACK",n[n.PMA=2]="PMA",n[n.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",n[n.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",n[n.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",Lt;var n})(),St=(()=>{return(n=St||(St={}))[n.NO=0]="NO",n[n.YES=1]="YES",n[n.AUTO=2]="AUTO",n[n.BLEND=0]="BLEND",n[n.CLEAR=1]="CLEAR",n[n.BLIT=2]="BLIT",St;var n})(),xt=(()=>{return(n=xt||(xt={}))[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL",xt;var n})(),Gt=(()=>{return(n=Gt||(Gt={})).LOW="lowp",n.MEDIUM="mediump",n.HIGH="highp",Gt;var n})(),Kt=(()=>{return(n=Kt||(Kt={}))[n.NONE=0]="NONE",n[n.SCISSOR=1]="SCISSOR",n[n.STENCIL=2]="STENCIL",n[n.SPRITE=3]="SPRITE",Kt;var n})(),se=(()=>{return(n=se||(se={}))[n.NONE=0]="NONE",n[n.LOW=2]="LOW",n[n.MEDIUM=4]="MEDIUM",n[n.HIGH=8]="HIGH",se;var n})();v.RETINA_PREFIX=/@([0-9\.]+)x/,v.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var Pr,Ye=!1;function Di(){Ye=!0}function ti(n){var r;Ye||(navigator.userAgent.toLowerCase().indexOf("chrome")>-1?(r=window.console).log.apply(r,["\n %c %c %c PixiJS 5.3.12 - \u2730 "+n+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):window.console&&window.console.log("PixiJS 5.3.12 - "+n+" - http://www.pixijs.com/"),Ye=!0)}function ei(){return void 0===Pr&&(Pr=function(){var r={stencil:!0,failIfMajorPerformanceCaveat:v.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),e=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),i=!(!e||!e.getContextAttributes().stencil);if(e){var o=e.getExtension("WEBGL_lose_context");o&&o.loseContext()}return e=null,i}catch(a){return!1}}()),Pr}function _e(n,r){return void 0===r&&(r=[]),r[0]=(n>>16&255)/255,r[1]=(n>>8&255)/255,r[2]=(255&n)/255,r}function Ir(n){var r=n.toString(16);return"#"+("000000".substr(0,6-r.length)+r)}function Se(n){return"string"==typeof n&&"#"===n[0]&&(n=n.substr(1)),parseInt(n,16)}function Ar(n){return(255*n[0]<<16)+(255*n[1]<<8)+(255*n[2]|0)}var Or=function ri(){for(var n=[],r=[],t=0;t<32;t++)n[t]=t,r[t]=t;n[F.NORMAL_NPM]=F.NORMAL,n[F.ADD_NPM]=F.ADD,n[F.SCREEN_NPM]=F.SCREEN,r[F.NORMAL]=F.NORMAL_NPM,r[F.ADD]=F.ADD_NPM,r[F.SCREEN]=F.SCREEN_NPM;var e=[];return e.push(r),e.push(n),e}();function Mr(n,r){return Or[r?1:0][n]}function or(n,r,t,e){return t=t||new Float32Array(4),e||void 0===e?(t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r):(t[0]=n[0],t[1]=n[1],t[2]=n[2]),t[3]=r,t}function we(n,r){if(1===r)return(255*r<<24)+n;if(0===r)return 0;var t=n>>16&255,e=n>>8&255,i=255&n;return(255*r<<24)+((t=t*r+.5|0)<<16)+((e=e*r+.5|0)<<8)+(i*r+.5|0)}function U(n,r,t,e){return(t=t||new Float32Array(4))[0]=(n>>16&255)/255,t[1]=(n>>8&255)/255,t[2]=(255&n)/255,(e||void 0===e)&&(t[0]*=r,t[1]*=r,t[2]*=r),t[3]=r,t}function q(n,r){void 0===r&&(r=null);var t=6*n;if((r=r||new Uint16Array(t)).length!==t)throw new Error("Out buffer length is incorrect, got "+r.length+" and expected "+t);for(var e=0,i=0;e<t;e+=6,i+=4)r[e+0]=i+0,r[e+1]=i+1,r[e+2]=i+2,r[e+3]=i+0,r[e+4]=i+2,r[e+5]=i+3;return r}function Xt(n){if(4===n.BYTES_PER_ELEMENT)return n instanceof Float32Array?"Float32Array":n instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===n.BYTES_PER_ELEMENT){if(n instanceof Uint16Array)return"Uint16Array"}else if(1===n.BYTES_PER_ELEMENT&&n instanceof Uint8Array)return"Uint8Array";return null}var Vt={Float32Array,Uint32Array,Int32Array,Uint8Array};function Zt(n,r){for(var t=0,e=0,i={},o=0;o<n.length;o++)e+=r[o],t+=n[o].length;var a=new ArrayBuffer(4*t),s=null,u=0;for(o=0;o<n.length;o++){var h=r[o],c=n[o],f=Xt(c);i[f]||(i[f]=new Vt[f](a)),s=i[f];for(var l=0;l<c.length;l++)s[(l/h|0)*e+u+l%h]=c[l];u+=h}return new Float32Array(a)}function Ct(n){return n+=0===n?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,1+(n|=n>>>16)}function de(n){return!(n&n-1||!n)}function me(n){var r=(n>65535?1:0)<<4,t=((n>>>=r)>255?1:0)<<3;return r|=t,r|=t=((n>>>=t)>15?1:0)<<2,(r|=t=((n>>>=t)>3?1:0)<<1)|(n>>>=t)>>1}function qt(n,r,t){var i,e=n.length;if(!(r>=e||0===t)){var o=e-(t=r+t>e?e-r:t);for(i=r;i<o;++i)n[i]=n[i+t];n.length=o}}function ue(n){return 0===n?0:n<0?-1:1}var Cr=0;function le(){return++Cr}var fe={};function lt(n,r,t){if(void 0===t&&(t=3),!fe[r]){var e=(new Error).stack;void 0===e?console.warn("PixiJS Deprecation Warning: ",r+"\nDeprecated since v"+n):(e=e.split("\n").splice(t).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",r+"\nDeprecated since v"+n),console.warn(e),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",r+"\nDeprecated since v"+n),console.warn(e))),fe[r]=!0}}var ar={},oe=Object.create(null),te=Object.create(null);function Rr(){var n;for(n in oe)oe[n].destroy();for(n in te)te[n].destroy()}function sr(){var n;for(n in oe)delete oe[n];for(n in te)delete te[n]}var je=function(){function n(r,t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=e||v.RESOLUTION,this.resize(r,t)}return n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(r,t){this.canvas.width=r*this.resolution,this.canvas.height=t*this.resolution},n.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(n.prototype,"width",{get:function(){return this.canvas.width},set:function(r){this.canvas.width=r},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.canvas.height},set:function(r){this.canvas.height=r},enumerable:!1,configurable:!0}),n}();function ur(n){var h,c,f,r=n.width,t=n.height,e=n.getContext("2d"),o=e.getImageData(0,0,r,t).data,a=o.length,s={top:null,left:null,right:null,bottom:null},u=null;for(h=0;h<a;h+=4)0!==o[h+3]&&(c=h/4%r,f=~~(h/4/r),null===s.top&&(s.top=f),(null===s.left||c<s.left)&&(s.left=c),(null===s.right||s.right<c)&&(s.right=c+1),(null===s.bottom||s.bottom<f)&&(s.bottom=f));return null!==s.top&&(u=e.getImageData(s.left,s.top,r=s.right-s.left,t=s.bottom-s.top+1)),{height:t,width:r,data:u}}var Fe,Dr=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function ii(n){var r=Dr.exec(n);if(r)return{mediaType:r[1]?r[1].toLowerCase():void 0,subType:r[2]?r[2].toLowerCase():void 0,charset:r[3]?r[3].toLowerCase():void 0,encoding:r[4]?r[4].toLowerCase():void 0,data:r[5]}}function Fr(n,r){if(void 0===r&&(r=window.location),0===n.indexOf("data:"))return"";r=r||window.location,Fe||(Fe=document.createElement("a")),Fe.href=n;var t=(0,A.parse)(Fe.href);return t.hostname!==r.hostname||(t.port||""!==r.port)&&t.port!==r.port||t.protocol!==r.protocol?"anonymous":""}function Pe(n,r){var t=v.RETINA_PREFIX.exec(n);return t?parseFloat(t[1]):void 0!==r?r:1}var Ie=2*Math.PI,ni=180/Math.PI,hr=Math.PI/180,jt=(()=>{return(n=jt||(jt={}))[n.POLY=0]="POLY",n[n.RECT=1]="RECT",n[n.CIRC=2]="CIRC",n[n.ELIP=3]="ELIP",n[n.RREC=4]="RREC",jt;var n})(),Ut=function(){function n(r,t,e,i){void 0===r&&(r=0),void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=Number(r),this.y=Number(t),this.width=Number(e),this.height=Number(i),this.type=jt.RECT}return Object.defineProperty(n.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(n,"EMPTY",{get:function(){return new n(0,0,0,0)},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copyFrom=function(r){return this.x=r.x,this.y=r.y,this.width=r.width,this.height=r.height,this},n.prototype.copyTo=function(r){return r.x=this.x,r.y=this.y,r.width=this.width,r.height=this.height,r},n.prototype.contains=function(r,t){return!(this.width<=0||this.height<=0)&&r>=this.x&&r<this.x+this.width&&t>=this.y&&t<this.y+this.height},n.prototype.pad=function(r,t){return void 0===r&&(r=0),void 0===t&&(t=r),this.x-=r,this.y-=t,this.width+=2*r,this.height+=2*t,this},n.prototype.fit=function(r){var t=Math.max(this.x,r.x),e=Math.min(this.x+this.width,r.x+r.width),i=Math.max(this.y,r.y),o=Math.min(this.y+this.height,r.y+r.height);return this.x=t,this.width=Math.max(e-t,0),this.y=i,this.height=Math.max(o-i,0),this},n.prototype.ceil=function(r,t){void 0===r&&(r=1),void 0===t&&(t=.001);var e=Math.ceil((this.x+this.width-t)*r)/r,i=Math.ceil((this.y+this.height-t)*r)/r;return this.x=Math.floor((this.x+t)*r)/r,this.y=Math.floor((this.y+t)*r)/r,this.width=e-this.x,this.height=i-this.y,this},n.prototype.enlarge=function(r){var t=Math.min(this.x,r.x),e=Math.max(this.x+this.width,r.x+r.width),i=Math.min(this.y,r.y),o=Math.max(this.y+this.height,r.y+r.height);return this.x=t,this.width=e-t,this.y=i,this.height=o-i,this},n}(),oi=function(){function n(r,t,e){void 0===r&&(r=0),void 0===t&&(t=0),void 0===e&&(e=0),this.x=r,this.y=t,this.radius=e,this.type=jt.CIRC}return n.prototype.clone=function(){return new n(this.x,this.y,this.radius)},n.prototype.contains=function(r,t){if(this.radius<=0)return!1;var i=this.x-r,o=this.y-t;return(i*=i)+(o*=o)<=this.radius*this.radius},n.prototype.getBounds=function(){return new Ut(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},n}(),Lr=function(){function n(r,t,e,i){void 0===r&&(r=0),void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=r,this.y=t,this.width=e,this.height=i,this.type=jt.ELIP}return n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.contains=function(r,t){if(this.width<=0||this.height<=0)return!1;var e=(r-this.x)/this.width,i=(t-this.y)/this.height;return(e*=e)+(i*=i)<=1},n.prototype.getBounds=function(){return new Ut(this.x-this.width,this.y-this.height,this.width,this.height)},n}(),lr=function(){function n(){for(var r=arguments,t=[],e=0;e<arguments.length;e++)t[e]=r[e];var i=Array.isArray(t[0])?t[0]:t;if("number"!=typeof i[0]){for(var o=[],a=0,s=i.length;a<s;a++)o.push(i[a].x,i[a].y);i=o}this.points=i,this.type=jt.POLY,this.closeStroke=!0}return n.prototype.clone=function(){var t=new n(this.points.slice());return t.closeStroke=this.closeStroke,t},n.prototype.contains=function(r,t){for(var e=!1,i=this.points.length/2,o=0,a=i-1;o<i;a=o++){var s=this.points[2*o],u=this.points[2*o+1],c=this.points[2*a+1];u>t!=c>t&&r<(t-u)/(c-u)*(this.points[2*a]-s)+s&&(e=!e)}return e},n}(),$n=function(){function n(r,t,e,i,o){void 0===r&&(r=0),void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=20),this.x=r,this.y=t,this.width=e,this.height=i,this.radius=o,this.type=jt.RREC}return n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height,this.radius)},n.prototype.contains=function(r,t){if(this.width<=0||this.height<=0)return!1;if(r>=this.x&&r<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||r>=this.x+this.radius&&r<=this.x+this.width-this.radius)return!0;var e=r-(this.x+this.radius),i=t-(this.y+this.radius),o=this.radius*this.radius;if(e*e+i*i<=o||(e=r-(this.x+this.width-this.radius))*e+i*i<=o||e*e+(i=t-(this.y+this.height-this.radius))*i<=o||(e=r-(this.x+this.radius))*e+i*i<=o)return!0}return!1},n}(),ee=function(){function n(r,t){void 0===r&&(r=0),void 0===t&&(t=0),this.x=r,this.y=t}return n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copyFrom=function(r){return this.set(r.x,r.y),this},n.prototype.copyTo=function(r){return r.set(this.x,this.y),r},n.prototype.equals=function(r){return r.x===this.x&&r.y===this.y},n.prototype.set=function(r,t){return void 0===r&&(r=0),void 0===t&&(t=r),this.x=r,this.y=t,this},n}(),ze=function(){function n(r,t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._x=e,this._y=i,this.cb=r,this.scope=t}return n.prototype.clone=function(r,t){return void 0===r&&(r=this.cb),void 0===t&&(t=this.scope),new n(r,t,this._x,this._y)},n.prototype.set=function(r,t){return void 0===r&&(r=0),void 0===t&&(t=r),(this._x!==r||this._y!==t)&&(this._x=r,this._y=t,this.cb.call(this.scope)),this},n.prototype.copyFrom=function(r){return(this._x!==r.x||this._y!==r.y)&&(this._x=r.x,this._y=r.y,this.cb.call(this.scope)),this},n.prototype.copyTo=function(r){return r.set(this._x,this._y),r},n.prototype.equals=function(r){return r.x===this._x&&r.y===this._y},Object.defineProperty(n.prototype,"x",{get:function(){return this._x},set:function(r){this._x!==r&&(this._x=r,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},set:function(r){this._y!==r&&(this._y=r,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),n}(),Qt=function(){function n(r,t,e,i,o,a){void 0===r&&(r=1),void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===o&&(o=0),void 0===a&&(a=0),this.array=null,this.a=r,this.b=t,this.c=e,this.d=i,this.tx=o,this.ty=a}return n.prototype.fromArray=function(r){this.a=r[0],this.b=r[1],this.c=r[3],this.d=r[4],this.tx=r[2],this.ty=r[5]},n.prototype.set=function(r,t,e,i,o,a){return this.a=r,this.b=t,this.c=e,this.d=i,this.tx=o,this.ty=a,this},n.prototype.toArray=function(r,t){this.array||(this.array=new Float32Array(9));var e=t||this.array;return r?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty,e[8]=1):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0,e[8]=1),e},n.prototype.apply=function(r,t){t=t||new ee;var e=r.x,i=r.y;return t.x=this.a*e+this.c*i+this.tx,t.y=this.b*e+this.d*i+this.ty,t},n.prototype.applyInverse=function(r,t){t=t||new ee;var e=1/(this.a*this.d+this.c*-this.b),i=r.x,o=r.y;return t.x=this.d*e*i+-this.c*e*o+(this.ty*this.c-this.tx*this.d)*e,t.y=this.a*e*o+-this.b*e*i+(-this.ty*this.a+this.tx*this.b)*e,t},n.prototype.translate=function(r,t){return this.tx+=r,this.ty+=t,this},n.prototype.scale=function(r,t){return this.a*=r,this.d*=t,this.c*=r,this.b*=t,this.tx*=r,this.ty*=t,this},n.prototype.rotate=function(r){var t=Math.cos(r),e=Math.sin(r),i=this.a,o=this.c,a=this.tx;return this.a=i*t-this.b*e,this.b=i*e+this.b*t,this.c=o*t-this.d*e,this.d=o*e+this.d*t,this.tx=a*t-this.ty*e,this.ty=a*e+this.ty*t,this},n.prototype.append=function(r){var t=this.a,e=this.b,i=this.c,o=this.d;return this.a=r.a*t+r.b*i,this.b=r.a*e+r.b*o,this.c=r.c*t+r.d*i,this.d=r.c*e+r.d*o,this.tx=r.tx*t+r.ty*i+this.tx,this.ty=r.tx*e+r.ty*o+this.ty,this},n.prototype.setTransform=function(r,t,e,i,o,a,s,u,h){return this.a=Math.cos(s+h)*o,this.b=Math.sin(s+h)*o,this.c=-Math.sin(s-u)*a,this.d=Math.cos(s-u)*a,this.tx=r-(e*this.a+i*this.c),this.ty=t-(e*this.b+i*this.d),this},n.prototype.prepend=function(r){var t=this.tx;if(1!==r.a||0!==r.b||0!==r.c||1!==r.d){var e=this.a,i=this.c;this.a=e*r.a+this.b*r.c,this.b=e*r.b+this.b*r.d,this.c=i*r.a+this.d*r.c,this.d=i*r.b+this.d*r.d}return this.tx=t*r.a+this.ty*r.c+r.tx,this.ty=t*r.b+this.ty*r.d+r.ty,this},n.prototype.decompose=function(r){var t=this.a,e=this.b,i=this.c,o=this.d,a=-Math.atan2(-i,o),s=Math.atan2(e,t),u=Math.abs(a+s);return u<1e-5||Math.abs(Ie-u)<1e-5?(r.rotation=s,r.skew.x=r.skew.y=0):(r.rotation=0,r.skew.x=a,r.skew.y=s),r.scale.x=Math.sqrt(t*t+e*e),r.scale.y=Math.sqrt(i*i+o*o),r.position.x=this.tx,r.position.y=this.ty,r},n.prototype.invert=function(){var r=this.a,t=this.b,e=this.c,i=this.d,o=this.tx,a=r*i-t*e;return this.a=i/a,this.b=-t/a,this.c=-e/a,this.d=r/a,this.tx=(e*this.ty-i*o)/a,this.ty=-(r*this.ty-t*o)/a,this},n.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.prototype.clone=function(){var r=new n;return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r},n.prototype.copyTo=function(r){return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r},n.prototype.copyFrom=function(r){return this.a=r.a,this.b=r.b,this.c=r.c,this.d=r.d,this.tx=r.tx,this.ty=r.ty,this},Object.defineProperty(n,"IDENTITY",{get:function(){return new n},enumerable:!1,configurable:!0}),Object.defineProperty(n,"TEMP_MATRIX",{get:function(){return new n},enumerable:!1,configurable:!0}),n}(),Ve=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],We=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],$e=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ze=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Fi=[],Zn=[],ai=Math.sign;!function Ka(){for(var n=0;n<16;n++){var r=[];Fi.push(r);for(var t=0;t<16;t++)for(var e=ai(Ve[n]*Ve[t]+$e[n]*We[t]),i=ai(We[n]*Ve[t]+Ze[n]*We[t]),o=ai(Ve[n]*$e[t]+$e[n]*Ze[t]),a=ai(We[n]*$e[t]+Ze[n]*Ze[t]),s=0;s<16;s++)if(Ve[s]===e&&We[s]===i&&$e[s]===o&&Ze[s]===a){r.push(s);break}}for(n=0;n<16;n++){var u=new Qt;u.set(Ve[n],We[n],$e[n],Ze[n],0,0),Zn.push(u)}}();var $t={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(n){return Ve[n]},uY:function(n){return We[n]},vX:function(n){return $e[n]},vY:function(n){return Ze[n]},inv:function(n){return 8&n?15&n:7&-n},add:function(n,r){return Fi[n][r]},sub:function(n,r){return Fi[n][$t.inv(r)]},rotate180:function(n){return 4^n},isVertical:function(n){return 2==(3&n)},byDirection:function(n,r){return 2*Math.abs(n)<=Math.abs(r)?r>=0?$t.S:$t.N:2*Math.abs(r)<=Math.abs(n)?n>0?$t.E:$t.W:r>0?n>0?$t.SE:$t.SW:n>0?$t.NE:$t.NW},matrixAppendRotationInv:function(n,r,t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=Zn[$t.inv(r)];i.tx=t,i.ty=e,n.append(i)}},Li=function(){function n(){this.worldTransform=new Qt,this.localTransform=new Qt,this.position=new ze(this.onChange,this,0,0),this.scale=new ze(this.onChange,this,1,1),this.pivot=new ze(this.onChange,this,0,0),this.skew=new ze(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return n.prototype.onChange=function(){this._localID++},n.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},n.prototype.updateLocalTransform=function(){var r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)},n.prototype.updateTransform=function(r){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){var e=r.worldTransform,i=this.worldTransform;i.a=t.a*e.a+t.b*e.c,i.b=t.a*e.b+t.b*e.d,i.c=t.c*e.a+t.d*e.c,i.d=t.c*e.b+t.d*e.d,i.tx=t.tx*e.a+t.ty*e.c+e.tx,i.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=r._worldID,this._worldID++}},n.prototype.setFromMatrix=function(r){r.decompose(this),this._localID++},Object.defineProperty(n.prototype,"rotation",{get:function(){return this._rotation},set:function(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())},enumerable:!1,configurable:!0}),n.IDENTITY=new n,n}();v.SORTABLE_CHILDREN=!1;var Nr=function(){function n(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return n.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},n.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},n.prototype.getRectangle=function(r){return this.minX>this.maxX||this.minY>this.maxY?Ut.EMPTY:((r=r||new Ut(0,0,1,1)).x=this.minX,r.y=this.minY,r.width=this.maxX-this.minX,r.height=this.maxY-this.minY,r)},n.prototype.addPoint=function(r){this.minX=Math.min(this.minX,r.x),this.maxX=Math.max(this.maxX,r.x),this.minY=Math.min(this.minY,r.y),this.maxY=Math.max(this.maxY,r.y)},n.prototype.addQuad=function(r){var t=this.minX,e=this.minY,i=this.maxX,o=this.maxY,a=r[0],s=r[1];t=a<t?a:t,e=s<e?s:e,i=a>i?a:i,o=s>o?s:o,t=(a=r[2])<t?a:t,e=(s=r[3])<e?s:e,i=a>i?a:i,o=s>o?s:o,t=(a=r[4])<t?a:t,e=(s=r[5])<e?s:e,i=a>i?a:i,o=s>o?s:o,e=(s=r[7])<e?s:e,i=(a=r[6])>i?a:i,o=s>o?s:o,this.minX=t=a<t?a:t,this.minY=e,this.maxX=i,this.maxY=o},n.prototype.addFrame=function(r,t,e,i,o){this.addFrameMatrix(r.worldTransform,t,e,i,o)},n.prototype.addFrameMatrix=function(r,t,e,i,o){var a=r.a,s=r.b,u=r.c,h=r.d,c=r.tx,f=r.ty,l=this.minX,d=this.minY,m=this.maxX,y=this.maxY,P=a*t+u*e+c,tt=s*t+h*e+f;l=P<l?P:l,d=tt<d?tt:d,m=P>m?P:m,y=tt>y?tt:y,l=(P=a*i+u*e+c)<l?P:l,d=(tt=s*i+h*e+f)<d?tt:d,m=P>m?P:m,y=tt>y?tt:y,l=(P=a*t+u*o+c)<l?P:l,d=(tt=s*t+h*o+f)<d?tt:d,m=P>m?P:m,y=tt>y?tt:y,d=(tt=s*i+h*o+f)<d?tt:d,m=(P=a*i+u*o+c)>m?P:m,y=tt>y?tt:y,this.minX=l=P<l?P:l,this.minY=d,this.maxX=m,this.maxY=y},n.prototype.addVertexData=function(r,t,e){for(var i=this.minX,o=this.minY,a=this.maxX,s=this.maxY,u=t;u<e;u+=2){var h=r[u],c=r[u+1];i=h<i?h:i,o=c<o?c:o,a=h>a?h:a,s=c>s?c:s}this.minX=i,this.minY=o,this.maxX=a,this.maxY=s},n.prototype.addVertices=function(r,t,e,i){this.addVerticesMatrix(r.worldTransform,t,e,i)},n.prototype.addVerticesMatrix=function(r,t,e,i,o,a){void 0===o&&(o=0),void 0===a&&(a=o);for(var s=r.a,u=r.b,h=r.c,c=r.d,f=r.tx,l=r.ty,d=this.minX,m=this.minY,y=this.maxX,P=this.maxY,tt=e;tt<i;tt+=2){var gt=t[tt],st=t[tt+1],bt=s*gt+h*st+f,vt=c*st+u*gt+l;d=Math.min(d,bt-o),y=Math.max(y,bt+o),m=Math.min(m,vt-a),P=Math.max(P,vt+a)}this.minX=d,this.minY=m,this.maxX=y,this.maxY=P},n.prototype.addBounds=function(r){var t=this.minX,e=this.minY,i=this.maxX,o=this.maxY;this.minX=r.minX<t?r.minX:t,this.minY=r.minY<e?r.minY:e,this.maxX=r.maxX>i?r.maxX:i,this.maxY=r.maxY>o?r.maxY:o},n.prototype.addBoundsMask=function(r,t){var e=r.minX>t.minX?r.minX:t.minX,i=r.minY>t.minY?r.minY:t.minY,o=r.maxX<t.maxX?r.maxX:t.maxX,a=r.maxY<t.maxY?r.maxY:t.maxY;if(e<=o&&i<=a){var s=this.minX,u=this.minY,h=this.maxX,c=this.maxY;this.minX=e<s?e:s,this.minY=i<u?i:u,this.maxX=o>h?o:h,this.maxY=a>c?a:c}},n.prototype.addBoundsMatrix=function(r,t){this.addFrameMatrix(t,r.minX,r.minY,r.maxX,r.maxY)},n.prototype.addBoundsArea=function(r,t){var e=r.minX>t.x?r.minX:t.x,i=r.minY>t.y?r.minY:t.y,o=r.maxX<t.x+t.width?r.maxX:t.x+t.width,a=r.maxY<t.y+t.height?r.maxY:t.y+t.height;if(e<=o&&i<=a){var s=this.minX,u=this.minY,h=this.maxX,c=this.maxY;this.minX=e<s?e:s,this.minY=i<u?i:u,this.maxX=o>h?o:h,this.maxY=a>c?a:c}},n.prototype.pad=function(r,t){void 0===r&&(r=0),void 0===t&&(t=r),this.isEmpty()||(this.minX-=r,this.maxX+=r,this.minY-=t,this.maxY+=t)},n.prototype.addFramePad=function(r,t,e,i,o,a){t-=a,e+=o,i+=a,this.minX=this.minX<(r-=o)?this.minX:r,this.maxX=this.maxX>e?this.maxX:e,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>i?this.maxY:i},n}(),Ni=function(n,r){return(Ni=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)};function Bi(n,r){function t(){this.constructor=n}Ni(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}var Jt=function(n){function r(){var t=n.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new Li,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new Nr,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return Bi(r,n),r.mixin=function(t){for(var e=Object.keys(t),i=0;i<e.length;++i){var o=e[i];Object.defineProperty(r.prototype,o,Object.getOwnPropertyDescriptor(t,o))}},r.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},r.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},r.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Ut),e=this._boundsRect),this._bounds.getRectangle(e)},r.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Ut),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Nr);var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var s=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=o,this._bounds.updateID+=this._boundsID-a,s},r.prototype.toGlobal=function(t,e,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},r.prototype.toLocal=function(t,e,i,o){return e&&(t=e.toGlobal(t,i,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},r.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},r.prototype.setTransform=function(t,e,i,o,a,s,u,h,c){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===o&&(o=1),void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=0),void 0===h&&(h=0),void 0===c&&(c=0),this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=o||1,this.rotation=a,this.skew.x=s,this.skew.y=u,this.pivot.x=h,this.pivot.y=c,this},r.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(r.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Ui),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),r.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},r.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(r.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"angle",{get:function(){return this.transform.rotation*ni},set:function(t){this.transform.rotation=t*hr},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),r}(O()),Ui=function(n){function r(){var t=null!==n&&n.apply(this,arguments)||this;return t.sortDirty=null,t}return Bi(r,n),r}(Jt);function qa(n,r){return n.zIndex===r.zIndex?n._lastSortedIndex-r._lastSortedIndex:n.zIndex-r.zIndex}Jt.prototype.displayObjectUpdateTransform=Jt.prototype.updateTransform;var ye=function(n){function r(){var t=n.call(this)||this;return t.children=[],t.sortableChildren=v.SORTABLE_CHILDREN,t.sortDirty=!1,t}return Bi(r,n),r.prototype.onChildrenChange=function(t){},r.prototype.addChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var o=0;o<e.length;o++)this.addChild(e[o]);else{var a=e[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return e[0]},r.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},r.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),o=this.getChildIndex(e);this.children[i]=e,this.children[o]=t,this.onChildrenChange(i<o?i:o)}},r.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},r.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);qt(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},r.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},r.prototype.removeChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var o=0;o<e.length;o++)this.removeChild(e[o]);else{var a=e[0],s=this.children.indexOf(a);if(-1===s)return null;a.parent=null,a.transform._parentID=-1,qt(this.children,s,1),this._boundsID++,this.onChildrenChange(s),a.emit("removed",this),this.emit("childRemoved",a,this,s)}return e[0]},r.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,qt(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},r.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var s,a=e-t;if(a>0&&a<=e){s=this.children.splice(t,a);for(var u=0;u<s.length;++u)s[u].parent=null,s[u].transform&&(s[u].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(t),u=0;u<s.length;++u)s[u].emit("removed",this),this.emit("childRemoved",s[u],this,u);return s}if(0===a&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},r.prototype.sortChildren=function(){for(var t=!1,e=0,i=this.children.length;e<i;++e){var o=this.children[e];o._lastSortedIndex=e,!t&&0!==o.zIndex&&(t=!0)}t&&this.children.length>1&&this.children.sort(qa),this.sortDirty=!1},r.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},r.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var i=e._mask.maskObject||e._mask;i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},r.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);var i=n.prototype.getLocalBounds.call(this,t);if(!e)for(var o=0,a=this.children.length;o<a;++o){var s=this.children[o];s.visible&&s.updateTransform()}return i},r.prototype._calculateBounds=function(){},r.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}},r.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<e.length;o++)e[o].enabled&&this._enabledFilters.push(e[o]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}i&&t.mask.push(this,this._mask),this._render(t),o=0;for(var a=this.children.length;o<a;o++)this.children[o].render(t);t.batch.flush(),i&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},r.prototype._render=function(t){},r.prototype.destroy=function(t){n.prototype.destroy.call(this),this.sortDirty=!1;var e="boolean"==typeof t?t:t&&t.children,i=this.removeChildren(0,this.children.length);if(e)for(var o=0;o<i.length;++o)i[o].destroy(t)},Object.defineProperty(r.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),r}(Jt);ye.prototype.containerUpdateTransform=ye.prototype.updateTransform;var Kn={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Jt.mixin(Kn);var Jn=function(){function n(r){this._hookDiv=null,(V.tablet||V.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex=2..toString(),this.div=t,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=r,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(n.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),n.prototype.createTouchHook=function(){var r=this,t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2..toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessability for this content",t.addEventListener("focus",function(){r._isMobileAccessibility=!0,r.activate(),r.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t},n.prototype.destroyTouchHook=function(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)},n.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},n.prototype.deactivate=function(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},n.prototype.updateAccessibleObjects=function(r){if(r.visible&&r.accessibleChildren){r.accessible&&r.interactive&&(r._accessibleActive||this.addChild(r),r.renderId=this.renderId);for(var t=r.children,e=0;e<t.length;e++)this.updateAccessibleObjects(t[e])}},n.prototype.update=function(){var r=performance.now();if(!(V.android.device&&r<this.androidUpdateCount)&&(this.androidUpdateCount=r+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=this.renderer.resolution,i=t.width/this.renderer.width*e,o=t.height/this.renderer.height*e,a=this.div;a.style.left=t.left+"px",a.style.top=t.top+"px",a.style.width=this.renderer.width+"px",a.style.height=this.renderer.height+"px";for(var s=0;s<this.children.length;s++){var u=this.children[s];if(u.renderId!==this.renderId)u._accessibleActive=!1,qt(this.children,s,1),this.div.removeChild(u._accessibleDiv),this.pool.push(u._accessibleDiv),u._accessibleDiv=null,s--;else{a=u._accessibleDiv;var h=u.hitArea,c=u.worldTransform;u.hitArea?(a.style.left=(c.tx+h.x*c.a)*i+"px",a.style.top=(c.ty+h.y*c.d)*o+"px",a.style.width=h.width*c.a*i+"px",a.style.height=h.height*c.d*o+"px"):(h=u.getBounds(),this.capHitArea(h),a.style.left=h.x*i+"px",a.style.top=h.y*o+"px",a.style.width=h.width*i+"px",a.style.height=h.height*o+"px",a.title!==u.accessibleTitle&&null!==u.accessibleTitle&&(a.title=u.accessibleTitle),a.getAttribute("aria-label")!==u.accessibleHint&&null!==u.accessibleHint&&a.setAttribute("aria-label",u.accessibleHint)),(u.accessibleTitle!==a.title||u.tabIndex!==a.tabIndex)&&(a.title=u.accessibleTitle,a.tabIndex=u.tabIndex,this.debug&&this.updateDebugHTML(a))}}this.renderId++}},n.prototype.updateDebugHTML=function(r){r.innerHTML="type: "+r.type+"</br> title : "+r.title+"</br> tabIndex: "+r.tabIndex},n.prototype.capHitArea=function(r){r.x<0&&(r.width+=r.x,r.x=0),r.y<0&&(r.height+=r.y,r.y=0),r.x+r.width>this.renderer.width&&(r.width=this.renderer.width-r.x),r.y+r.height>this.renderer.height&&(r.height=this.renderer.height-r.y)},n.prototype.addChild=function(r){var t=this.pool.pop();t||((t=document.createElement("button")).style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=r.accessiblePointerEvents,t.type=r.accessibleType,r.accessibleTitle&&null!==r.accessibleTitle?t.title=r.accessibleTitle:(!r.accessibleHint||null===r.accessibleHint)&&(t.title="displayObject "+r.tabIndex),r.accessibleHint&&null!==r.accessibleHint&&t.setAttribute("aria-label",r.accessibleHint),this.debug&&this.updateDebugHTML(t),r._accessibleActive=!0,r._accessibleDiv=t,t.displayObject=r,this.children.push(r),this.div.appendChild(r._accessibleDiv),r._accessibleDiv.tabIndex=r.tabIndex},n.prototype._onClick=function(r){var t=this.renderer.plugins.interaction;t.dispatchEvent(r.target.displayObject,"click",t.eventData),t.dispatchEvent(r.target.displayObject,"pointertap",t.eventData),t.dispatchEvent(r.target.displayObject,"tap",t.eventData)},n.prototype._onFocus=function(r){r.target.getAttribute("aria-live")||r.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction;t.dispatchEvent(r.target.displayObject,"mouseover",t.eventData)},n.prototype._onFocusOut=function(r){r.target.getAttribute("aria-live")||r.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction;t.dispatchEvent(r.target.displayObject,"mouseout",t.eventData)},n.prototype._onKeyDown=function(r){9===r.keyCode&&this.activate()},n.prototype._onMouseMove=function(r){0===r.movementX&&0===r.movementY||this.deactivate()},n.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},n}();v.TARGET_FPMS=.06;var ge=(()=>{return(n=ge||(ge={}))[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",ge;var n})(),ki=function(){function n(r,t,e,i){void 0===t&&(t=null),void 0===e&&(e=0),void 0===i&&(i=!1),this.fn=r,this.context=t,this.priority=e,this.once=i,this.next=null,this.previous=null,this._destroyed=!1}return n.prototype.match=function(r,t){return void 0===t&&(t=null),this.fn===r&&this.context===t},n.prototype.emit=function(r){this.fn&&(this.context?this.fn.call(this.context,r):this.fn(r));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},n.prototype.connect=function(r){this.previous=r,r.next&&(r.next.previous=this),this.next=r.next,r.next=this},n.prototype.destroy=function(r){void 0===r&&(r=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=r?null:t,this.previous=null,t},n}(),re=function(){function n(){var r=this;this._head=new ki(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/v.TARGET_FPMS,this.elapsedMS=1/v.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(t){r._requestId=null,r.started&&(r.update(t),r.started&&null===r._requestId&&r._head.next&&(r._requestId=requestAnimationFrame(r._tick)))}}return n.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},n.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},n.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},n.prototype.add=function(r,t,e){return void 0===e&&(e=ge.NORMAL),this._addListener(new ki(r,t,e))},n.prototype.addOnce=function(r,t,e){return void 0===e&&(e=ge.NORMAL),this._addListener(new ki(r,t,e,!0))},n.prototype._addListener=function(r){var t=this._head.next,e=this._head;if(t){for(;t;){if(r.priority>t.priority){r.connect(e);break}e=t,t=t.next}r.previous||r.connect(e)}else r.connect(e);return this._startIfPossible(),this},n.prototype.remove=function(r,t){for(var e=this._head.next;e;)e=e.match(r,t)?e.destroy():e.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(n.prototype,"count",{get:function(){if(!this._head)return 0;for(var r=0,t=this._head;t=t.next;)r++;return r},enumerable:!1,configurable:!0}),n.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},n.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},n.prototype.destroy=function(){if(!this._protected){this.stop();for(var r=this._head.next;r;)r=r.destroy(!0);this._head.destroy(),this._head=null}},n.prototype.update=function(r){var t;if(void 0===r&&(r=performance.now()),r>this.lastTime){if((t=this.elapsedMS=r-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var e=r-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=r-e%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*v.TARGET_FPMS;for(var i=this._head,o=i.next;o;)o=o.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=r},Object.defineProperty(n.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(r){var t=Math.min(this.maxFPS,r),e=Math.min(Math.max(0,t)/1e3,v.TARGET_FPMS);this._maxElapsedMS=1/e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(r){if(0===r)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,r);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(n,"shared",{get:function(){if(!n._shared){var r=n._shared=new n;r.autoStart=!0,r._protected=!0}return n._shared},enumerable:!1,configurable:!0}),Object.defineProperty(n,"system",{get:function(){if(!n._system){var r=n._system=new n;r.autoStart=!0,r._protected=!0}return n._system},enumerable:!1,configurable:!0}),n}(),to=function(){function n(){}return n.init=function(r){var t=this;r=Object.assign({autoStart:!0,sharedTicker:!1},r),Object.defineProperty(this,"ticker",{set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,ge.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=r.sharedTicker?re.shared:new re,r.autoStart&&this.start()},n.destroy=function(){if(this._ticker){var r=this._ticker;this.ticker=null,r.destroy()}},n}(),Xi=function(){function n(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new ee,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(n.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),n.prototype.getLocalPosition=function(r,t,e){return r.worldTransform.applyInverse(e||this.global,t)},n.prototype.copyEvent=function(r){"isPrimary"in r&&r.isPrimary&&(this.isPrimary=!0),this.button="button"in r&&r.button;var t="buttons"in r&&r.buttons;this.buttons=Number.isInteger(t)?t:"which"in r&&r.which,this.width="width"in r&&r.width,this.height="height"in r&&r.height,this.tiltX="tiltX"in r&&r.tiltX,this.tiltY="tiltY"in r&&r.tiltY,this.pointerType="pointerType"in r&&r.pointerType,this.pressure="pressure"in r&&r.pressure,this.rotationAngle="rotationAngle"in r&&r.rotationAngle,this.twist="twist"in r&&r.twist||0,this.tangentialPressure="tangentialPressure"in r&&r.tangentialPressure||0},n.prototype.reset=function(){this.isPrimary=!1},n}(),Gi=function(n,r){return(Gi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)},eo=function(){function n(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return n.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},n.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},n}(),ui=function(){function n(r){this._pointerId=r,this._flags=n.FLAGS.NONE}return n.prototype._doSet=function(r,t){this._flags=t?this._flags|r:this._flags&~r},Object.defineProperty(n.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"flags",{get:function(){return this._flags},set:function(r){this._flags=r},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"none",{get:function(){return this._flags===n.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"over",{get:function(){return 0!=(this._flags&n.FLAGS.OVER)},set:function(r){this._doSet(n.FLAGS.OVER,r)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rightDown",{get:function(){return 0!=(this._flags&n.FLAGS.RIGHT_DOWN)},set:function(r){this._doSet(n.FLAGS.RIGHT_DOWN,r)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"leftDown",{get:function(){return 0!=(this._flags&n.FLAGS.LEFT_DOWN)},set:function(r){this._doSet(n.FLAGS.LEFT_DOWN,r)},enumerable:!1,configurable:!0}),n.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),n}(),os=function(){function n(){this._tempPoint=new ee}return n.prototype.recursiveFindHit=function(r,t,e,i,o){if(!t||!t.visible)return!1;var a=r.data.global,s=!1,u=o=t.interactive||o,h=!0;if(t.hitArea?(i&&(t.worldTransform.applyInverse(a,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(i=!1,h=!1)),u=!1):t._mask&&i&&(t._mask.containsPoint&&t._mask.containsPoint(a)||(i=!1)),h&&t.interactiveChildren&&t.children)for(var c=t.children,f=c.length-1;f>=0;f--){var l=c[f],d=this.recursiveFindHit(r,l,e,i,u);if(d){if(!l.parent)continue;u=!1,d&&(r.target&&(i=!1),s=!0)}}return o&&(i&&!r.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(a)&&(s=!0),t.interactive&&(s&&!r.target&&(r.target=t),e&&e(r,t,!!s))),s},n.prototype.findHit=function(r,t,e,i){this.recursiveFindHit(r,t,e,i,!1)},n}(),ro={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(n){n?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Jt.mixin(ro);var li={target:null,data:{global:null}},io=function(n){function r(t,e){var i=n.call(this)||this;return e=e||{},i.renderer=t,i.autoPreventDefault=void 0===e.autoPreventDefault||e.autoPreventDefault,i.interactionFrequency=e.interactionFrequency||10,i.mouse=new Xi,i.mouse.identifier=1,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[1]=i.mouse,i.interactionDataPool=[],i.eventData=new eo,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!1,i.supportsTouchEvents="ontouchstart"in window,i.supportsPointerEvents=!!window.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new os,i._tempDisplayObject=new Ui,i._useSystemTicker=void 0===e.useSystemTicker||e.useSystemTicker,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return function ns(n,r){function t(){this.constructor=n}Gi(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}(r,n),Object.defineProperty(r.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),r.prototype.hitTest=function(t,e){return li.target=null,li.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(li,e,null,!0),li.target},r.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},r.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(re.system.add(this.tickerUpdate,this,ge.INTERACTION),this.tickerAdded=!0)},r.prototype.removeTickerListener=function(){!this.tickerAdded||(re.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},r.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},r.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},r.prototype.tickerUpdate=function(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},r.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove)return void(this._didMove=!1);for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},r.prototype.setCursorMode=function(t){if(this.currentCursorMode!==(t=t||"default")){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(typeof e){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},r.prototype.dispatchEvent=function(t,e,i){(!i.stopPropagationHint||t===i.stopsPropagatingAt)&&(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},r.prototype.delayDispatchEvent=function(t,e,i){this.delayedEvents.push({displayObject:t,eventString:e,eventData:i})},r.prototype.mapPositionToPoint=function(t,e,i){var o;o=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var a=1/this.resolution;t.x=this.interactionDOMElement.width/o.width*(e-o.left)*a,t.y=this.interactionDOMElement.height/o.height*(i-o.top)*a},r.prototype.processInteractive=function(t,e,i,o){var a=this.search.findHit(t,e,i,o),s=this.delayedEvents;if(!s.length)return a;t.stopPropagationHint=!1;var u=s.length;this.delayedEvents=[];for(var h=0;h<u;h++){var c=s[h],f=c.displayObject,l=c.eventString,d=c.eventData;d.stopsPropagatingAt===f&&(d.stopPropagationHint=!0),this.dispatchEvent(f,l,d)}return a},r.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var o=e.length,a=0;a<o;a++){var s=e[a],u=this.getInteractionDataForPointerId(s),h=this.configureInteractionEventForDOMEvent(this.eventData,s,u);h.data.originalEvent=t,this.processInteractive(h,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",h),"touch"===s.pointerType?this.emit("touchstart",h):"mouse"!==s.pointerType&&"pen"!==s.pointerType||this.emit(2===s.button?"rightdown":"mousedown",this.eventData)}}},r.prototype.processPointerDown=function(t,e,i){var o=t.data,a=t.data.identifier;if(i)if(e.trackedPointers[a]||(e.trackedPointers[a]=new ui(a)),this.dispatchEvent(e,"pointerdown",t),"touch"===o.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===o.pointerType||"pen"===o.pointerType){var s=2===o.button;s?e.trackedPointers[a].rightDown=!0:e.trackedPointers[a].leftDown=!0,this.dispatchEvent(e,s?"rightdown":"mousedown",t)}},r.prototype.onPointerComplete=function(t,e,i){for(var o=this.normalizeToPointerData(t),a=o.length,s=t.target!==this.interactionDOMElement?"outside":"",u=0;u<a;u++){var h=o[u],c=this.getInteractionDataForPointerId(h),f=this.configureInteractionEventForDOMEvent(this.eventData,h,c);f.data.originalEvent=t,this.processInteractive(f,this.lastObjectRendered,i,e||!s),this.emit(e?"pointercancel":"pointerup"+s,f),"mouse"===h.pointerType||"pen"===h.pointerType?this.emit(2===h.button?"rightup"+s:"mouseup"+s,f):"touch"===h.pointerType&&(this.emit(e?"touchcancel":"touchend"+s,f),this.releaseInteractionDataForPointerId(h.pointerId))}},r.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},r.prototype.processPointerCancel=function(t,e){var i=t.data,o=t.data.identifier;void 0!==e.trackedPointers[o]&&(delete e.trackedPointers[o],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},r.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},r.prototype.processPointerUp=function(t,e,i){var o=t.data,a=t.data.identifier,s=e.trackedPointers[a],u="touch"===o.pointerType,h="mouse"===o.pointerType||"pen"===o.pointerType,c=!1;if(h){var f=2===o.button,l=ui.FLAGS,m=void 0!==s&&s.flags&(f?l.RIGHT_DOWN:l.LEFT_DOWN);i?(this.dispatchEvent(e,f?"rightup":"mouseup",t),m&&(this.dispatchEvent(e,f?"rightclick":"click",t),c=!0)):m&&this.dispatchEvent(e,f?"rightupoutside":"mouseupoutside",t),s&&(f?s.rightDown=!1:s.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),u&&this.dispatchEvent(e,"touchend",t),s&&((!h||c)&&this.dispatchEvent(e,"pointertap",t),u&&(this.dispatchEvent(e,"tap",t),s.over=!1))):s&&(this.dispatchEvent(e,"pointerupoutside",t),u&&this.dispatchEvent(e,"touchendoutside",t)),s&&s.none&&delete e.trackedPointers[a]},r.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);("mouse"===e[0].pointerType||"pen"===e[0].pointerType)&&(this._didMove=!0,this.cursor=null);for(var i=e.length,o=0;o<i;o++){var a=e[o],s=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,s);u.data.originalEvent=t,this.processInteractive(u,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",u),"touch"===a.pointerType&&this.emit("touchmove",u),("mouse"===a.pointerType||"pen"===a.pointerType)&&this.emit("mousemove",u)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},r.prototype.processPointerMove=function(t,e,i){var o=t.data,a="touch"===o.pointerType,s="mouse"===o.pointerType||"pen"===o.pointerType;s&&this.processPointerOverOut(t,e,i),(!this.moveWhenInside||i)&&(this.dispatchEvent(e,"pointermove",t),a&&this.dispatchEvent(e,"touchmove",t),s&&this.dispatchEvent(e,"mousemove",t))},r.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var i=this.normalizeToPointerData(t)[0];"mouse"===i.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=i,this.processInteractive(a,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",a),"mouse"===i.pointerType||"pen"===i.pointerType?this.emit("mouseout",a):this.releaseInteractionDataForPointerId(o.identifier)}},r.prototype.processPointerOverOut=function(t,e,i){var o=t.data,a=t.data.identifier,s="mouse"===o.pointerType||"pen"===o.pointerType,u=e.trackedPointers[a];i&&!u&&(u=e.trackedPointers[a]=new ui(a)),void 0!==u&&(i&&this.mouseOverRenderer?(u.over||(u.over=!0,this.delayDispatchEvent(e,"pointerover",t),s&&this.delayDispatchEvent(e,"mouseover",t)),s&&null===this.cursor&&(this.cursor=e.cursor)):u.over&&(u.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),s&&this.dispatchEvent(e,"mouseout",t),u.none&&delete e.trackedPointers[a]))},r.prototype.onPointerOver=function(t){var i=this.normalizeToPointerData(t)[0],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=i,"mouse"===i.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",a),("mouse"===i.pointerType||"pen"===i.pointerType)&&this.emit("mouseover",a)},r.prototype.getInteractionDataForPointerId=function(t){var i,e=t.pointerId;return 1===e||"mouse"===t.pointerType?i=this.mouse:this.activeInteractionData[e]?i=this.activeInteractionData[e]:((i=this.interactionDataPool.pop()||new Xi).identifier=e,this.activeInteractionData[e]=i),i.copyEvent(t),i},r.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},r.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},r.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,o=t.changedTouches.length;i<o;i++){var a=t.changedTouches[i];void 0===a.button&&(a.button=t.touches.length?1:0),void 0===a.buttons&&(a.buttons=t.touches.length?1:0),void 0===a.isPrimary&&(a.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===a.width&&(a.width=a.radiusX||1),void 0===a.height&&(a.height=a.radiusY||1),void 0===a.tiltX&&(a.tiltX=0),void 0===a.tiltY&&(a.tiltY=0),void 0===a.pointerType&&(a.pointerType="touch"),void 0===a.pointerId&&(a.pointerId=a.identifier||0),void 0===a.pressure&&(a.pressure=a.force||.5),void 0===a.twist&&(a.twist=0),void 0===a.tangentialPressure&&(a.tangentialPressure=0),void 0===a.layerX&&(a.layerX=a.offsetX=a.clientX),void 0===a.layerY&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,e.push(a)}else if(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent)e.push(t);else{var s=t;void 0===s.isPrimary&&(s.isPrimary=!0),void 0===s.width&&(s.width=1),void 0===s.height&&(s.height=1),void 0===s.tiltX&&(s.tiltX=0),void 0===s.tiltY&&(s.tiltY=0),void 0===s.pointerType&&(s.pointerType="mouse"),void 0===s.pointerId&&(s.pointerId=1),void 0===s.pressure&&(s.pressure=.5),void 0===s.twist&&(s.twist=0),void 0===s.tangentialPressure&&(s.tangentialPressure=0),s.isNormalized=!0,e.push(s)}return e},r.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},r}(O()),ae=function(){function n(r){this.items=[],this._name=r,this._aliasCount=0}return n.prototype.emit=function(r,t,e,i,o,a,s,u){if(arguments.length>8)throw new Error("max arguments reached");var h=this,c=h.name,f=h.items;this._aliasCount++;for(var l=0,d=f.length;l<d;l++)f[l][c](r,t,e,i,o,a,s,u);return f===this.items&&this._aliasCount--,this},n.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},n.prototype.add=function(r){return r[this._name]&&(this.ensureNonAliasedItems(),this.remove(r),this.items.push(r)),this},n.prototype.remove=function(r){var t=this.items.indexOf(r);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},n.prototype.contains=function(r){return-1!==this.items.indexOf(r)},n.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},n.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(n.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),n}();Object.defineProperties(ae.prototype,{dispatch:{value:ae.prototype.emit},run:{value:ae.prototype.emit}}),v.PREFER_ENV=V.any?N.WEBGL:N.WEBGL2,v.STRICT_TEXTURE_CACHE=!1;var fi=[];function Hi(n,r){if(!n)return null;var t="";if("string"==typeof n){var e=/\.(\w{3,4})(?:$|\?|#)/i.exec(n);e&&(t=e[1].toLowerCase())}for(var i=fi.length-1;i>=0;--i){var o=fi[i];if(o.test&&o.test(n,t))return new o(n,r)}throw new Error("Unrecognized source type to auto-detect Resource")}var Yi=function(n,r){return(Yi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)};function Nt(n,r){function t(){this.constructor=n}Yi(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}var fr=function(){function n(r,t){void 0===r&&(r=0),void 0===t&&(t=0),this._width=r,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new ae("setRealSize"),this.onUpdate=new ae("update"),this.onError=new ae("onError")}return n.prototype.bind=function(r){this.onResize.add(r),this.onUpdate.add(r),this.onError.add(r),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},n.prototype.unbind=function(r){this.onResize.remove(r),this.onUpdate.remove(r),this.onError.remove(r)},n.prototype.resize=function(r,t){(r!==this._width||t!==this._height)&&(this._width=r,this._height=t,this.onResize.emit(r,t))},Object.defineProperty(n.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),n.prototype.update=function(){this.destroyed||this.onUpdate.emit()},n.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),n.prototype.style=function(r,t,e){return!1},n.prototype.dispose=function(){},n.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},n.test=function(r,t){return!1},n}(),ci=function(n){function r(t,e){var i=this,o=e||{},a=o.width,s=o.height;if(!a||!s)throw new Error("BufferResource width or height invalid");return(i=n.call(this,a,s)||this).data=t,i}return Nt(r,n),r.prototype.upload=function(t,e,i){var o=t.gl;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Lt.UNPACK),i.width===e.width&&i.height===e.height?o.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(i.width=e.width,i.height=e.height,o.texImage2D(e.target,0,i.internalFormat,e.width,e.height,0,e.format,i.type,this.data)),!0},r.prototype.dispose=function(){this.data=null},r.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},r}(fr),as={scaleMode:It.NEAREST,format:M.RGBA,alphaMode:Lt.NPM},Wt=function(n){function r(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=n.call(this)||this,o=(e=e||{}).alphaMode,a=e.mipmap,s=e.anisotropicLevel,u=e.scaleMode,h=e.width,c=e.height,f=e.wrapMode,l=e.format,d=e.type,m=e.target,y=e.resolution;return t&&!(t instanceof fr)&&((t=Hi(t,e.resourceOptions)).internal=!0),i.width=h||0,i.height=c||0,i.resolution=y||v.RESOLUTION,i.mipmap=void 0!==a?a:v.MIPMAP_TEXTURES,i.anisotropicLevel=void 0!==s?s:v.ANISOTROPIC_LEVEL,i.wrapMode=f||v.WRAP_MODE,i.scaleMode=void 0!==u?u:v.SCALE_MODE,i.format=l||M.RGBA,i.type=d||at.UNSIGNED_BYTE,i.target=m||J.TEXTURE_2D,i.alphaMode=void 0!==o?o:Lt.UNPACK,void 0!==e.premultiplyAlpha&&(i.premultiplyAlpha=e.premultiplyAlpha),i.uid=le(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=h>0&&c>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(t),i}return Nt(r,n),Object.defineProperty(r.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),r.prototype.setStyle=function(t,e){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this},r.prototype.setSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},r.prototype.setRealSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},r.prototype._refreshPOT=function(){this.isPowerOfTwo=de(this.realWidth)&&de(this.realHeight)},r.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},r.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},r.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},r.prototype.onError=function(t){this.emit("error",this,t)},r.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete te[this.cacheId],delete oe[this.cacheId],this.cacheId=null),this.dispose(),r.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},r.prototype.dispose=function(){this.emit("dispose",this)},r.prototype.castToBaseTexture=function(){return this},r.from=function(t,e,i){void 0===i&&(i=v.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;o?a=t:(t._pixiId||(t._pixiId="pixiid_"+le()),a=t._pixiId);var s=te[a];if(o&&i&&!s)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return s||((s=new r(t,e)).cacheId=a,r.addToCache(s,a)),s},r.fromBuffer=function(t,e,i,o){t=t||new Float32Array(e*i*4);var a=new ci(t,{width:e,height:i}),s=t instanceof Float32Array?at.FLOAT:at.UNSIGNED_BYTE;return new r(a,Object.assign(as,o||{width:e,height:i,type:s}))},r.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),te[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),te[e]=t)},r.removeFromCache=function(t){if("string"==typeof t){var e=te[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete te[t],e}}else if(t&&t.textureCacheIds){for(var o=0;o<t.textureCacheIds.length;++o)delete te[t.textureCacheIds[o]];return t.textureCacheIds.length=0,t}return null},r._globalBatch=0,r}(O()),ji=function(n){function r(t,e){var i=this,o=e||{};(i=n.call(this,o.width,o.height)||this).items=[],i.itemDirtyIds=[];for(var u=0;u<t;u++){var h=new Wt;i.items.push(h),i.itemDirtyIds.push(-2)}return i.length=t,i._load=null,i.baseTexture=null,i}return Nt(r,n),r.prototype.initFromArray=function(t,e){for(var i=0;i<this.length;i++)!t[i]||(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):this.addResourceAt(t[i]instanceof fr?t[i]:Hi(t[i],e),i))},r.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},r.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},r.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");n.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},r.prototype.unbind=function(t){n.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},r.prototype.load=function(){var t=this;if(this._load)return this._load;var i=this.items.map(function(o){return o.resource}).filter(function(o){return o}).map(function(o){return o.load()});return this._load=Promise.all(i).then(function(){var o=t.items[0];return t.resize(o.realWidth,o.realHeight),Promise.resolve(t)}),this._load},r}(fr),no=function(n){function r(t,e){var u,h,i=this,o=e||{},a=o.width,s=o.height;return Array.isArray(t)?(u=t,h=t.length):h=t,i=n.call(this,h,{width:a,height:s})||this,u&&i.initFromArray(u,e),i}return Nt(r,n),r.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},r.prototype.bind=function(t){n.prototype.bind.call(this,t),t.target=J.TEXTURE_2D_ARRAY},r.prototype.upload=function(t,e,i){var o=this,a=o.length,s=o.itemDirtyIds,u=o.items,h=t.gl;i.dirtyId<0&&h.texImage3D(h.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,a,0,e.format,e.type,null);for(var c=0;c<a;c++){var f=u[c];s[c]<f.dirtyId&&(s[c]=f.dirtyId,f.valid&&h.texSubImage3D(h.TEXTURE_2D_ARRAY,0,0,0,c,f.resource.width,f.resource.height,1,e.format,e.type,f.resource.source))}return!0},r}(ji),Ae=function(n){function r(t){var e=this;return(e=n.call(this,t.naturalWidth||t.videoWidth||t.width,t.naturalHeight||t.videoHeight||t.height)||this).source=t,e.noSubImage=!1,e}return Nt(r,n),r.crossOrigin=function(t,e,i){void 0===i&&0!==e.indexOf("data:")?t.crossOrigin=Fr(e):!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous")},r.prototype.upload=function(t,e,i,o){var a=t.gl,s=e.realWidth,u=e.realHeight;return o=o||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Lt.UNPACK),this.noSubImage||e.target!==a.TEXTURE_2D||i.width!==s||i.height!==u?(i.width=s,i.height=u,a.texImage2D(e.target,0,e.format,e.format,e.type,o)):a.texSubImage2D(a.TEXTURE_2D,0,0,0,e.format,e.type,o),!0},r.prototype.update=function(){if(!this.destroyed){var t=this.source;this.resize(t.naturalWidth||t.videoWidth||t.width,t.naturalHeight||t.videoHeight||t.height),n.prototype.update.call(this)}},r.prototype.dispose=function(){this.source=null},r}(fr),zi=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return Nt(r,n),r.test=function(t){var e=window.OffscreenCanvas;return!!(e&&t instanceof e)||t instanceof HTMLCanvasElement},r}(Ae),oo=function(n){function r(t,e){var i=this,o=e||{},a=o.width,s=o.height,u=o.autoLoad,h=o.linkBaseTexture;if(t&&t.length!==r.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");i=n.call(this,6,{width:a,height:s})||this;for(var c=0;c<r.SIDES;c++)i.items[c].target=J.TEXTURE_CUBE_MAP_POSITIVE_X+c;return i.linkBaseTexture=!1!==h,t&&i.initFromArray(t,e),!1!==u&&i.load(),i}return Nt(r,n),r.prototype.bind=function(t){n.prototype.bind.call(this,t),t.target=J.TEXTURE_CUBE_MAP},r.prototype.addBaseTextureAt=function(t,e,i){if(void 0===i&&(i=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=J.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},r.prototype.upload=function(t,e,i){for(var o=this.itemDirtyIds,a=0;a<r.SIDES;a++){var s=this.items[a];o[a]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,i),o[a]=s.dirtyId):o[a]<-1&&(t.gl.texImage2D(s.target,0,i.internalFormat,e.realWidth,e.realHeight,0,e.format,i.type,null),o[a]=-1))}return!0},r.test=function(t){return Array.isArray(t)&&t.length===r.SIDES},r.SIDES=6,r}(ji),Vi=function(n){function r(t,e){var i=this;if(e=e||{},!(t instanceof HTMLImageElement)){var o=new Image;Ae.crossOrigin(o,t,e.crossorigin),o.src=t,t=o}return i=n.call(this,t)||this,!t.complete&&!!i._width&&!!i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==e.createBitmap?e.createBitmap:v.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,i.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,void 0!==e.premultiplyAlpha&&(i.premultiplyAlpha=e.premultiplyAlpha),i.bitmap=null,i._load=null,!1!==e.autoLoad&&i.load(),i}return Nt(r,n),r.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(i,o){var a=e.source;e.url=a.src;var s=function(){e.destroyed||(a.onload=null,a.onerror=null,e.resize(a.width,a.height),e._load=null,i(e.createBitmap?e.process():e))};a.complete&&a.src?s():(a.onload=s,a.onerror=function(u){o(u),e.onError.emit(u)})})),this._load},r.prototype.process=function(){var t=this,e=this.source;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(e,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===Lt.UNPACK?"premultiply":"none"}).then(function(i){return t.destroyed?Promise.reject():(t.bitmap=i,t.update(),t._process=null,Promise.resolve(t))}),this._process):Promise.resolve(this)},r.prototype.upload=function(t,e,i){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return n.prototype.upload.call(this,t,e,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(n.prototype.upload.call(this,t,e,i,this.bitmap),!this.preserveBitmap){var o=!0,a=e._glTextures;for(var s in a){var u=a[s];if(u!==i&&u.dirtyId!==e.dirtyId){o=!1;break}}o&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},r.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,n.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},r.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},r}(Ae),ao=function(n){function r(t,e){var i=this;return e=e||{},(i=n.call(this,document.createElement("canvas"))||this)._width=0,i._height=0,i.svg=t,i.scale=e.scale||1,i._overrideWidth=e.width,i._overrideHeight=e.height,i._resolve=null,i._crossorigin=e.crossorigin,i._load=null,!1!==e.autoLoad&&i.load(),i}return Nt(r,n),r.prototype.load=function(){var t=this;return this._load||(this._load=new Promise(function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()})),this._load},r.prototype._loadSvg=function(){var t=this,e=new Image;Ae.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(i){!t._resolve||(e.onerror=null,t.onError.emit(i))},e.onload=function(){if(t._resolve){var i=e.width,o=e.height;if(!i||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=i*t.scale,s=o*t.scale;(t._overrideWidth||t._overrideHeight)&&(a=t._overrideWidth||t._overrideHeight/o*i,s=t._overrideHeight||t._overrideWidth/i*o),a=Math.round(a),s=Math.round(s);var u=t.source;u.width=a,u.height=s,u._pixiId="canvas_"+le(),u.getContext("2d").drawImage(e,0,0,i,o,0,0,a,s),t._resolve(),t._resolve=null}}},r.getSize=function(t){var e=r.SVG_SIZE.exec(t),i={};return e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7]))),i},r.prototype.dispose=function(){n.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},r.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},r.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,r}(Ae),so=function(n){function r(t,e){var i=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof t&&(t=[t]),Ae.crossOrigin(o,t[0].src||t[0],e.crossorigin);for(var s=0;s<t.length;++s){var u=document.createElement("source"),h=t[s],c=h.src,f=h.mime,l=(c=c||t[s]).split("?").shift().toLowerCase(),d=l.substr(l.lastIndexOf(".")+1);f=f||r.MIME_TYPES[d]||"video/"+d,u.src=c,u.type=f,o.appendChild(u)}t=o}return(i=n.call(this,t)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=e.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==e.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==e.autoLoad&&i.load(),i}return Nt(r,n),r.prototype.update=function(t){void 0===t&&(t=0),this.destroyed||(this._msToNextUpdate=Math.floor(this._msToNextUpdate-re.shared.elapsedMS*this.source.playbackRate),(!this._updateFPS||this._msToNextUpdate<=0)&&(n.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},r.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(function(i){t.valid?i(t):(t._resolve=i,e.load())}),this._load},r.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},r.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},r.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},r.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(re.shared.add(this.update,this),this._isConnectedToTicker=!0)},r.prototype._onPlayStop=function(){this._isConnectedToTicker&&(re.shared.remove(this.update,this),this._isConnectedToTicker=!1)},r.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},r.prototype.dispose=function(){this._isConnectedToTicker&&re.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),n.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(re.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(re.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),r.test=function(t,e){return t instanceof HTMLVideoElement||r.TYPES.indexOf(e)>-1},r.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],r.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},r}(Ae),uo=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return Nt(r,n),r.test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},r}(Ae);fi.push(Vi,uo,zi,so,ao,ci,oo,no);var ss={Resource:fr,BaseImageResource:Ae,INSTALLED:fi,autoDetectResource:Hi,AbstractMultiResource:ji,ArrayResource:no,BufferResource:ci,CanvasResource:zi,CubeResource:oo,ImageResource:Vi,SVGResource:ao,VideoResource:so,ImageBitmapResource:uo},ce=function(){function n(r){this.renderer=r}return n.prototype.destroy=function(){this.renderer=null},n}(),us=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return Nt(r,n),r.prototype.upload=function(t,e,i){var o=t.gl;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Lt.UNPACK),i.width===e.width&&i.height===e.height?o.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(i.width=e.width,i.height=e.height,o.texImage2D(e.target,0,1===t.context.webGLVersion?o.DEPTH_COMPONENT:o.DEPTH_COMPONENT16,e.width,e.height,0,e.format,e.type,this.data)),!0},r}(ci),di=function(){function n(r,t){this.width=Math.ceil(r||100),this.height=Math.ceil(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new ae("disposeFramebuffer"),this.multisample=se.NONE}return Object.defineProperty(n.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),n.prototype.addColorTexture=function(r,t){return void 0===r&&(r=0),this.colorTextures[r]=t||new Wt(null,{scaleMode:It.NEAREST,resolution:1,mipmap:Dt.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},n.prototype.addDepthTexture=function(r){return this.depthTexture=r||new Wt(new us(null,{width:this.width,height:this.height}),{scaleMode:It.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Dt.OFF,format:M.DEPTH_COMPONENT,type:at.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},n.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},n.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},n.prototype.resize=function(r,t){if(r=Math.ceil(r),t=Math.ceil(t),r!==this.width||t!==this.height){this.width=r,this.height=t,this.dirtyId++,this.dirtySize++;for(var e=0;e<this.colorTextures.length;e++){var i=this.colorTextures[e];i.setSize(r/(o=i.resolution),t/o)}var o;this.depthTexture&&this.depthTexture.setSize(r/(o=this.depthTexture.resolution),t/o)}},n.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},n.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},n}(),Br=function(n){function r(t){var e=this;if("number"==typeof t){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];t={width:i,height:o,scaleMode:a,resolution:s}}e=n.call(this,null,t)||this;var u=t||{},h=u.width,c=u.height;return e.mipmap=0,e.width=Math.ceil(h)||100,e.height=Math.ceil(c)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new di(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}return Nt(r,n),r.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},r.prototype.dispose=function(){this.framebuffer.dispose(),n.prototype.dispose.call(this)},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},r}(Wt),Wi=function(){function n(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return n.prototype.set=function(r,t,e){var i=t.width,o=t.height;if(e){var a=r.width/2/i,s=r.height/2/o,u=r.x/i+a,h=r.y/o+s;e=$t.add(e,$t.NW),this.x0=u+a*$t.uX(e),this.y0=h+s*$t.uY(e),e=$t.add(e,2),this.x1=u+a*$t.uX(e),this.y1=h+s*$t.uY(e),e=$t.add(e,2),this.x2=u+a*$t.uX(e),this.y2=h+s*$t.uY(e),e=$t.add(e,2),this.x3=u+a*$t.uX(e),this.y3=h+s*$t.uY(e)}else this.x0=r.x/i,this.y0=r.y/o,this.x1=(r.x+r.width)/i,this.y1=r.y/o,this.x2=(r.x+r.width)/i,this.y2=(r.y+r.height)/o,this.x3=r.x/i,this.y3=(r.y+r.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},n}(),ho=new Wi,Rt=function(n){function r(t,e,i,o,a,s){var u=n.call(this)||this;if(u.noFrame=!1,e||(u.noFrame=!0,e=new Ut(0,0,1,1)),t instanceof r&&(t=t.baseTexture),u.baseTexture=t,u._frame=e,u.trim=o,u.valid=!1,u._uvs=ho,u.uvMatrix=null,u.orig=i||e,u._rotate=Number(a||0),!0===a)u._rotate=2;else if(u._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return u.defaultAnchor=s?new ee(s.x,s.y):new ee(0,0),u._updateID=0,u.textureCacheIds=[],t.valid?u.noFrame?t.valid&&u.onBaseTextureUpdated(t):u.frame=e:t.once("loaded",u.onBaseTextureUpdated,u),u.noFrame&&t.on("update",u.onBaseTextureUpdated,u),u}return Nt(r,n),r.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},r.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},r.prototype.destroy=function(t){if(this.baseTexture){if(t){var e=this.baseTexture;e&&e.url&&oe[e.url]&&r.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,r.removeFromCache(this),this.textureCacheIds=null},r.prototype.clone=function(){return new r(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},r.prototype.updateUvs=function(){this._uvs===ho&&(this._uvs=new Wi),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},r.from=function(t,e,i){void 0===e&&(e={}),void 0===i&&(i=v.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;o?a=t:(t._pixiId||(t._pixiId="pixiid_"+le()),a=t._pixiId);var s=oe[a];if(o&&i&&!s)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=Pe(t)),(s=new r(new Wt(t,e))).baseTexture.cacheId=a,Wt.addToCache(s.baseTexture,a),r.addToCache(s,a)),s},r.fromURL=function(t,e){var i=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),o=r.from(t,Object.assign({resourceOptions:i},e),!1),a=o.baseTexture.resource;return o.baseTexture.valid?Promise.resolve(o):a.load().then(function(){return Promise.resolve(o)})},r.fromBuffer=function(t,e,i,o){return new r(Wt.fromBuffer(t,e,i,o))},r.fromLoader=function(t,e,i){var o=new Vi(t);o.url=e;var s=new r(new Wt(o,{scaleMode:v.SCALE_MODE,resolution:Pe(e)}));return i||(i=e),Wt.addToCache(s.baseTexture,i),r.addToCache(s,i),i!==e&&(Wt.addToCache(s.baseTexture,e),r.addToCache(s,e)),s},r.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),oe[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),oe[e]=t)},r.removeFromCache=function(t){if("string"==typeof t){var e=oe[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete oe[t],e}}else if(t&&t.textureCacheIds){for(var o=0;o<t.textureCacheIds.length;++o)oe[t.textureCacheIds[o]]===t&&delete oe[t.textureCacheIds[o]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(r.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,o=t.width,a=t.height,s=e+o>this.baseTexture.width,u=i+a>this.baseTexture.height;if(s||u)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: X: "+e+" + "+o+" = "+(e+o)+" > "+this.baseTexture.width+" "+(s&&u?"and":"or")+" Y: "+i+" + "+a+" = "+(i+a)+" > "+this.baseTexture.height);this.valid=o&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),r.prototype.castToBaseTexture=function(){return this.baseTexture},r}(O());function pi(n){n.destroy=function(){},n.on=function(){},n.once=function(){},n.emit=function(){}}Rt.EMPTY=new Rt(new Wt),pi(Rt.EMPTY),pi(Rt.EMPTY.baseTexture),Rt.WHITE=function hs(){var n=document.createElement("canvas");n.width=16,n.height=16;var r=n.getContext("2d");return r.fillStyle="white",r.fillRect(0,0,16,16),new Rt(new Wt(new zi(n)))}(),pi(Rt.WHITE),pi(Rt.WHITE.baseTexture);var Ke=function(n){function r(t,e){var i=this,o=null;if(!(t instanceof Br)){var a=arguments[1],s=arguments[2],u=arguments[3],h=arguments[4];console.warn("Please use RenderTexture.create("+a+", "+s+") instead of the ctor directly."),o=arguments[0],e=null,t=new Br({width:a,height:s,scaleMode:u,resolution:h})}return(i=n.call(this,t,e)||this).legacyRenderer=o,i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return Nt(r,n),Object.defineProperty(r.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),r.prototype.resize=function(t,e,i){void 0===i&&(i=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i&&this.baseTexture.resize(t,e),this.updateUvs()},r.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},r.create=function(t){return"number"==typeof t&&(t={width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new r(new Br(t))},r}(Rt),lo=function(){function n(r){this.texturePool={},this.textureOptions=r||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return n.prototype.createTexture=function(r,t){var e=new Br(Object.assign({width:r,height:t,resolution:1},this.textureOptions));return new Ke(e)},n.prototype.getOptimalTexture=function(r,t,e){void 0===e&&(e=1);var i=n.SCREEN_KEY;r*=e,t*=e,(!this.enableFullScreen||r!==this._pixelsWidth||t!==this._pixelsHeight)&&(i=(65535&(r=Ct(r)))<<16|65535&(t=Ct(t))),this.texturePool[i]||(this.texturePool[i]=[]);var o=this.texturePool[i].pop();return o||(o=this.createTexture(r,t)),o.filterPoolKey=i,o.setResolution(e),o},n.prototype.getFilterTexture=function(r,t){var e=this.getOptimalTexture(r.width,r.height,t||r.resolution);return e.filterFrame=r.filterFrame,e},n.prototype.returnTexture=function(r){var t=r.filterPoolKey;r.filterFrame=null,this.texturePool[t].push(r)},n.prototype.returnFilterTexture=function(r){this.returnTexture(r)},n.prototype.clear=function(r){if(r=!1!==r)for(var t in this.texturePool){var e=this.texturePool[t];if(e)for(var i=0;i<e.length;i++)e[i].destroy(!0)}this.texturePool={}},n.prototype.setScreenSize=function(r){if(r.width!==this._pixelsWidth||r.height!==this._pixelsHeight){var t=n.SCREEN_KEY,e=this.texturePool[t];if(this.enableFullScreen=r.width>0&&r.height>0,e)for(var i=0;i<e.length;i++)e[i].destroy(!0);this.texturePool[t]=[],this._pixelsWidth=r.width,this._pixelsHeight=r.height}},n.SCREEN_KEY="screen",n}(),$i=function(){function n(r,t,e,i,o,a,s){void 0===t&&(t=0),void 0===e&&(e=!1),void 0===i&&(i=5126),this.buffer=r,this.size=t,this.normalized=e,this.type=i,this.stride=o,this.start=a,this.instance=s}return n.prototype.destroy=function(){this.buffer=null},n.from=function(r,t,e,i,o){return new n(r,t,e,i,o)},n}(),ls=0,ie=function(){function n(r,t,e){void 0===t&&(t=!0),void 0===e&&(e=!1),this.data=r||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=e,this.static=t,this.id=ls++,this.disposeRunner=new ae("disposeBuffer")}return n.prototype.update=function(r){this.data=r||this.data,this._updateID++},n.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},n.prototype.destroy=function(){this.dispose(),this.data=null},n.from=function(r){return r instanceof Array&&(r=new Float32Array(r)),new n(r)},n}();function fo(n){if(4===n.BYTES_PER_ELEMENT)return n instanceof Float32Array?"Float32Array":n instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===n.BYTES_PER_ELEMENT){if(n instanceof Uint16Array)return"Uint16Array"}else if(1===n.BYTES_PER_ELEMENT&&n instanceof Uint8Array)return"Uint8Array";return null}var fs={Float32Array,Uint32Array,Int32Array,Uint8Array},co={5126:4,5123:2,5121:1},ds=0,ps={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},cr=function(){function n(r,t){void 0===r&&(r=[]),void 0===t&&(t={}),this.buffers=r,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=ds++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new ae("disposeGeometry"),this.refCount=0}return n.prototype.addAttribute=function(r,t,e,i,o,a,s,u){if(void 0===e&&(e=0),void 0===i&&(i=!1),void 0===u&&(u=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof ie||(t instanceof Array&&(t=new Float32Array(t)),t=new ie(t));var h=r.split("|");if(h.length>1){for(var c=0;c<h.length;c++)this.addAttribute(h[c],t,e,i,o);return this}var f=this.buffers.indexOf(t);return-1===f&&(this.buffers.push(t),f=this.buffers.length-1),this.attributes[r]=new $i(f,e,i,o,a,s,u),this.instanced=this.instanced||u,this},n.prototype.getAttribute=function(r){return this.attributes[r]},n.prototype.getBuffer=function(r){return this.buffers[this.getAttribute(r).buffer]},n.prototype.addIndex=function(r){return r instanceof ie||(r instanceof Array&&(r=new Uint16Array(r)),r=new ie(r)),r.index=!0,this.indexBuffer=r,-1===this.buffers.indexOf(r)&&this.buffers.push(r),this},n.prototype.getIndex=function(){return this.indexBuffer},n.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var i,r=[],t=[],e=new ie;for(i in this.attributes){var o=this.attributes[i];r.push(this.buffers[o.buffer].data),t.push(o.size*co[o.type]/4),o.buffer=0}for(e.data=function cs(n,r){for(var t=0,e=0,i={},o=0;o<n.length;o++)e+=r[o],t+=n[o].length;var a=new ArrayBuffer(4*t),s=null,u=0;for(o=0;o<n.length;o++){var h=r[o],c=n[o],f=fo(c);i[f]||(i[f]=new fs[f](a)),s=i[f];for(var l=0;l<c.length;l++)s[(l/h|0)*e+u+l%h]=c[l];u+=h}return new Float32Array(a)}(r,t),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[e],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},n.prototype.getSize=function(){for(var r in this.attributes){var t=this.attributes[r];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},n.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},n.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},n.prototype.clone=function(){for(var r=new n,t=0;t<this.buffers.length;t++)r.buffers[t]=new ie(this.buffers[t].data.slice(0));for(var t in this.attributes){var e=this.attributes[t];r.attributes[t]=new $i(e.buffer,e.size,e.normalized,e.type,e.stride,e.start,e.instance)}return this.indexBuffer&&(r.indexBuffer=r.buffers[this.buffers.indexOf(this.indexBuffer)],r.indexBuffer.index=!0),r},n.merge=function(r){for(var a,t=new n,e=[],i=[],o=[],s=0;s<r.length;s++){a=r[s];for(var u=0;u<a.buffers.length;u++)i[u]=i[u]||0,i[u]+=a.buffers[u].data.length,o[u]=0}for(s=0;s<a.buffers.length;s++)e[s]=new(ps[fo(a.buffers[s].data)])(i[s]),t.buffers[s]=new ie(e[s]);for(s=0;s<r.length;s++)for(a=r[s],u=0;u<a.buffers.length;u++)e[u].set(a.buffers[u].data,o[u]),o[u]+=a.buffers[u].data.length;if(t.attributes=a.attributes,a.indexBuffer){t.indexBuffer=t.buffers[a.buffers.indexOf(a.indexBuffer)],t.indexBuffer.index=!0;var h=0,c=0,f=0,l=0;for(s=0;s<a.buffers.length;s++)if(a.buffers[s]!==a.indexBuffer){l=s;break}for(var s in a.attributes){var d=a.attributes[s];(0|d.buffer)===l&&(c+=d.size*co[d.type]/4)}for(s=0;s<r.length;s++){var m=r[s].indexBuffer.data;for(u=0;u<m.length;u++)t.indexBuffer.data[u+f]+=h;h+=a.buffers[l].data.length/c,f+=m.length}}return t},n}(),po=function(n){function r(){var t=n.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return Nt(r,n),r}(cr),Zi=function(n){function r(){var t=n.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new ie(t.vertices),t.uvBuffer=new ie(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return Nt(r,n),r.prototype.map=function(t,e){var i=0,o=0;return this.uvs[0]=i,this.uvs[1]=o,this.uvs[2]=i+e.width/t.width,this.uvs[3]=o,this.uvs[4]=i+e.width/t.width,this.uvs[5]=o+e.height/t.height,this.uvs[6]=i,this.uvs[7]=o+e.height/t.height,o=e.y,this.vertices[0]=i=e.x,this.vertices[1]=o,this.vertices[2]=i+e.width,this.vertices[3]=o,this.vertices[4]=i+e.width,this.vertices[5]=o+e.height,this.vertices[6]=i,this.vertices[7]=o+e.height,this.invalidate(),this},r.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},r}(cr),vs=0,Le=function(){function n(r,t){this.uniforms=r,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=vs++,this.static=!!t}return n.prototype.update=function(){this.dirtyId++},n.prototype.add=function(r,t,e){this.uniforms[r]=new n(t,e)},n.from=function(r,t){return new n(r,t)},n}(),vo=function(){function n(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new Ut,this.destinationFrame=new Ut,this.filters=[]}return n.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},n}(),mo=function(n){function r(t){var e=n.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new lo,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new po,e.quadUv=new Zi,e.tempRect=new Ut,e.activeState={},e.globalUniforms=new Le({outputFrame:e.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}return Nt(r,n),r.prototype.push=function(t,e){for(var i=this.renderer,o=this.defaultFilterStack,a=this.statePool.pop()||new vo,s=e[0].resolution,u=e[0].padding,h=e[0].autoFit,c=e[0].legacy,f=1;f<e.length;f++){var l=e[f];s=Math.min(s,l.resolution),u=this.useMaxPadding?Math.max(u,l.padding):u+l.padding,h=h&&l.autoFit,c=c||l.legacy}1===o.length&&(this.defaultFilterStack[0].renderTexture=i.renderTexture.current),o.push(a),a.resolution=s,a.legacy=c,a.target=t,a.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),a.sourceFrame.pad(u),h&&a.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),a.sourceFrame.ceil(s),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,s),a.filters=e,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var d=this.tempRect;d.width=a.sourceFrame.width,d.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,i.renderTexture.bind(a.renderTexture,a.sourceFrame,d),i.renderTexture.clear()},r.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var o=this.globalUniforms.uniforms;o.outputFrame=e.sourceFrame,o.resolution=e.resolution;var a=o.inputSize,s=o.inputPixel,u=o.inputClamp;if(a[0]=e.destinationFrame.width,a[1]=e.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],s[0]=a[0]*e.resolution,s[1]=a[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],u[0]=.5*s[2],u[1]=.5*s[3],u[2]=e.sourceFrame.width*a[2]-.5*s[2],u[3]=e.sourceFrame.height*a[3]-.5*s[3],e.legacy){var h=o.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,o.filterClamp=o.inputClamp}this.globalUniforms.update();var c=t[t.length-1];if(e.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),1===i.length)i[0].apply(this,e.renderTexture,c.renderTexture,St.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var f=e.renderTexture,l=this.getOptimalFilterTexture(f.width,f.height,e.resolution);l.filterFrame=f.filterFrame;var d=0;for(d=0;d<i.length-1;++d){i[d].apply(this,f,l,St.CLEAR,e);var m=f;f=l,l=m}i[d].apply(this,f,c.renderTexture,St.BLEND,e),this.returnFilterTexture(f),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},r.prototype.bindAndClear=function(t,e){if(void 0===e&&(e=St.CLEAR),t&&t.filterFrame){var i=this.tempRect;i.width=t.filterFrame.width,i.height=t.filterFrame.height,this.renderer.renderTexture.bind(t,t.filterFrame,i)}else this.renderer.renderTexture.bind(t);"boolean"==typeof e&&(e=e?St.CLEAR:St.BLEND,lt("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(e===St.CLEAR||e===St.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},r.prototype.applyFilter=function(t,e,i,o){var a=this.renderer;this.bindAndClear(i,o),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,a.state.set(t.state),a.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(g.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(g.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,o=i.sourceFrame,a=i.destinationFrame,s=e._texture.orig,u=t.set(a.width,0,0,a.height,o.x,o.y),h=e.worldTransform.copyTo(Qt.TEMP_MATRIX);return h.invert(),u.prepend(h),u.scale(1/s.width,1/s.height),u.translate(e.anchor.x,e.anchor.y),u},r.prototype.destroy=function(){this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(t,e,i){return void 0===i&&(i=1),this.texturePool.getOptimalTexture(t,e,i)},r.prototype.getFilterTexture=function(t,e){if("number"==typeof t){var i=t;t=e,e=i}var o=this.texturePool.getOptimalTexture((t=t||this.activeState.renderTexture).width,t.height,e||t.resolution);return o.filterFrame=t.filterFrame,o},r.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r}(ce),Ur=function(){function n(r){this.renderer=r}return n.prototype.flush=function(){},n.prototype.destroy=function(){this.renderer=null},n.prototype.start=function(){},n.prototype.stop=function(){this.flush()},n.prototype.render=function(r){},n}(),yo=function(n){function r(t){var e=n.call(this,t)||this;return e.emptyRenderer=new Ur(t),e.currentRenderer=e.emptyRenderer,e}return Nt(r,n),r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,o=e-1;o>=0;--o)t[o]=i[o]||null,t[o]&&(t[o]._batchLocation=o)},r.prototype.boundArray=function(t,e,i,o){for(var a=t.elements,s=t.ids,u=t.count,h=0,c=0;c<u;c++){var f=a[c],l=f._batchLocation;if(l>=0&&l<o&&e[l]===f)s[c]=l;else for(;h<o;){var d=e[h];if(!d||d._batchEnabled!==i||d._batchLocation!==h){s[c]=h,f._batchLocation=h,e[h]=f;break}h++}}},r}(ce),go=0,_o=function(n){function r(t){var e=n.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}return Nt(r,n),Object.defineProperty(r.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),r.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=go++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},r.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=go++,this.renderer.runners.contextChange.emit(t)},r.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},r.prototype.createContext=function(t,e){var i;if(v.PREFER_ENV>=N.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},r.prototype.getExtensions=function(){var t=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},r.prototype.handleContextLost=function(t){t.preventDefault()},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},r.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in window&&t instanceof window.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var o=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=o,o||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},r}(ce),xo=function n(r){this.framebuffer=r,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=se.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},ms=new Ut,bo=function(n){function r(t){var e=n.call(this,t)||this;return e.managedFramebuffers=[],e.unknownFramebuffer=new di(10,10),e.msaaSamples=null,e}return Nt(r,n),r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ut,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;v.PREFER_ENV===N.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(o){return e.drawBuffersWEBGL(o)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},r.prototype.bind=function(t,e){var i=this.gl;if(t){var o=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,o.framebuffer)),o.dirtyId!==t.dirtyId&&(o.dirtyId=t.dirtyId,o.dirtyFormat!==t.dirtyFormat?(o.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):o.dirtySize!==t.dirtySize&&(o.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a=0;a<t.colorTextures.length;a++){var s=t.colorTextures[a];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(t,e,i,o){var a=this.viewport;(a.width!==i||a.height!==o||a.x!==t||a.y!==e)&&(a.x=t,a.y=e,a.width=i,a.height=o,this.gl.viewport(t,e,i,o))},Object.defineProperty(r.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),r.prototype.clear=function(t,e,i,o,a){void 0===a&&(a=w.COLOR|w.DEPTH);var s=this.gl;s.clearColor(t,e,i,o),s.clear(a)},r.prototype.initFramebuffer=function(t){var i=new xo(this.gl.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},r.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var o=t.colorTextures,a=0;a<o.length;a++)this.renderer.texture.bind(o[a],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},r.prototype.updateFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID],a=t.colorTextures.length;e.drawBuffers||(a=Math.min(a,1)),i.multisample>1&&(i.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,i.msaaBuffer));for(var s=[],u=0;u<a;u++)if(!(0===u&&i.multisample>1)){var h=t.colorTextures[u],c=h.parentTextureArray||h;this.renderer.texture.bind(c,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+u,h.target,c._glTextures[this.CONTEXT_UID].texture,0),s.push(e.COLOR_ATTACHMENT0+u)}if(s.length>1&&e.drawBuffers(s),t.depthTexture&&this.writeDepthTexture){var l=t.depthTexture;this.renderer.texture.bind(l,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,0)}!i.stencil&&(t.stencil||t.depth)&&(i.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i.stencil))},r.prototype.detectSamples=function(t){var e=this.msaaSamples,i=se.NONE;if(t<=1||null===e)return i;for(var o=0;o<e.length;o++)if(e[o]<=t){i=e[o];break}return 1===i&&(i=se.NONE),i},r.prototype.blit=function(t,e,i){var o=this,a=o.current,u=o.gl;if(2===o.renderer.context.webGLVersion&&a){var c=a.glFramebuffers[o.CONTEXT_UID];if(c){if(!t){if(c.multisample<=1)return;c.blitFramebuffer||(c.blitFramebuffer=new di(a.width,a.height),c.blitFramebuffer.addColorTexture(0,a.colorTextures[0])),(t=c.blitFramebuffer).width=a.width,t.height=a.height}e||((e=ms).width=a.width,e.height=a.height),i||(i=e);var f=e.width===i.width&&e.height===i.height;this.bind(t),u.bindFramebuffer(u.READ_FRAMEBUFFER,c.framebuffer),u.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,u.COLOR_BUFFER_BIT,f?u.NEAREST:u.LINEAR)}}},r.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],o=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var a=this.managedFramebuffers.indexOf(t);a>=0&&this.managedFramebuffers.splice(a,1),t.disposeRunner.remove(this),e||(o.deleteFramebuffer(i.framebuffer),i.stencil&&o.deleteRenderbuffer(i.stencil))}},r.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},r.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.enableStencil();var i=t.width,o=t.height,a=this.gl,s=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,s),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,i,o),e.stencil=s,a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,s)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Ut},r}(ce),ys=function n(r){this.buffer=r||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},Ki={5126:4,5123:2,5121:1},To=function(n){function r(t){var e=n.call(this,t)||this;return e._activeGeometry=null,e._activeVao=null,e.hasVao=!0,e.hasInstance=!0,e.canUseUInt32ElementIndex=!1,e.managedGeometries={},e.managedBuffers={},e}return Nt(r,n),r.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var i=this.renderer.context.extensions.vertexArrayObject;v.PREFER_ENV===N.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(a){return i.bindVertexArrayOES(a)},t.deleteVertexArray=function(a){return i.deleteVertexArrayOES(a)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var o=t.getExtension("ANGLE_instanced_arrays");o?(t.vertexAttribDivisor=function(a,s){return o.vertexAttribDivisorANGLE(a,s)},t.drawElementsInstanced=function(a,s,u,h,c){return o.drawElementsInstancedANGLE(a,s,u,h,c)},t.drawArraysInstanced=function(a,s,u,h){return o.drawArraysInstancedANGLE(a,s,u,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},r.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,o=t.glVertexArrayObjects[this.CONTEXT_UID],a=!1;o||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=o={},a=!0);var s=o[e.program.id]||this.initGeometryVao(t,e.program,a);this._activeGeometry=t,this._activeVao!==s&&(this._activeVao=s,this.hasVao?i.bindVertexArray(s):this.activateVao(t,e.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,i=0;i<t.buffers.length;i++){var o=t.buffers[i],a=o._glBuffers[this.CONTEXT_UID];if(o._updateID!==a.updateID){a.updateID=o._updateID;var s=o.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;if(e.bindBuffer(s,a.buffer),this._boundBuffer=a,a.byteLength>=o.data.byteLength)e.bufferSubData(s,0,o.data);else{var u=o.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;a.byteLength=o.data.byteLength,e.bufferData(s,o.data,u)}}}},r.prototype.checkCompatibility=function(t,e){var i=t.attributes,o=e.attributeData;for(var a in o)if(!i[a])throw new Error('shader and geometry incompatible, geometry missing the "'+a+'" attribute')},r.prototype.getSignature=function(t,e){var i=t.attributes,o=e.attributeData,a=["g",t.id];for(var s in i)o[s]&&a.push(s);return a.join("-")},r.prototype.initGeometryVao=function(t,e,i){void 0===i&&(i=!0),this.checkCompatibility(t,e);var o=this.gl,a=this.CONTEXT_UID,s=this.getSignature(t,e),u=t.glVertexArrayObjects[this.CONTEXT_UID],h=u[s];if(h)return u[e.id]=h,h;var c=t.buffers,f=t.attributes,l={},d={};for(var m in c)l[m]=0,d[m]=0;for(var m in f)!f[m].size&&e.attributeData[m]?f[m].size=e.attributeData[m].size:f[m].size||console.warn("PIXI Geometry attribute '"+m+"' size cannot be determined (likely the bound shader does not have the attribute)"),l[f[m].buffer]+=f[m].size*Ki[f[m].type];for(var m in f){var y=f[m],P=y.size;void 0===y.stride&&(y.stride=l[y.buffer]===P*Ki[y.type]?0:l[y.buffer]),void 0===y.start&&(y.start=d[y.buffer],d[y.buffer]+=P*Ki[y.type])}h=o.createVertexArray(),o.bindVertexArray(h);for(var tt=0;tt<c.length;tt++){var gt=c[tt];gt._glBuffers[a]||(gt._glBuffers[a]=new ys(o.createBuffer()),this.managedBuffers[gt.id]=gt,gt.disposeRunner.add(this)),i&&gt._glBuffers[a].refCount++}return this.activateVao(t,e),this._activeVao=h,u[e.id]=h,u[s]=h,h},r.prototype.disposeBuffer=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],o=this.gl;t.disposeRunner.remove(this),i&&(e||o.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var i=t.glVertexArrayObjects[this.CONTEXT_UID],o=this.gl,a=t.buffers;if(t.disposeRunner.remove(this),i){for(var s=0;s<a.length;s++){var u=a[s]._glBuffers[this.CONTEXT_UID];u.refCount--,0===u.refCount&&!e&&this.disposeBuffer(a[s],e)}if(!e)for(var h in i)if("g"===h[0]){var c=i[h];this._activeVao===c&&this.unbind(),o.deleteVertexArray(c)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t);for(e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.disposeBuffer(this.managedBuffers[e[i]],t)},r.prototype.activateVao=function(t,e){var i=this.gl,o=this.CONTEXT_UID,a=t.buffers,s=t.attributes;t.indexBuffer&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[o].buffer);var u=null;for(var h in s){var c=s[h],l=a[c.buffer]._glBuffers[o];if(e.attributeData[h]){u!==l&&(i.bindBuffer(i.ARRAY_BUFFER,l.buffer),u=l);var d=e.attributeData[h].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,c.size,c.type||i.FLOAT,c.normalized,c.stride,c.start),c.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(d,1)}}}},r.prototype.draw=function(t,e,i,o){var a=this.gl,s=this._activeGeometry;if(s.indexBuffer){var u=s.indexBuffer.data.BYTES_PER_ELEMENT,h=2===u?a.UNSIGNED_SHORT:a.UNSIGNED_INT;2===u||4===u&&this.canUseUInt32ElementIndex?s.instanced?a.drawElementsInstanced(t,e||s.indexBuffer.data.length,h,(i||0)*u,o||1):a.drawElements(t,e||s.indexBuffer.data.length,h,(i||0)*u):console.warn("unsupported index buffer type: uint32")}else s.instanced?a.drawArraysInstanced(t,i,e||s.getSize(),o||1):a.drawArrays(t,i,e||s.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r}(ce),Eo=function(){function n(r){void 0===r&&(r=null),this.type=Kt.NONE,this.autoDetect=!0,this.maskObject=r||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return n.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Kt.NONE,this.autoDetect=!0),this._target=null},n.prototype.copyCountersOrReset=function(r){r?(this._stencilCounter=r._stencilCounter,this._scissorCounter=r._scissorCounter,this._scissorRect=r._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},n}();function So(n,r,t){var e=n.createShader(r);return n.shaderSource(e,t),n.compileShader(e),e}function wo(n,r,t,e){var i=So(n,n.VERTEX_SHADER,r),o=So(n,n.FRAGMENT_SHADER,t),a=n.createProgram();if(n.attachShader(a,i),n.attachShader(a,o),e)for(var s in e)n.bindAttribLocation(a,e[s],s);return n.linkProgram(a),n.getProgramParameter(a,n.LINK_STATUS)||(n.getShaderParameter(i,n.COMPILE_STATUS)||(console.warn(r),console.error(n.getShaderInfoLog(i))),n.getShaderParameter(o,n.COMPILE_STATUS)||(console.warn(t),console.error(n.getShaderInfoLog(o))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",n.getProgramParameter(a,n.VALIDATE_STATUS)),console.error("gl.getError()",n.getError()),""!==n.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(a)),n.deleteProgram(a),a=null),n.deleteShader(i),n.deleteShader(o),a}function qi(n){for(var r=new Array(n),t=0;t<r.length;t++)r[t]=!1;return r}function Po(n,r){switch(n){case"float":case"int":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*r);case"vec3":return new Float32Array(3*r);case"vec4":return new Float32Array(4*r);case"ivec2":return new Int32Array(2*r);case"ivec3":return new Int32Array(3*r);case"ivec4":return new Int32Array(4*r);case"bool":return!1;case"bvec2":return qi(2*r);case"bvec3":return qi(3*r);case"bvec4":return qi(4*r);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var vi,Io={},kr=Io;function Ao(){if(kr===Io||kr&&kr.isContextLost()){var n=document.createElement("canvas"),r=void 0;v.PREFER_ENV>=N.WEBGL2&&(r=n.getContext("webgl2",{})),r||((r=n.getContext("webgl",{})||n.getContext("experimental-webgl",{}))?r.getExtension("WEBGL_draw_buffers"):r=null),kr=r}return kr}function Oo(n,r,t){if("precision"!==n.substring(0,9)){var e=r;return r===Gt.HIGH&&t!==Gt.HIGH&&(e=Gt.MEDIUM),"precision "+e+" float;\n"+n}return t!==Gt.HIGH&&"precision highp"===n.substring(0,15)?n.replace("precision highp","precision mediump"):n}var _s={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function xs(n){return _s[n]}var mi=null,Mo={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Co(n,r){if(!mi){var t=Object.keys(Mo);mi={};for(var e=0;e<t.length;++e){var i=t[e];mi[n[i]]=Mo[i]}}return mi[r]}var Xr,yi=[{test:function(n){return"float"===n.type&&1===n.size},code:function(n){return'\n            if(uv["'+n+'"] !== ud["'+n+'"].value)\n            {\n                ud["'+n+'"].value = uv["'+n+'"]\n                gl.uniform1f(ud["'+n+'"].location, uv["'+n+'"])\n            }\n            '}},{test:function(n){return("sampler2D"===n.type||"samplerCube"===n.type||"sampler2DArray"===n.type)&&1===n.size&&!n.isArray},code:function(n){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+n+'"], t);\n\n            if(ud["'+n+'"].value !== t)\n            {\n                ud["'+n+'"].value = t;\n                gl.uniform1i(ud["'+n+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(n,r){return"mat3"===n.type&&1===n.size&&void 0!==r.a},code:function(n){return'\n            gl.uniformMatrix3fv(ud["'+n+'"].location, false, uv["'+n+'"].toArray(true));\n            '}},{test:function(n,r){return"vec2"===n.type&&1===n.size&&void 0!==r.x},code:function(n){return'\n                cv = ud["'+n+'"].value;\n                v = uv["'+n+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+n+'"].location, v.x, v.y);\n                }'}},{test:function(n){return"vec2"===n.type&&1===n.size},code:function(n){return'\n                cv = ud["'+n+'"].value;\n                v = uv["'+n+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+n+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(n,r){return"vec4"===n.type&&1===n.size&&void 0!==r.width},code:function(n){return'\n                cv = ud["'+n+'"].value;\n                v = uv["'+n+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+n+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(n){return"vec4"===n.type&&1===n.size},code:function(n){return'\n                cv = ud["'+n+'"].value;\n                v = uv["'+n+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+n+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],bs={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Ts={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},Ss=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function ws(n){for(var r="",t=0;t<n;++t)t>0&&(r+="\nelse "),t<n-1&&(r+="if(test == "+t+".0){}");return r}function Ro(n,r){if(0===n)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var t=r.createShader(r.FRAGMENT_SHADER);;){var e=Ss.replace(/%forloop%/gi,ws(n));if(r.shaderSource(t,e),r.compileShader(t),r.getShaderParameter(t,r.COMPILE_STATUS))break;n=n/2|0}return n}var Os=0,gi={},Gr=function(){function n(r,t,e){void 0===e&&(e="pixi-shader"),this.id=Os++,this.vertexSrc=r||n.defaultVertexSrc,this.fragmentSrc=t||n.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(e=e.replace(/\s+/g,"-"),gi[e]?(gi[e]++,e+="-"+gi[e]):gi[e]=1,this.vertexSrc="#define SHADER_NAME "+e+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+e+"\n"+this.fragmentSrc,this.vertexSrc=Oo(this.vertexSrc,v.PRECISION_VERTEX,Gt.HIGH),this.fragmentSrc=Oo(this.fragmentSrc,v.PRECISION_FRAGMENT,function gs(){if(!vi){vi=Gt.MEDIUM;var n=Ao();if(n&&n.getShaderPrecisionFormat){var r=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);vi=r.precision?Gt.HIGH:Gt.MEDIUM}}return vi}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return n.prototype.extractData=function(r,t){var e=Ao();if(e){var i=wo(e,r,t);this.attributeData=this.getAttributeData(i,e),this.uniformData=this.getUniformData(i,e),e.deleteProgram(i)}else this.uniformData={},this.attributeData={}},n.prototype.getAttributeData=function(r,t){for(var e={},i=[],o=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES),a=0;a<o;a++){var s=t.getActiveAttrib(r,a),u=Co(t,s.type),h={type:u,name:s.name,size:xs(u),location:0};e[s.name]=h,i.push(h)}for(i.sort(function(c,f){return c.name>f.name?1:-1}),a=0;a<i.length;a++)i[a].location=a;return e},n.prototype.getUniformData=function(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),o=0;o<i;o++){var a=t.getActiveUniform(r,o),s=a.name.replace(/\[.*?\]$/,""),u=a.name.match(/\[.*?\]$/),h=Co(t,a.type);e[s]={type:h,size:a.size,isArray:u,value:Po(h,a.size)}}return e},Object.defineProperty(n,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),n.from=function(r,t,e){var i=r+t,o=ar[i];return o||(ar[i]=o=new n(r,t,e)),o},n}(),Ne=function(){function n(r,t){for(var e in this.program=r,this.uniformGroup=t?t instanceof Le?t:new Le(t):new Le({}),r.uniformData)this.uniformGroup.uniforms[e]instanceof Array&&(this.uniformGroup.uniforms[e]=new Float32Array(this.uniformGroup.uniforms[e]))}return n.prototype.checkUniformExists=function(r,t){if(t.uniforms[r])return!0;for(var e in t.uniforms){var i=t.uniforms[e];if(i.group&&this.checkUniformExists(r,i))return!0}return!1},n.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(n.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),n.from=function(r,t,e){return new n(Gr.from(r,t),e)},n}(),Be=function(){function n(){this.data=0,this.blendMode=F.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(n.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(r){!!(1&this.data)!==r&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(r){!!(2&this.data)!==r&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(r){!!(4&this.data)!==r&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(r){!!(8&this.data)!==r&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(r){!!(16&this.data)!==r&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blendMode",{get:function(){return this._blendMode},set:function(r){this.blend=r!==F.NONE,this._blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(r){this.offsets=!!r,this._polygonOffset=r},enumerable:!1,configurable:!0}),n.for2d=function(){var r=new n;return r.depthTest=!1,r.blend=!0,r},n}(),Oe=function(n){function r(t,e,i){var o=this,a=Gr.from(t||r.defaultVertexSrc,e||r.defaultFragmentSrc);return(o=n.call(this,a,i)||this).padding=0,o.resolution=v.FILTER_RESOLUTION,o.enabled=!0,o.autoFit=!0,o.legacy=!!o.program.attributeData.aTextureCoord,o.state=new Be,o}return Nt(r,n),r.prototype.apply=function(t,e,i,o,a){t.applyFilter(this,e,i,o)},Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),r}(Ne),Do=new Qt,_i=function(){function n(r,t){this._texture=r,this.mapCoord=new Qt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===t?.5:t,this.isSimple=!1}return Object.defineProperty(n.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture=r,this._textureID=-1},enumerable:!1,configurable:!0}),n.prototype.multiplyUvs=function(r,t){void 0===t&&(t=r);for(var e=this.mapCoord,i=0;i<r.length;i+=2){var o=r[i],a=r[i+1];t[i]=o*e.a+a*e.c+e.tx,t[i+1]=o*e.b+a*e.d+e.ty}return t},n.prototype.update=function(r){var t=this._texture;if(!t||!t.valid||!r&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var e=t._uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);var i=t.orig,o=t.trim;o&&(Do.set(i.width/o.width,0,0,i.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(Do));var a=t.baseTexture,s=this.uClampFrame,u=this.clampMargin/a.resolution,h=this.clampOffset;return s[0]=(t._frame.x+u+h)/a.width,s[1]=(t._frame.y+u+h)/a.height,s[2]=(t._frame.x+t._frame.width-u+h)/a.width,s[3]=(t._frame.y+t._frame.height-u+h)/a.height,this.uClampOffset[0]=h/a.realWidth,this.uClampOffset[1]=h/a.realHeight,this.isSimple=t._frame.width===a.width&&t._frame.height===a.height&&0===t.rotate,!0},n}(),Fo=function(n){function r(t){var e=this,i=new Qt;return e=n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this,t.renderable=!1,e.maskSprite=t,e.maskMatrix=i,e}return Nt(r,n),r.prototype.apply=function(t,e,i,o){var a=this.maskSprite,s=a._texture;!s.valid||(s.uvMatrix||(s.uvMatrix=new _i(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,a).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,i,o))},r}(Oe),Lo=function(n){function r(t){var e=n.call(this,t)||this;return e.enableScissor=!1,e.alphaMaskPool=[],e.maskDataPool=[],e.maskStack=[],e.alphaMaskIndex=0,e}return Nt(r,n),r.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},r.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var o=this.maskDataPool.pop()||new Eo;o.pooled=!0,o.maskObject=e,i=o}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case Kt.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case Kt.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case Kt.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},r.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case Kt.SCISSOR:this.renderer.scissor.pop();break;case Kt.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case Kt.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},r.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite)t.type=Kt.SPRITE;else if(t.type=Kt.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,o=Math.atan2(i.b,i.a),a=Math.atan2(i.d,i.c);o=Math.round(o*(180/Math.PI)*100),a=((a=Math.round(a*(180/Math.PI)*100)-o)%18e3+18e3)%18e3,0==(o=(o%9e3+9e3)%9e3)&&9e3===a&&(t.type=Kt.SCISSOR)}},r.prototype.pushSpriteMask=function(t){var e=t.maskObject,i=t._target,o=this.alphaMaskPool[this.alphaMaskIndex];o||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new Fo(e)]),o[0].resolution=this.renderer.resolution,o[0].maskSprite=e;var a=i.filterArea;i.filterArea=e.getBounds(!0),this.renderer.filter.push(i,o),i.filterArea=a,this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},r}(ce),No=function(n){function r(t){var e=n.call(this,t)||this;return e.maskStack=[],e.glConst=0,e}return Nt(r,n),r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var o=this.getStackLength();o!==i&&(0===o?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.maskStack=null},r}(ce),Bo=function(n){function r(t){var e=n.call(this,t)||this;return e.glConst=WebGLRenderingContext.SCISSOR_TEST,e}return Nt(r,n),r.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},r.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var i=t._scissorRect,o=e.getBounds(!0),a=this.renderer.gl;e.renderable=!1,i?o.fit(i):a.enable(a.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=o,this._useCurrent()},r.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},r.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,i=this.renderer.projection,o=i.transform,a=i.sourceFrame,s=i.destinationFrame,u=e?e.resolution:this.renderer.resolution,h=(t.x-a.x)*u+s.x,c=(t.y-a.y)*u+s.y,l=t.height*u;o&&(h+=o.tx*u,c+=o.ty*u),e||(c=this.renderer.height-l-c),this.renderer.gl.scissor(h,c,t.width*u,l)},r}(No),Uo=function(n){function r(t){var e=n.call(this,t)||this;return e.glConst=WebGLRenderingContext.STENCIL_TEST,e}return Nt(r,n),r.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},r.prototype.push=function(t){var e=t.maskObject,i=this.renderer.gl,o=t._stencilCounter;0===o&&(this.renderer.framebuffer.forceStencil(),i.enable(i.STENCIL_TEST)),t._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,o,this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},r.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},r.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},r.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},r}(No),ko=function(n){function r(t){var e=n.call(this,t)||this;return e.destinationFrame=null,e.sourceFrame=null,e.defaultFrame=null,e.projectionMatrix=new Qt,e.transform=null,e}return Nt(r,n),r.prototype.update=function(t,e,i,o){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,o),this.transform&&this.projectionMatrix.append(this.transform);var a=this.renderer;a.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,a.globalUniforms.update(),a.shader.shader&&a.shader.syncUniformGroup(a.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(t,e,i,o){var a=this.projectionMatrix,s=o?-1:1;a.identity(),a.a=1/e.width*2,a.d=s*(1/e.height*2),a.tx=-1-e.x*a.a,a.ty=-s-e.y*a.d},r.prototype.setTransform=function(t){},r}(ce),qe=new Ut,Hr=new Ut,Yr=new Ut,Xo=function(n){function r(t){var e=n.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new Ut,e.destinationFrame=new Ut,e}return Nt(r,n),r.prototype.bind=function(t,e,i){void 0===t&&(t=null);var a,s,u,o=this.renderer;this.current=t,t?(u=(a=t.baseTexture).resolution,e||(qe.width=t.frame.width,qe.height=t.frame.height,e=qe),i||(Hr.x=t.frame.x,Hr.y=t.frame.y,Hr.width=e.width,Hr.height=e.height,i=Hr),s=a.framebuffer):(u=o.resolution,e||(qe.width=o.screen.width,qe.height=o.screen.height,e=qe),i||((i=qe).width=e.width,i.height=e.height)),Yr.x=i.x*u,Yr.y=i.y*u,Yr.width=i.width*u,Yr.height=i.height*u,this.renderer.framebuffer.bind(s,Yr),this.renderer.projection.update(i,e,u,!s),this.renderer.mask.setMaskStack(t?a.maskStack:this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},r.prototype.clear=function(t,e){this.renderer.framebuffer.clear((t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor)[0],t[1],t[2],t[3],e)},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r}(ce),Fs=function n(){},Go=function(){function n(r,t){this.program=r,this.uniformData=t,this.uniformGroups={}}return n.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},n}(),Ls=0,Ho={textureCount:0},Yo=function(n){function r(t){var e=n.call(this,t)||this;return e.destroyed=!1,e.systemCheck(),e.gl=null,e.shader=null,e.program=null,e.cache={},e.id=Ls++,e}return Nt(r,n),r.prototype.systemCheck=function(){if(!function Ps(){if("boolean"==typeof Xr)return Xr;try{var n=new Function("param1","param2","param3","return param1[param2] === param3;");Xr=!0===n({a:"b"},"a","b")}catch(r){Xr=!1}return Xr}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(t){this.gl=t,this.reset()},r.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,o=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(o.program)),e||(Ho.textureCount=0,this.syncUniformGroup(t.uniformGroup,Ho)),o},r.prototype.setUniforms=function(t){var e=this.shader.program;e.syncUniforms(e.glPrograms[this.renderer.CONTEXT_UID].uniformData,t,this.renderer)},r.prototype.syncUniformGroup=function(t,e){var i=this.getglProgram();(!t.static||t.dirtyId!==i.uniformGroups[t.id])&&(i.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},r.prototype.syncUniforms=function(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)},r.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function Es(n,r){var t=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(var e in n.uniforms){var i=r[e];if(i){for(var o=n.uniforms[e],a=!1,s=0;s<yi.length;s++)if(yi[s].test(i,o)){t.push(yi[s].code(e,o)),a=!0;break}if(!a){var h=(1===i.size?bs:Ts)[i.type].replace("location",'ud["'+e+'"].location');t.push('\n            cv = ud["'+e+'"].value;\n            v = uv["'+e+'"];\n            '+h+";")}}else n.uniforms[e].group&&t.push('\n                    renderer.shader.syncUniformGroup(uv["'+e+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",t.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},r.prototype.getSignature=function(t,e){var i=t.uniforms,o=[];for(var a in i)o.push(a),e[a]&&o.push(e[a].type);return o.join("-")},r.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateShader=function(t){var e=this.gl,i=t.program,o={};for(var a in i.attributeData)o[a]=i.attributeData[a].location;var s=wo(e,i.vertexSrc,i.fragmentSrc,o),u={};for(var a in i.uniformData){var h=i.uniformData[a];u[a]={location:e.getUniformLocation(s,a),value:Po(h.type,h.size)}}var c=new Go(s,u);return i.glPrograms[this.renderer.CONTEXT_UID]=c,c},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.destroy=function(){this.destroyed=!0},r}(ce),jo=function(n){function r(t){var e=n.call(this,t)||this;return e.gl=null,e.stateId=0,e.polygonOffset=0,e.blendMode=F.NONE,e._blendEq=!1,e.map=[],e.map[0]=e.setBlend,e.map[1]=e.setOffset,e.map[2]=e.setCullFace,e.map[3]=e.setDepthTest,e.map[4]=e.setFrontFace,e.checks=[],e.defaultState=new Be,e.defaultState.blend=!0,e}return Nt(r,n),r.prototype.contextChange=function(t){this.gl=t,this.blendModes=function Ns(n,r){return void 0===r&&(r=[]),r[F.NORMAL]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],r[F.ADD]=[n.ONE,n.ONE],r[F.MULTIPLY]=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],r[F.SCREEN]=[n.ONE,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],r[F.OVERLAY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],r[F.DARKEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],r[F.LIGHTEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],r[F.COLOR_DODGE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],r[F.COLOR_BURN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],r[F.HARD_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],r[F.SOFT_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],r[F.DIFFERENCE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],r[F.EXCLUSION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],r[F.HUE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],r[F.SATURATION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],r[F.COLOR]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],r[F.LUMINOSITY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],r[F.NONE]=[0,0],r[F.NORMAL_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],r[F.ADD_NPM]=[n.SRC_ALPHA,n.ONE,n.ONE,n.ONE],r[F.SCREEN_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],r[F.SRC_IN]=[n.DST_ALPHA,n.ZERO],r[F.SRC_OUT]=[n.ONE_MINUS_DST_ALPHA,n.ZERO],r[F.SRC_ATOP]=[n.DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],r[F.DST_OVER]=[n.ONE_MINUS_DST_ALPHA,n.ONE],r[F.DST_IN]=[n.ZERO,n.SRC_ALPHA],r[F.DST_OUT]=[n.ZERO,n.ONE_MINUS_SRC_ALPHA],r[F.DST_ATOP]=[n.ONE_MINUS_DST_ALPHA,n.SRC_ALPHA],r[F.XOR]=[n.ONE_MINUS_DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],r[F.SUBTRACT]=[n.ONE,n.ONE,n.ONE,n.ONE,n.FUNC_REVERSE_SUBTRACT,n.FUNC_ADD],r}(t),this.set(this.defaultState),this.reset()},r.prototype.set=function(t){if(this.stateId!==(t=t||this.defaultState).data){for(var e=this.stateId^t.data,i=0;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(i=0;i<this.checks.length;i++)this.checks[i](this,t)},r.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},r.prototype.setBlend=function(t){this.updateCheck(r.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(t){this.updateCheck(r.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},r.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;2===e.length?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},r.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):!e&&-1!==i&&this.checks.splice(i,1)},r.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},r.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},r}(ce),zo=function(n){function r(t){var e=n.call(this,t)||this;return e.count=0,e.checkCount=0,e.maxIdle=v.GC_MAX_IDLE,e.checkCountMax=v.GC_MAX_CHECK_COUNT,e.mode=v.GC_MODE,e}return Nt(r,n),r.prototype.postrender=function(){!this.renderer.renderingToScreen||(this.count++,this.mode!==xt.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,o=0;o<e.length;o++){var a=e[o];!a.framebuffer&&this.count-a.touched>this.maxIdle&&(t.destroyTexture(a,!0),e[o]=null,i=!0)}if(i){var s=0;for(o=0;o<e.length;o++)null!==e[o]&&(e[s++]=e[o]);e.length=s}},r.prototype.unload=function(t){var i=t._texture;i&&!i.framebuffer&&this.renderer.texture.destroyTexture(i);for(var o=t.children.length-1;o>=0;o--)this.unload(t.children[o])},r}(ce),xi=function n(r){this.texture=r,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},Vo=function(n){function r(t){var e=n.call(this,t)||this;return e.boundTextures=[],e.currentLocation=-1,e.managedTextures=[],e._unknownBoundTextures=!1,e.unknownTexture=new Wt,e}return Nt(r,n),r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var o=new xi(t.createTexture());for(t.bindTexture(t.TEXTURE_2D,o.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=o,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new xi(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture),i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);for(t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR),i=0;i<this.boundTextures.length;i++)this.bind(null,i)},r.prototype.bind=function(t,e){void 0===e&&(e=0);var i=this.gl;if(t){if((t=t.castToBaseTexture()).parentTextureArray)return;if(t.valid){t.touched=this.renderer.textureGC.count;var o=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,o.texture)),o.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},r.prototype.unbind=function(t){var i=this.gl,o=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var a=0;a<o.length;a++)o[a]===this.unknownTexture&&this.bind(null,a)}for(a=0;a<o.length;a++)o[a]===t&&(this.currentLocation!==a&&(i.activeTexture(i.TEXTURE0+a),this.currentLocation=a),i.bindTexture(t.target,this.emptyTextures[t.target].texture),o[a]=null)},r.prototype.initTexture=function(t){var e=new xi(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},r.prototype.initTextureType=function(t,e){if(e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion){var i=this.renderer.gl;t.type===i.FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA32F),t.type===at.HALF_FLOAT&&(e.type=i.HALF_FLOAT),e.type===i.HALF_FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA16F)}},r.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),!t.resource||!t.resource.upload(i,t,e)){var o=t.realWidth,a=t.realHeight,s=i.gl;(e.width!==o||e.height!==a||e.dirtyId<0)&&(e.width=o,e.height=a,s.texImage2D(t.target,0,e.internalFormat,o,a,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},r.prototype.destroyTexture=function(t,e){var i=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var o=this.managedTextures.indexOf(t);-1!==o&&qt(this.managedTextures,o,1)}},r.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];!e||(e.mipmap=!!(t.mipmap!==Dt.POW2&&2===this.webGLVersion||t.isPowerOfTwo)&&t.mipmap>=1,e.wrapMode=2===this.webGLVersion||t.isPowerOfTwo?t.wrapMode:Et.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},r.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===It.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var o=this.renderer.context.extensions.anisotropicFiltering;if(o&&t.anisotropicLevel>0&&t.scaleMode===It.LINEAR){var a=Math.min(t.anisotropicLevel,i.getParameter(o.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,o.TEXTURE_MAX_ANISOTROPY_EXT,a)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===It.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===It.LINEAR?i.LINEAR:i.NEAREST)},r}(ce),Hs={FilterSystem:mo,BatchSystem:yo,ContextSystem:_o,FramebufferSystem:bo,GeometrySystem:To,MaskSystem:Lo,ScissorSystem:Bo,StencilSystem:Uo,ProjectionSystem:ko,RenderTextureSystem:Xo,ShaderSystem:Yo,StateSystem:jo,TextureGCSystem:zo,TextureSystem:Vo},nn=new Qt,Wo=function(n){function r(t,e){void 0===t&&(t=ut.UNKNOWN);var i=n.call(this)||this;return(e=Object.assign({},v.RENDER_OPTIONS,e)).roundPixels&&(v.ROUND_PIXELS=e.roundPixels,lt("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),i.options=e,i.type=t,i.screen=new Ut(0,0,e.width,e.height),i.view=e.view||document.createElement("canvas"),i.resolution=e.resolution||v.RESOLUTION,i.transparent=e.transparent,i.autoDensity=e.autoDensity||e.autoResize||!1,i.preserveDrawingBuffer=e.preserveDrawingBuffer,i.clearBeforeRender=e.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,0],i._backgroundColorString="#000000",i.backgroundColor=e.backgroundColor||i._backgroundColor,i._lastObjectRendered=null,i.plugins={},i}return Nt(r,n),r.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(r.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),r.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},r.prototype.generateTexture=function(t,e,i,o){0===(o=o||t.getLocalBounds(null,!0)).width&&(o.width=1),0===o.height&&(o.height=1);var a=Ke.create({width:0|o.width,height:0|o.height,scaleMode:e,resolution:i});return nn.tx=-o.x,nn.ty=-o.y,this.render(t,a,!1,nn,!!t.parent),a},r.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=ut.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(r.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=Ir(t),_e(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),r}(O()),Me=function(n){function r(t){var e=n.call(this,ut.WEBGL,t)||this;return t=e.options,e.gl=null,e.CONTEXT_UID=0,e.runners={destroy:new ae("destroy"),contextChange:new ae("contextChange"),reset:new ae("reset"),update:new ae("update"),postrender:new ae("postrender"),prerender:new ae("prerender"),resize:new ae("resize")},e.globalUniforms=new Le({projectionMatrix:new Qt},!0),e.addSystem(Lo,"mask").addSystem(_o,"context").addSystem(jo,"state").addSystem(Yo,"shader").addSystem(Vo,"texture").addSystem(To,"geometry").addSystem(bo,"framebuffer").addSystem(Bo,"scissor").addSystem(Uo,"stencil").addSystem(ko,"projection").addSystem(zo,"textureGC").addSystem(mo,"filter").addSystem(Xo,"renderTexture").addSystem(yo,"batch"),e.initPlugins(r.__plugins),t.context?e.context.initFromContext(t.context):e.context.initFromOptions({alpha:!!e.transparent,antialias:t.antialias,premultipliedAlpha:e.transparent&&"notMultiplied"!==e.transparent,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:e.options.powerPreference}),e.renderingToScreen=!0,ti(2===e.context.webGLVersion?"WebGL 2":"WebGL 1"),e.resize(e.options.width,e.options.height),e}return Nt(r,n),r.create=function(t){if(ei())return new r(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},r.prototype.addSystem=function(t,e){e||(e=t.name);var i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var o in this[e]=i,this.runners)this.runners[o].add(i);return this},r.prototype.render=function(t,e,i,o,a){if(this.renderingToScreen=!e,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=o,!this.context.isLost){if(e||(this._lastObjectRendered=t),!a){var s=t.enableTempParent();t.updateTransform(),t.disableTempParent(s)}this.renderTexture.bind(e),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),e&&e.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},r.prototype.resize=function(t,e){n.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},r.prototype.reset=function(){return this.runners.reset.emit(),this},r.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},r.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();n.prototype.destroy.call(this,t),this.gl=null},r.registerPlugin=function(t,e){(r.__plugins=r.__plugins||{})[t]=e},r}(Wo);function $o(n){return Me.create(n)}var Zo="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",on="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",bi=function n(){this.texArray=null,this.blend=0,this.type=g.TRIANGLES,this.start=0,this.size=0,this.data=null},Ti=function(){function n(){this.elements=[],this.ids=[],this.count=0}return n.prototype.clear=function(){for(var r=0;r<this.count;r++)this.elements[r]=null;this.count=0},n}(),Ko=function(){function n(r){this.rawBinaryData=new ArrayBuffer(r),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(n.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),n.prototype.view=function(r){return this[r+"View"]},n.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},n.sizeOf=function(r){switch(r){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(r+" isn't a valid view type")}},n}(),qo=function(n){function r(t){var e=n.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=Be.for2d(),e.size=4*v.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}return Nt(r,n),r.prototype.contextChange=function(){var t=this.renderer.gl;v.PREFER_ENV===N.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),v.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Ro(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},r.prototype.initFlushBuffers=function(){for(var t=r._drawCallPool,e=r._textureArrayPool,i=this.size/4,o=Math.floor(i/this.MAX_TEXTURES)+1;t.length<i;)t.push(new bi);for(;e.length<o;)e.push(new Ti);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},r.prototype.onPrerender=function(){this._flushId=0},r.prototype.render=function(t){!t._texture.valid||(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},r.prototype.buildTexturesAndDrawCalls=function(){var e=this._bufferedTextures,i=this.MAX_TEXTURES,o=r._textureArrayPool,a=this.renderer.batch,s=this._tempBoundTextures,u=this.renderer.textureGC.count,h=++Wt._globalBatch,c=0,f=o[0],l=0;a.copyBoundTextures(s,i);for(var d=0;d<this._bufferSize;++d){var m=e[d];e[d]=null,m._batchEnabled!==h&&(f.count>=i&&(a.boundArray(f,s,h,i),this.buildDrawCalls(f,l,d),l=d,f=o[++c],++h),m._batchEnabled=h,m.touched=u,f.elements[f.count++]=m)}for(f.count>0&&(a.boundArray(f,s,h,i),this.buildDrawCalls(f,l,this._bufferSize),++c,++h),d=0;d<s.length;d++)s[d]=null;Wt._globalBatch=h},r.prototype.buildDrawCalls=function(t,e,i){var o=this,a=o._bufferedElements,s=o._attributeBuffer,u=o._indexBuffer,h=o.vertexSize,c=r._drawCallPool,f=this._dcIndex,l=this._aIndex,d=this._iIndex,m=c[f];m.start=this._iIndex,m.texArray=t;for(var y=e;y<i;++y){var P=a[y],gt=Or[P._texture.baseTexture.alphaMode?1:0][P.blendMode];a[y]=null,e<y&&m.blend!==gt&&(m.size=d-m.start,e=y,(m=c[++f]).texArray=t,m.start=d),this.packInterleavedGeometry(P,s,u,l,d),l+=P.vertexData.length/2*h,d+=P.indices.length,m.blend=gt}e<i&&(m.size=d-m.start,++f),this._dcIndex=f,this._aIndex=l,this._iIndex=d},r.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},r.prototype.updateGeometry=function(){var t=this,e=t._packedGeometries,i=t._attributeBuffer,o=t._indexBuffer;v.CAN_UPLOAD_SAME_BUFFER?(e[this._flushId]._buffer.update(i.rawBinaryData),e[this._flushId]._indexBuffer.update(o),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(i.rawBinaryData),e[this._flushId]._indexBuffer.update(o),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},r.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,i=e.gl,o=e.state,a=r._drawCallPool,s=null,u=0;u<t;u++){var h=a[u],c=h.texArray,f=h.type,l=h.size,d=h.start,m=h.blend;s!==c&&(s=c,this.bindAndClearTexArray(c)),this.state.blendMode=m,o.set(this.state),i.drawElements(f,l,i.UNSIGNED_SHORT,2*d)}},r.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},r.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),v.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},r.prototype.stop=function(){this.flush()},r.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),n.prototype.destroy.call(this)},r.prototype.getAttributeBuffer=function(t){var e=Ct(Math.ceil(t/8)),i=me(e),o=8*e;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var a=this._aBuffers[o];return a||(this._aBuffers[o]=a=new Ko(o*this.vertexSize*4)),a},r.prototype.getIndexBuffer=function(t){var e=Ct(Math.ceil(t/12)),i=me(e),o=12*e;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var a=this._iBuffers[i];return a||(this._iBuffers[i]=a=new Uint16Array(o)),a},r.prototype.packInterleavedGeometry=function(t,e,i,o,a){for(var s=e.uint32View,u=e.float32View,h=o/this.vertexSize,c=t.uvs,f=t.indices,l=t.vertexData,d=t._texture.baseTexture._batchLocation,m=Math.min(t.worldAlpha,1),y=m<1&&t._texture.baseTexture.alphaMode?we(t._tintRGB,m):t._tintRGB+(255*m<<24),P=0;P<l.length;P+=2)u[o++]=l[P],u[o++]=l[P+1],u[o++]=c[P],u[o++]=c[P+1],s[o++]=y,u[o++]=d;for(P=0;P<f.length;P++)i[a++]=h+f[P]},r._drawCallPool=[],r._textureArrayPool=[],r}(Ur),Qo=function(){function n(r,t){if(this.vertexSrc=r,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return n.prototype.generateShader=function(r){if(!this.programCache[r]){for(var t=new Int32Array(r),e=0;e<r;e++)t[e]=e;this.defaultGroupCache[r]=Le.from({uSamplers:t},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+r)).replace(/%forloop%/gi,this.generateSampleSrc(r)),this.programCache[r]=new Gr(this.vertexSrc,i)}var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Qt,default:this.defaultGroupCache[r]};return new Ne(this.programCache[r],o)},n.prototype.generateSampleSrc=function(r){var t="";t+="\n",t+="\n";for(var e=0;e<r;e++)e>0&&(t+="\nelse "),e<r-1&&(t+="if(vTextureId < "+e+".5)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+e+"], vTextureCoord);",t+="\n}";return(t+="\n")+"\n"},n}(),an=function(n){function r(t){void 0===t&&(t=!1);var e=n.call(this)||this;return e._buffer=new ie(null,t,!1),e._indexBuffer=new ie(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,at.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,at.FLOAT).addAttribute("aColor",e._buffer,4,!0,at.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,at.FLOAT).addIndex(e._indexBuffer),e}return Nt(r,n),r}(cr),Jo="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",ta="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",ea=function(){function n(){}return n.create=function(r){var t=Object.assign({vertex:Jo,fragment:ta,geometryClass:an,vertexSize:6},r),e=t.vertex,i=t.fragment,o=t.vertexSize,a=t.geometryClass;return function(s){function u(h){var c=s.call(this,h)||this;return c.shaderGenerator=new Qo(e,i),c.geometryClass=a,c.vertexSize=o,c}return Nt(u,s),u}(qo)},Object.defineProperty(n,"defaultVertexSrc",{get:function(){return Jo},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultFragmentTemplate",{get:function(){return ta},enumerable:!1,configurable:!0}),n}(),ra=ea.create(),jr=function(){function n(r){var t=this;r=Object.assign({forceCanvas:!1},r),this.renderer=$o(r),this.stage=new ye,n._plugins.forEach(function(e){e.init.call(t,r)})}return n.registerPlugin=function(r){n._plugins.push(r)},n.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(n.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),n.prototype.destroy=function(r,t){var e=this,i=n._plugins.slice(0);i.reverse(),i.forEach(function(o){o.destroy.call(e)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(r),this.renderer=null},n}();jr._plugins=[];var Ys=function(){function n(){}return n.init=function(r){var t=this;Object.defineProperty(this,"resizeTo",{set:function(e){window.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){!t._resizeTo||(t.cancelResize(),t._resizeId=requestAnimationFrame(function(){return t.resize()}))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(t._resizeTo){var e,i;if(t.cancelResize(),t._resizeTo===window)e=window.innerWidth,i=window.innerHeight;else{var o=t._resizeTo;e=o.clientWidth,i=o.clientHeight}t.renderer.resize(e,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=r.resizeTo||null},n.destroy=function(){window.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},n}();jr.registerPlugin(Ys);var ia=new Ut,oa=function(){function n(r){this.renderer=r,r.extract=this}return n.prototype.image=function(r,t,e){var i=new Image;return i.src=this.base64(r,t,e),i},n.prototype.base64=function(r,t,e){return this.canvas(r).toDataURL(t,e)},n.prototype.canvas=function(r){var e,i,a,t=this.renderer,o=!1,s=!1;r&&(r instanceof Ke?a=r:(a=this.renderer.generateTexture(r),s=!0)),a?(e=a.baseTexture.resolution,i=a.frame,o=!1,t.renderTexture.bind(a)):(e=this.renderer.resolution,o=!0,(i=ia).width=this.renderer.width,i.height=this.renderer.height,t.renderTexture.bind(null));var u=Math.floor(i.width*e+1e-4),h=Math.floor(i.height*e+1e-4),c=new je(u,h,1),f=new Uint8Array(4*u*h),l=t.gl;l.readPixels(i.x*e,i.y*e,u,h,l.RGBA,l.UNSIGNED_BYTE,f);var d=c.context.getImageData(0,0,u,h);if(n.arrayPostDivide(f,d.data),c.context.putImageData(d,0,0),o){var m=new je(c.width,c.height,1);m.context.scale(1,-1),m.context.drawImage(c.canvas,0,-h),c.destroy(),c=m}return s&&a.destroy(!0),c.canvas},n.prototype.pixels=function(r){var e,i,o,t=this.renderer,a=!1;r&&(r instanceof Ke?o=r:(o=this.renderer.generateTexture(r),a=!0)),o?(e=o.baseTexture.resolution,i=o.frame,t.renderTexture.bind(o)):(e=t.resolution,(i=ia).width=t.width,i.height=t.height,t.renderTexture.bind(null));var s=i.width*e,u=i.height*e,h=new Uint8Array(4*s*u),c=t.gl;return c.readPixels(i.x*e,i.y*e,s,u,c.RGBA,c.UNSIGNED_BYTE,h),a&&o.destroy(!0),n.arrayPostDivide(h,h),h},n.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},n.arrayPostDivide=function(r,t){for(var e=0;e<r.length;e+=4){var i=t[e+3]=r[e+3];0!==i?(t[e]=Math.round(Math.min(255*r[e]/i,255)),t[e+1]=Math.round(Math.min(255*r[e+1]/i,255)),t[e+2]=Math.round(Math.min(255*r[e+2]/i,255))):(t[e]=r[e],t[e+1]=r[e+1],t[e+2]=r[e+2])}},n}(),js=L(9515),aa=L.n(js),zs=L(936),Ce=L.n(zs);function Qe(){}function sn(n,r,t,e){var i=0,o=n.length;!function a(s){s||i===o?t&&t(s):e?setTimeout(function(){r(n[i++],a)},1):r(n[i++],a)}()}function Vs(n){return function(){if(null===n)throw new Error("Callback was already called.");var t=n;n=null,t.apply(this,arguments)}}var un={};function ua(n,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function ha(n,r,t){return r&&ua(n.prototype,r),t&&ua(n,t),n}var $s=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),Ei=null;function Js(){}var At=function(){function n(t,e,i){if("string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(n.STATUS_FLAGS.DATA_URL,0===e.indexOf("data:")),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===i.crossOrigin?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=n.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Js,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new(Ce()),this.onProgress=new(Ce()),this.onComplete=new(Ce()),this.onAfterMiddleware=new(Ce())}n.setExtensionLoadType=function(e,i){fa(n._loadTypeMap,e,i)},n.setExtensionXhrType=function(e,i){fa(n._xhrTypeMap,e,i)};var r=n.prototype;return r.complete=function(){this._clearEvents(),this._finish()},r.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=n.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},r.load=function(e){var i=this;if(!this.isLoading){if(this.isComplete)return void(e&&setTimeout(function(){return e(i)},1));switch(e&&this.onComplete.once(e),this._setFlag(n.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(!1===this.crossOrigin||"string"!=typeof this.crossOrigin)&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case n.LOAD_TYPE.IMAGE:this.type=n.TYPE.IMAGE,this._loadElement("image");break;case n.LOAD_TYPE.AUDIO:this.type=n.TYPE.AUDIO,this._loadSourceElement("audio");break;case n.LOAD_TYPE.VIDEO:this.type=n.TYPE.VIDEO,this._loadSourceElement("video");break;default:$s&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},r._hasFlag=function(e){return 0!=(this._flags&e)},r._setFlag=function(e,i){this._flags=i?this._flags|e:this._flags&~e},r._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},r._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(n.STATUS_FLAGS.COMPLETE,!0),this._setFlag(n.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},r._loadElement=function(e){this.data=this.metadata.loadElement?this.metadata.loadElement:"image"===e&&void 0!==window.Image?new Image:document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},r._loadSourceElement=function(e){if(this.data=this.metadata.loadElement?this.metadata.loadElement:"audio"===e&&void 0!==window.Audio?new Audio:document.createElement(e),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var i=this.metadata.mimeType,o=0;o<this.url.length;++o)this.data.appendChild(this._createSource(e,this.url[o],Array.isArray(i)?i[o]:i));else{var a=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(a)?a[0]:a))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+e)},r._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,e.responseType=this.xhrType===n.XHR_RESPONSE_TYPE.JSON||this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT?n.XHR_RESPONSE_TYPE.TEXT:this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},r._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},r._createSource=function(e,i,o){o||(o=e+"/"+this._getExtension(i));var a=document.createElement("source");return a.src=i,a.type=o,a},r._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},r._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},r._onTimeout=function(){this.abort("Load timed out.")},r._xhrOnError=function(){var e=this.xhr;this.abort(hn(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},r._xhrOnTimeout=function(){this.abort(hn(this.xhr)+" Request timed out.")},r._xhrOnAbort=function(){this.abort(hn(this.xhr)+" Request was aborted by the user.")},r._xhrOnLoad=function(){var e=this.xhr,i="",o=void 0===e.status?200:e.status;if((""===e.responseType||"text"===e.responseType||void 0===e.responseType)&&(i=e.responseText),0===o&&(i.length>0||e.responseType===n.XHR_RESPONSE_TYPE.BUFFER)?o=200:1223===o&&(o=204),2==(o/100|0)){if(this.xhrType===n.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=n.TYPE.TEXT;else if(this.xhrType===n.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=n.TYPE.JSON}catch(h){return void this.abort("Error trying to parse loaded json: "+h)}else if(this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var s=new DOMParser;this.data=s.parseFromString(i,"text/xml")}else{var u=document.createElement("div");u.innerHTML=i,this.data=u}this.type=n.TYPE.XML}catch(h){return void this.abort("Error trying to parse loaded xml: "+h)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},r._determineCrossOrigin=function(e,i){return 0===e.indexOf("data:")?"":window.origin!==window.location.origin?"anonymous":(i=i||window.location,Ei||(Ei=document.createElement("a")),Ei.href=e,(e=aa()(Ei.href,{strictMode:!0})).host!==i.hostname||(e.port||""!==i.port)&&e.port!==i.port||(e.protocol?e.protocol+":":"")!==i.protocol?"anonymous":"")},r._determineXhrType=function(){return n._xhrTypeMap[this.extension]||n.XHR_RESPONSE_TYPE.TEXT},r._determineLoadType=function(){return n._loadTypeMap[this.extension]||n.LOAD_TYPE.XHR},r._getExtension=function(){var e=this.url,i="";if(this.isDataUrl){var o=e.indexOf("/");i=e.substring(o+1,e.indexOf(";",o))}else{var a=e.indexOf("?"),s=e.indexOf("#"),u=Math.min(a>-1?a:e.length,s>-1?s:e.length);i=(e=e.substring(0,u)).substring(e.lastIndexOf(".")+1)}return i.toLowerCase()},r._getMimeFromXhrType=function(e){switch(e){case n.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case n.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case n.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case n.XHR_RESPONSE_TYPE.JSON:return"application/json";default:return"text/plain"}},ha(n,[{key:"isDataUrl",get:function(){return this._hasFlag(n.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(n.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(n.STATUS_FLAGS.LOADING)}}]),n}();function fa(n,r,t){r&&0===r.indexOf(".")&&(r=r.substring(1)),r&&(n[r]=t)}function hn(n){return n.toString().replace("object ","")}At.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},At.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},At.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},At.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},At._loadTypeMap={gif:At.LOAD_TYPE.IMAGE,png:At.LOAD_TYPE.IMAGE,bmp:At.LOAD_TYPE.IMAGE,jpg:At.LOAD_TYPE.IMAGE,jpeg:At.LOAD_TYPE.IMAGE,tif:At.LOAD_TYPE.IMAGE,tiff:At.LOAD_TYPE.IMAGE,webp:At.LOAD_TYPE.IMAGE,tga:At.LOAD_TYPE.IMAGE,svg:At.LOAD_TYPE.IMAGE,"svg+xml":At.LOAD_TYPE.IMAGE,mp3:At.LOAD_TYPE.AUDIO,ogg:At.LOAD_TYPE.AUDIO,wav:At.LOAD_TYPE.AUDIO,mp4:At.LOAD_TYPE.VIDEO,webm:At.LOAD_TYPE.VIDEO},At._xhrTypeMap={xhtml:At.XHR_RESPONSE_TYPE.DOCUMENT,html:At.XHR_RESPONSE_TYPE.DOCUMENT,htm:At.XHR_RESPONSE_TYPE.DOCUMENT,xml:At.XHR_RESPONSE_TYPE.DOCUMENT,tmx:At.XHR_RESPONSE_TYPE.DOCUMENT,svg:At.XHR_RESPONSE_TYPE.DOCUMENT,tsx:At.XHR_RESPONSE_TYPE.DOCUMENT,gif:At.XHR_RESPONSE_TYPE.BLOB,png:At.XHR_RESPONSE_TYPE.BLOB,bmp:At.XHR_RESPONSE_TYPE.BLOB,jpg:At.XHR_RESPONSE_TYPE.BLOB,jpeg:At.XHR_RESPONSE_TYPE.BLOB,tif:At.XHR_RESPONSE_TYPE.BLOB,tiff:At.XHR_RESPONSE_TYPE.BLOB,webp:At.XHR_RESPONSE_TYPE.BLOB,tga:At.XHR_RESPONSE_TYPE.BLOB,json:At.XHR_RESPONSE_TYPE.JSON,text:At.XHR_RESPONSE_TYPE.TEXT,txt:At.XHR_RESPONSE_TYPE.TEXT,ttf:At.XHR_RESPONSE_TYPE.BUFFER,otf:At.XHR_RESPONSE_TYPE.BUFFER},At.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var ca=window.URL||window.webkitURL,iu={caching:function Ws(n,r){var t=this;un[n.url]?(n.data=un[n.url],n.complete()):n.onComplete.once(function(){return un[t.url]=t.data}),r()},parsing:function ru(n,r){if(n.data){if(n.xhr&&n.xhrType===At.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof n.data){if(0===n.data.type.indexOf("image")){var e=ca.createObjectURL(n.data);return n.blob=n.data,n.data=new Image,n.data.src=e,n.type=At.TYPE.IMAGE,void(n.data.onload=function(){ca.revokeObjectURL(e),n.data.onload=null,r()})}}else{var t=n.xhr.getResponseHeader("content-type");if(t&&0===t.indexOf("image"))return n.data=new Image,n.data.src="data:"+t+";base64,"+function eu(n){for(var r="",t=0;t<n.length;){for(var e=[0,0,0],i=[0,0,0,0],o=0;o<e.length;++o)e[o]=t<n.length?255&n.charCodeAt(t++):0;switch(i[0]=e[0]>>2,i[1]=(3&e[0])<<4|e[1]>>4,i[2]=(15&e[1])<<2|e[2]>>6,i[3]=63&e[2],t-(n.length-1)){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64}for(var s=0;s<i.length;++s)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i[s])}return r}(n.xhr.responseText),n.type=At.TYPE.IMAGE,void(n.data.onload=function(){n.data.onload=null,r()})}r()}else r()}},nu=/(#[\w-]+)?$/,Re=function(){function n(t,e){var i=this;void 0===t&&(t=""),void 0===e&&(e=10),this.baseUrl=t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(s,u){return i._loadResource(s,u)},this._queue=function sa(n,r){if(null==r)r=1;else if(0===r)throw new Error("Concurrency must not be zero");var t=0,e={_tasks:[],concurrency:r,saturated:Qe,unsaturated:Qe,buffer:r/4,empty:Qe,drain:Qe,error:Qe,started:!1,paused:!1,push:function(s,u){i(s,!1,u)},kill:function(){t=0,e.drain=Qe,e.started=!1,e._tasks=[]},unshift:function(s,u){i(s,!0,u)},process:function(){for(;!e.paused&&t<e.concurrency&&e._tasks.length;){var s=e._tasks.shift();0===e._tasks.length&&e.empty(),(t+=1)===e.concurrency&&e.saturated(),n(s.data,Vs(o(s)))}},length:function(){return e._tasks.length},running:function(){return t},idle:function(){return e._tasks.length+t===0},pause:function(){!0!==e.paused&&(e.paused=!0)},resume:function(){if(!1!==e.paused){e.paused=!1;for(var s=1;s<=e.concurrency;s++)e.process()}}};function i(a,s,u){if(null!=u&&"function"!=typeof u)throw new Error("task callback must be a function");if(e.started=!0,null==a&&e.idle())setTimeout(function(){return e.drain()},1);else{var h={data:a,callback:"function"==typeof u?u:Qe};s?e._tasks.unshift(h):e._tasks.push(h),setTimeout(function(){return e.process()},1)}}function o(a){return function(){t-=1,a.callback.apply(a,arguments),null!=arguments[0]&&e.error(arguments[0],a.data),t<=e.concurrency-e.buffer&&e.unsaturated(),e.idle()&&e.drain(),e.process()}}return e}(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new(Ce()),this.onError=new(Ce()),this.onLoad=new(Ce()),this.onStart=new(Ce()),this.onComplete=new(Ce());for(var o=0;o<n._defaultBeforeMiddleware.length;++o)this.pre(n._defaultBeforeMiddleware[o]);for(var a=0;a<n._defaultAfterMiddleware.length;++a)this.use(n._defaultAfterMiddleware[a])}var r=n.prototype;return r.add=function(e,i,o,a){if(Array.isArray(e)){for(var s=0;s<e.length;++s)this.add(e[s]);return this}if("object"==typeof e&&(a=i||e.callback||e.onComplete,o=e,i=e.url,e=e.name||e.key||e.url),"string"!=typeof i&&(a=o,o=i,i=e),"string"!=typeof i)throw new Error("No url passed to add resource to loader.");if("function"==typeof o&&(a=o,o=null),this.loading&&(!o||!o.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(i=this._prepareUrl(i),this.resources[e]=new At(e,i,o),"function"==typeof a&&this.resources[e].onAfterMiddleware.once(a),this.loading){for(var u=o.parentResource,h=[],c=0;c<u.children.length;++c)u.children[c].isComplete||h.push(u.children[c]);var l=u.progressChunk*(h.length+1)/(h.length+2);u.children.push(this.resources[e]),u.progressChunk=l;for(var d=0;d<h.length;++d)h[d].progressChunk=l;this.resources[e].progressChunk=l}return this._queue.push(this.resources[e]),this},r.pre=function(e){return this._beforeMiddleware.push(e),this},r.use=function(e){return this._afterMiddleware.push(e),this},r.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var i=this.resources[e];i._onLoadBinding&&i._onLoadBinding.detach(),i.isLoading&&i.abort()}return this.resources={},this},r.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var o=100/this._queue._tasks.length,a=0;a<this._queue._tasks.length;++a)this._queue._tasks[a].data.progressChunk=o;this._onStart(),this._queue.resume()}return this},r._prepareUrl=function(e){var o,i=aa()(e,{strictMode:!0});if(o=i.protocol||!i.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var a=nu.exec(o)[0];-1!==(o=o.substr(0,o.length-a.length)).indexOf("?")?o+="&"+this.defaultQueryString:o+="?"+this.defaultQueryString,o+=a}return o},r._loadResource=function(e,i){var o=this;e._dequeue=i,sn(this._beforeMiddleware,function(a,s){a.call(o,e,function(){s(e.isComplete?{}:null)})},function(){e.isComplete?o._onLoad(e):(e._onLoadBinding=e.onComplete.once(o._onLoad,o),e.load())},!0)},r._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},r._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},r._onLoad=function(e){var i=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),sn(this._afterMiddleware,function(o,a){o.call(i,e,a)},function(){e.onAfterMiddleware.dispatch(e),i.progress=Math.min(100,i.progress+e.progressChunk),i.onProgress.dispatch(i,e),e.error?i.onError.dispatch(e.error,i,e):i.onLoad.dispatch(i,e),i._resourcesParsing.splice(i._resourcesParsing.indexOf(e),1),i._queue.idle()&&0===i._resourcesParsing.length&&i._onComplete()},!0)},ha(n,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e}}]),n}();Re._defaultBeforeMiddleware=[],Re._defaultAfterMiddleware=[],Re.pre=function(r){return Re._defaultBeforeMiddleware.push(r),Re},Re.use=function(r){return Re._defaultAfterMiddleware.push(r),Re};var zr=At,fn=function(n,r){return(fn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)},da=function(){function n(){}return n.use=function(r,t){r.data&&r.type===At.TYPE.IMAGE&&(r.texture=Rt.fromLoader(r.data,r.url,r.name)),t()},n}(),Je=function(n){function r(t,e){for(var i=n.call(this,t,e)||this,o=0;o<r._plugins.length;++o){var a=r._plugins[o],s=a.pre,u=a.use;s&&i.pre(s),u&&i.use(u)}return i._protected=!1,i}return function ou(n,r){function t(){this.constructor=n}fn(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}(r,n),r.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(r,"shared",{get:function(){var t=r._shared;return t||((t=new r)._protected=!0,r._shared=t),t},enumerable:!1,configurable:!0}),r.registerPlugin=function(t){return r._plugins.push(t),t.add&&t.add(),r},r._plugins=[],r}(Re);Je.registerPlugin({use:iu.parsing}),Je.registerPlugin(da);var pa=function(){function n(){}return n.init=function(r){r=Object.assign({sharedLoader:!1},r),this.loader=r.sharedLoader?Je.shared:new Je},n.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},n}(),cn=function(n,r){return(cn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)};function va(n,r){function t(){this.constructor=n}cn(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}var au=function(n){function r(t,e,i,o){void 0===t&&(t=1500),void 0===i&&(i=16384),void 0===o&&(o=!1);var a=n.call(this)||this;return i>16384&&(i=16384),a._properties=[!1,!0,!1,!1,!1],a._maxSize=t,a._batchSize=i,a._buffers=null,a._bufferUpdateIDs=[],a._updateID=0,a.interactiveChildren=!1,a.blendMode=F.NORMAL,a.autoResize=o,a.roundPixels=!0,a.baseTexture=null,a.setProperties(e),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}return va(r,n),r.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},r.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,_e(t,this.tintRgb)},enumerable:!1,configurable:!0}),r.prototype.render=function(t){var e=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},r.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},r.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},r.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},r}(ye),ma=function(){function n(r,t,e){this.geometry=new cr,this.indexBuffer=null,this.size=e,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<r.length;++i){var o=r[i];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||at.FLOAT,offset:o.offset},t[i]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return n.prototype.initBuffers=function(){var r=this.geometry,t=0;this.indexBuffer=new ie(q(this.size),!0,!0),r.addIndex(this.indexBuffer),this.dynamicStride=0;for(var e=0;e<this.dynamicProperties.length;++e)(i=this.dynamicProperties[e]).offset=t,t+=i.size,this.dynamicStride+=i.size;var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=new ie(this.dynamicData,!1,!1);var a=0;for(this.staticStride=0,e=0;e<this.staticProperties.length;++e)(i=this.staticProperties[e]).offset=a,a+=i.size,this.staticStride+=i.size;var s=new ArrayBuffer(this.size*this.staticStride*4*4);for(this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new ie(this.staticData,!0,!1),e=0;e<this.dynamicProperties.length;++e)r.addAttribute((i=this.dynamicProperties[e]).attributeName,this.dynamicBuffer,0,i.type===at.UNSIGNED_BYTE,i.type,4*this.dynamicStride,4*i.offset);for(e=0;e<this.staticProperties.length;++e){var i;r.addAttribute((i=this.staticProperties[e]).attributeName,this.staticBuffer,0,i.type===at.UNSIGNED_BYTE,i.type,4*this.staticStride,4*i.offset)}},n.prototype.uploadDynamic=function(r,t,e){for(var i=0;i<this.dynamicProperties.length;i++){var o=this.dynamicProperties[i];o.uploadFunction(r,t,e,o.type===at.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++},n.prototype.uploadStatic=function(r,t,e){for(var i=0;i<this.staticProperties.length;i++){var o=this.staticProperties[i];o.uploadFunction(r,t,e,o.type===at.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++},n.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},n}(),ya=function(n){function r(t){var e=n.call(this,t)||this;return e.shader=null,e.properties=null,e.tempMatrix=new Qt,e.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:e.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:e.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:e.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:e.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:at.UNSIGNED_BYTE,uploadFunction:e.uploadTint,offset:0}],e.shader=Ne.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),e.state=Be.for2d(),e}return va(r,n),r.prototype.render=function(t){var e=t.children,i=t._maxSize,o=t._batchSize,a=this.renderer,s=e.length;if(0!==s){s>i&&!t.autoResize&&(s=i);var u=t._buffers;u||(u=t._buffers=this.generateBuffers(t));var h=e[0]._texture.baseTexture;this.state.blendMode=Mr(t.blendMode,h.alphaMode),a.state.set(this.state);var c=a.gl,f=t.worldTransform.copyTo(this.tempMatrix);f.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=or(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,h.alphaMode),this.shader.uniforms.uSampler=h,this.renderer.shader.bind(this.shader);for(var l=!1,d=0,m=0;d<s;d+=o,m+=1){var y=s-d;y>o&&(y=o),m>=u.length&&u.push(this._generateOneMoreBuffer(t));var P=u[m];P.uploadDynamic(e,d,y),(l=l||P._updateID<(t._bufferUpdateIDs[m]||0))&&(P._updateID=t._updateID,P.uploadStatic(e,d,y)),a.geometry.bind(P.geometry),c.drawElements(c.TRIANGLES,6*y,c.UNSIGNED_SHORT,0)}}},r.prototype.generateBuffers=function(t){for(var e=[],i=t._maxSize,o=t._batchSize,a=t._properties,s=0;s<i;s+=o)e.push(new ma(this.properties,a,o));return e},r.prototype._generateOneMoreBuffer=function(t){return new ma(this.properties,t._properties,t._batchSize)},r.prototype.uploadVertices=function(t,e,i,o,a,s){for(var u=0,h=0,c=0,f=0,l=0;l<i;++l){var d=t[e+l],m=d._texture,y=d.scale.x,P=d.scale.y,tt=m.trim,gt=m.orig;tt?(u=(h=tt.x-d.anchor.x*gt.width)+tt.width,c=(f=tt.y-d.anchor.y*gt.height)+tt.height):(u=gt.width*(1-d.anchor.x),h=gt.width*-d.anchor.x,c=gt.height*(1-d.anchor.y),f=gt.height*-d.anchor.y),o[s]=h*y,o[s+1]=f*P,o[s+a]=u*y,o[s+a+1]=f*P,o[s+2*a]=u*y,o[s+2*a+1]=c*P,o[s+3*a]=h*y,o[s+3*a+1]=c*P,s+=4*a}},r.prototype.uploadPosition=function(t,e,i,o,a,s){for(var u=0;u<i;u++){var h=t[e+u].position;o[s]=h.x,o[s+1]=h.y,o[s+a]=h.x,o[s+a+1]=h.y,o[s+2*a]=h.x,o[s+2*a+1]=h.y,o[s+3*a]=h.x,o[s+3*a+1]=h.y,s+=4*a}},r.prototype.uploadRotation=function(t,e,i,o,a,s){for(var u=0;u<i;u++){var h=t[e+u].rotation;o[s]=h,o[s+a]=h,o[s+2*a]=h,o[s+3*a]=h,s+=4*a}},r.prototype.uploadUvs=function(t,e,i,o,a,s){for(var u=0;u<i;++u){var h=t[e+u]._texture._uvs;h?(o[s]=h.x0,o[s+1]=h.y0,o[s+a]=h.x1,o[s+a+1]=h.y1,o[s+2*a]=h.x2,o[s+2*a+1]=h.y2,o[s+3*a]=h.x3,o[s+3*a+1]=h.y3,s+=4*a):(o[s]=0,o[s+1]=0,o[s+a]=0,o[s+a+1]=0,o[s+2*a]=0,o[s+2*a+1]=0,o[s+3*a]=0,o[s+3*a+1]=0,s+=4*a)}},r.prototype.uploadTint=function(t,e,i,o,a,s){for(var u=0;u<i;++u){var h=t[e+u],f=h.alpha,l=f<1&&h._texture.baseTexture.alphaMode>0?we(h._tintRGB,f):h._tintRGB+(255*f<<24);o[s]=l,o[s+a]=l,o[s+2*a]=l,o[s+3*a]=l,s+=4*a}},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},r}(Ur),xe=(()=>{return(n=xe||(xe={})).MITER="miter",n.BEVEL="bevel",n.ROUND="round",xe;var n})(),be=(()=>{return(n=be||(be={})).BUTT="butt",n.ROUND="round",n.SQUARE="square",be;var n})(),dr={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(n,r){if(void 0===r&&(r=20),!this.adaptive||!n||isNaN(n))return r;var t=Math.ceil(n/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}},dn=function(){function n(){this.color=16777215,this.alpha=1,this.texture=Rt.WHITE,this.matrix=null,this.visible=!1,this.reset()}return n.prototype.clone=function(){var r=new n;return r.color=this.color,r.alpha=this.alpha,r.texture=this.texture,r.matrix=this.matrix,r.visible=this.visible,r},n.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Rt.WHITE,this.matrix=null,this.visible=!1},n.prototype.destroy=function(){this.texture=null,this.matrix=null},n}(),pn=function(n,r){return(pn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)};function Si(n,r){function t(){this.constructor=n}pn(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}var vn={build:function(n){n.points=n.shape.points.slice()},triangulate:function(n,r){var t=n.points,e=n.holes,i=r.points,o=r.indices;if(t.length>=6){for(var a=[],s=0;s<e.length;s++){var u=e[s];a.push(t.length/2),t=t.concat(u.points)}var h=S()(t,a,2);if(!h)return;var c=i.length/2;for(s=0;s<h.length;s+=3)o.push(h[s]+c),o.push(h[s+1]+c),o.push(h[s+2]+c);for(s=0;s<t.length;s++)i.push(t[s])}}},mn={build:function(n){var o,a,r=n.shape,t=n.points,e=r.x,i=r.y;if(t.length=0,n.type===jt.CIRC)o=r.radius,a=r.radius;else{var s=n.shape;o=s.width,a=s.height}if(0!==o&&0!==a){var u=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(o+a));u/=2.3;for(var h=2*Math.PI/u,c=0;c<u-.5;c++)t.push(e+Math.sin(-h*c)*o,i+Math.cos(-h*c)*a);t.push(t[0],t[1])}},triangulate:function(n,r){var t=n.points,e=r.points,i=r.indices,o=e.length/2,a=o,s=n.shape,u=n.matrix,h=s.x,c=s.y;e.push(n.matrix?u.a*h+u.c*c+u.tx:h,n.matrix?u.b*h+u.d*c+u.ty:c);for(var f=0;f<t.length;f+=2)e.push(t[f],t[f+1]),i.push(o++,a,o)}},ga={build:function(n){var r=n.shape,t=r.x,e=r.y,i=r.width,o=r.height,a=n.points;a.length=0,a.push(t,e,t+i,e,t+i,e+o,t,e+o)},triangulate:function(n,r){var t=n.points,e=r.points,i=e.length/2;e.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),r.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};function pr(n,r,t){return n+(r-n)*t}function wi(n,r,t,e,i,o,a){void 0===a&&(a=[]);for(var u=a,h=0,c=0,f=0,l=0,d=0,m=0,y=0,P=0;y<=20;++y)h=pr(n,t,P=y/20),c=pr(r,e,P),f=pr(t,i,P),l=pr(e,o,P),d=pr(h,f,P),m=pr(c,l,P),u.push(d,m);return u}var _a={build:function(n){var r=n.shape,t=n.points,e=r.x,i=r.y,o=r.width,a=r.height,s=Math.max(0,Math.min(r.radius,Math.min(o,a)/2));t.length=0,s?(wi(e,i+s,e,i,e+s,i,t),wi(e+o-s,i,e+o,i,e+o,i+s,t),wi(e+o,i+a-s,e+o,i+a,e+o-s,i+a,t),wi(e+s,i+a,e,i+a,e,i+a-s,t)):t.push(e,i,e+o,i,e+o,i+a,e,i+a)},triangulate:function(n,r){for(var t=n.points,e=r.points,i=r.indices,o=e.length/2,a=S()(t,null,2),s=0,u=a.length;s<u;s+=3)i.push(a[s]+o),i.push(a[s+1]+o),i.push(a[s+2]+o);for(s=0,u=t.length;s<u;s++)e.push(t[s],t[++s])}};function xa(n,r,t,e,i,o,a,s){var l,d;a?(l=e,d=-t):(l=-e,d=t);var P=n+t*o+l,tt=r+e*o+d;return s.push(n-t*i+l,r-e*i+d),s.push(P,tt),2}function vr(n,r,t,e,i,o,a,s){var u=t-n,h=e-r,c=Math.atan2(u,h),f=Math.atan2(i-n,o-r);s&&c<f?c+=2*Math.PI:!s&&c>f&&(f+=2*Math.PI);var l=c,d=f-c,m=Math.abs(d),y=Math.sqrt(u*u+h*h),P=1+(15*m*Math.sqrt(y)/Math.PI>>0),tt=d/P;if(l+=tt,s){a.push(n,r),a.push(t,e);for(var gt=1,st=l;gt<P;gt++,st+=tt)a.push(n,r),a.push(n+Math.sin(st)*y,r+Math.cos(st)*y);a.push(n,r),a.push(i,o)}else{for(a.push(t,e),a.push(n,r),gt=1,st=l;gt<P;gt++,st+=tt)a.push(n+Math.sin(st)*y,r+Math.cos(st)*y),a.push(n,r);a.push(i,o),a.push(n,r)}return 2*P}function yn(n,r){n.lineStyle.native?function lu(n,r){var t=0,e=n.shape,i=n.points||e.points,o=e.type!==jt.POLY||e.closeStroke;if(0!==i.length){var a=r.points,s=r.indices,u=i.length/2,h=a.length/2,c=h;for(a.push(i[0],i[1]),t=1;t<u;t++)a.push(i[2*t],i[2*t+1]),s.push(c,c+1),c++;o&&s.push(c,h)}}(n,r):function hu(n,r){var t=n.shape,e=n.points||t.points.slice(),i=r.closePointEps;if(0!==e.length){var o=n.lineStyle,a=new ee(e[0],e[1]),s=new ee(e[e.length-2],e[e.length-1]),u=t.type!==jt.POLY||t.closeStroke,h=Math.abs(a.x-s.x)<i&&Math.abs(a.y-s.y)<i;if(u){e=e.slice(),h&&(e.pop(),e.pop(),s.set(e[e.length-2],e[e.length-1]));var c=.5*(a.x+s.x),f=.5*(s.y+a.y);e.unshift(c,f),e.push(c,f)}var l=r.points,d=e.length/2,m=e.length,y=l.length/2,P=o.width/2,tt=P*P,gt=o.miterLimit*o.miterLimit,st=e[0],bt=e[1],vt=e[2],pt=e[3],Ft=0,Bt=0,Tt=-(bt-pt),wt=st-vt,Ht=0,zt=0,ne=Math.sqrt(Tt*Tt+wt*wt);Tt/=ne,wt/=ne,Tt*=P,wt*=P;var ke=o.alignment,Ot=2*(1-ke),Mt=2*ke;u||(o.cap===be.ROUND?m+=vr(st-Tt*(Ot-Mt)*.5,bt-wt*(Ot-Mt)*.5,st-Tt*Ot,bt-wt*Ot,st+Tt*Mt,bt+wt*Mt,l,!0)+2:o.cap===be.SQUARE&&(m+=xa(st,bt,Tt,wt,Ot,Mt,!0,l))),l.push(st-Tt*Ot,bt-wt*Ot),l.push(st+Tt*Mt,bt+wt*Mt);for(var Pt=1;Pt<d-1;++Pt){Ft=e[2*(Pt+1)],Bt=e[2*(Pt+1)+1],Tt=-((bt=e[2*(Pt-1)+1])-(pt=e[2*Pt+1])),wt=(st=e[2*(Pt-1)])-(vt=e[2*Pt]),Tt/=ne=Math.sqrt(Tt*Tt+wt*wt),wt/=ne,Tt*=P,wt*=P,Ht=-(pt-Bt),zt=vt-Ft,Ht/=ne=Math.sqrt(Ht*Ht+zt*zt),zt/=ne,Ht*=P,zt*=P;var br=vt-st,Tr=bt-pt,Er=vt-Ft,Xe=Bt-pt,Te=Tr*Er-Xe*br,ir=Te<0;if(Math.abs(Te)<.1)l.push(vt-Tt*Ot,pt-wt*Ot),l.push(vt+Tt*Mt,pt+wt*Mt);else{var Qr=(-Tt+st)*(-wt+pt)-(-Tt+vt)*(-wt+bt),Sr=(-Ht+Ft)*(-zt+pt)-(-Ht+vt)*(-zt+Bt),Ge=(br*Sr-Er*Qr)/Te,De=(Xe*Qr-Tr*Sr)/Te,He=(Ge-vt)*(Ge-vt)+(De-pt)*(De-pt),Yt=vt+(Ge-vt)*Ot,ve=pt+(De-pt)*Ot,he=vt-(Ge-vt)*Mt,kt=pt-(De-pt)*Mt,nr=ir?Ot:Mt;He<=Math.min(br*br+Tr*Tr,Er*Er+Xe*Xe)+nr*nr*tt?o.join===xe.BEVEL||He/tt>gt?(ir?(l.push(Yt,ve),l.push(vt+Tt*Mt,pt+wt*Mt),l.push(Yt,ve),l.push(vt+Ht*Mt,pt+zt*Mt)):(l.push(vt-Tt*Ot,pt-wt*Ot),l.push(he,kt),l.push(vt-Ht*Ot,pt-zt*Ot),l.push(he,kt)),m+=2):o.join===xe.ROUND?ir?(l.push(Yt,ve),l.push(vt+Tt*Mt,pt+wt*Mt),m+=vr(vt,pt,vt+Tt*Mt,pt+wt*Mt,vt+Ht*Mt,pt+zt*Mt,l,!0)+4,l.push(Yt,ve),l.push(vt+Ht*Mt,pt+zt*Mt)):(l.push(vt-Tt*Ot,pt-wt*Ot),l.push(he,kt),m+=vr(vt,pt,vt-Tt*Ot,pt-wt*Ot,vt-Ht*Ot,pt-zt*Ot,l,!1)+4,l.push(vt-Ht*Ot,pt-zt*Ot),l.push(he,kt)):(l.push(Yt,ve),l.push(he,kt)):(l.push(vt-Tt*Ot,pt-wt*Ot),l.push(vt+Tt*Mt,pt+wt*Mt),o.join===xe.BEVEL||He/tt>gt||(o.join===xe.ROUND?m+=ir?vr(vt,pt,vt+Tt*Mt,pt+wt*Mt,vt+Ht*Mt,pt+zt*Mt,l,!0)+2:vr(vt,pt,vt-Tt*Ot,pt-wt*Ot,vt-Ht*Ot,pt-zt*Ot,l,!1)+2:(ir?(l.push(he,kt),l.push(he,kt)):(l.push(Yt,ve),l.push(Yt,ve)),m+=2)),l.push(vt-Ht*Ot,pt-zt*Ot),l.push(vt+Ht*Mt,pt+zt*Mt),m+=2)}}Tt=-((bt=e[2*(d-2)+1])-(pt=e[2*(d-1)+1])),wt=(st=e[2*(d-2)])-(vt=e[2*(d-1)]),Tt/=ne=Math.sqrt(Tt*Tt+wt*wt),wt/=ne,l.push(vt-(Tt*=P)*Ot,pt-(wt*=P)*Ot),l.push(vt+Tt*Mt,pt+wt*Mt),u||(o.cap===be.ROUND?m+=vr(vt-Tt*(Ot-Mt)*.5,pt-wt*(Ot-Mt)*.5,vt-Tt*Ot,pt-wt*Ot,vt+Tt*Mt,pt+wt*Mt,l,!1)+2:o.cap===be.SQUARE&&(m+=xa(vt,pt,Tt,wt,Ot,Mt,!1,l)));var Ci=r.indices,Ri=dr.epsilon*dr.epsilon;for(Pt=y;Pt<m+y-2;++Pt)st=l[2*Pt],bt=l[2*Pt+1],vt=l[2*(Pt+1)],pt=l[2*(Pt+1)+1],Ft=l[2*(Pt+2)],Bt=l[2*(Pt+2)+1],!(Math.abs(st*(pt-Bt)+vt*(Bt-bt)+Ft*(bt-pt))<Ri)&&Ci.push(Pt,Pt+1,Pt+2)}}(n,r)}var tr,ba=function(n){function r(t,e,i,o,a,s){void 0===s&&(s=0),a=a||o/2;for(var h=-1*Math.PI/2+s,c=2*i,f=Ie/c,l=[],d=0;d<c;d++){var m=d%2?a:o,y=d*f+h;l.push(t+m*Math.cos(y),e+m*Math.sin(y))}return n.call(this,l)||this}return Si(r,n),r}(lr),gn=function(){function n(){}return n.curveTo=function(r,t,e,i,o,a){var h=a[a.length-1]-t,c=a[a.length-2]-r,f=i-t,l=e-r,d=Math.abs(h*l-c*f);if(d<1e-8||0===o)return(a[a.length-2]!==r||a[a.length-1]!==t)&&a.push(r,t),null;var m=h*h+c*c,y=f*f+l*l,P=h*f+c*l,tt=o*Math.sqrt(m)/d,gt=o*Math.sqrt(y)/d,st=tt*P/m,bt=gt*P/y,vt=tt*l+gt*c,pt=tt*f+gt*h,Tt=l*(tt+bt),wt=f*(tt+bt);return{cx:vt+r,cy:pt+t,radius:o,startAngle:Math.atan2(h*(gt+st)-pt,c*(gt+st)-vt),endAngle:Math.atan2(wt-pt,Tt-vt),anticlockwise:c*f>l*h}},n.arc=function(r,t,e,i,o,a,s,u,h){for(var c=s-a,f=dr._segmentsCount(Math.abs(c)*o,40*Math.ceil(Math.abs(c)/Ie)),l=c/(2*f),d=2*l,m=Math.cos(l),y=Math.sin(l),P=f-1,tt=P%1/P,gt=0;gt<=P;++gt){var bt=l+a+d*(gt+tt*gt),vt=Math.cos(bt),pt=-Math.sin(bt);h.push((m*vt+y*pt)*o+e,(m*-pt+y*vt)*o+i)}},n}(),Ta=function(){function n(){}return n.curveLength=function(r,t,e,i,o,a,s,u){for(var c=0,f=0,l=0,d=0,m=0,y=0,P=0,tt=0,gt=0,st=0,bt=0,vt=r,pt=t,Ft=1;Ft<=10;++Ft)st=vt-(tt=(P=(y=(m=1-(f=Ft/10))*m)*m)*r+3*y*f*e+3*m*(l=f*f)*o+(d=l*f)*s),bt=pt-(gt=P*t+3*y*f*i+3*m*l*a+d*u),vt=tt,pt=gt,c+=Math.sqrt(st*st+bt*bt);return c},n.curveTo=function(r,t,e,i,o,a,s){var u=s[s.length-2],h=s[s.length-1];s.length-=2;var c=dr._segmentsCount(n.curveLength(u,h,r,t,e,i,o,a)),f=0,l=0,d=0,m=0,y=0;s.push(u,h);for(var P=1,tt=0;P<=c;++P)s.push((d=(l=(f=1-(tt=P/c))*f)*f)*u+3*l*tt*r+3*f*(m=tt*tt)*e+(y=m*tt)*o,d*h+3*l*tt*t+3*f*m*i+y*a)},n}(),Ea=function(){function n(){}return n.curveLength=function(r,t,e,i,o,a){var s=r-2*e+o,u=t-2*i+a,h=2*e-2*r,c=2*i-2*t,f=4*(s*s+u*u),l=4*(s*h+u*c),d=h*h+c*c,m=2*Math.sqrt(f+l+d),y=Math.sqrt(f),P=2*f*y,tt=2*Math.sqrt(d),gt=l/y;return(P*m+y*l*(m-tt)+(4*d*f-l*l)*Math.log((2*y+gt+m)/(gt+tt)))/(4*P)},n.curveTo=function(r,t,e,i,o){for(var a=o[o.length-2],s=o[o.length-1],u=dr._segmentsCount(n.curveLength(a,s,r,t,e,i)),h=0,c=0,f=1;f<=u;++f){var l=f/u;o.push((h=a+(r-a)*l)+(r+(e-r)*l-h)*l,(c=s+(t-s)*l)+(t+(i-t)*l-c)*l)}},n}(),Sa=function(){function n(){this.reset()}return n.prototype.begin=function(r,t,e){this.reset(),this.style=r,this.start=t,this.attribStart=e},n.prototype.end=function(r,t){this.attribSize=t-this.attribStart,this.size=r-this.start},n.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},n}(),Pi=((tr={})[jt.POLY]=vn,tr[jt.CIRC]=mn,tr[jt.ELIP]=mn,tr[jt.RECT]=ga,tr[jt.RREC]=_a,tr),_n=[],Vr=[],fu={buildPoly:vn,buildCircle:mn,buildRectangle:ga,buildRoundedRectangle:_a,FILL_COMMANDS:Pi,BATCH_POOL:_n,DRAW_CALL_POOL:Vr,buildLine:yn,Star:ba,ArcUtils:gn,BezierUtils:Ta,QuadraticUtils:Ea,BatchPart:Sa},xn=function(){function n(r,t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),this.shape=r,this.lineStyle=e,this.fillStyle=t,this.matrix=i,this.type=r.type,this.points=[],this.holes=[]}return n.prototype.clone=function(){return new n(this.shape,this.fillStyle,this.lineStyle,this.matrix)},n.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},n}(),mr=new ee,cu=new Nr,wa=function(n){function r(){var t=n.call(this)||this;return t.uvsFloat32=null,t.indicesUint16=null,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.dirty=0,t.batchDirty=-1,t.cacheDirty=-1,t.clearDirty=0,t.drawCalls=[],t.batches=[],t.shapeIndex=0,t._bounds=new Nr,t.boundsDirty=-1,t.boundsPadding=0,t.batchable=!1,t.indicesUint16=null,t.uvsFloat32=null,t.closePointEps=1e-4,t}return Si(r,n),Object.defineProperty(r.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),r.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Vr.push(this.drawCalls[t]);for(this.drawCalls.length=0,t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),_n.push(e)}this.batches.length=0},r.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},r.prototype.drawShape=function(t,e,i,o){void 0===e&&(e=null),void 0===i&&(i=null),void 0===o&&(o=null);var a=new xn(t,e,i,o);return this.graphicsData.push(a),this.dirty++,this},r.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var i=new xn(t,null,null,e),o=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=o.lineStyle,o.holes.push(i),this.dirty++,this},r.prototype.destroy=function(){n.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},r.prototype.containsPoint=function(t){for(var e=this.graphicsData,i=0;i<e.length;++i){var o=e[i];if(o.fillStyle.visible&&o.shape&&(o.matrix?o.matrix.applyInverse(t,mr):mr.copyFrom(t),o.shape.contains(mr.x,mr.y))){var a=!1;if(o.holes)for(var s=0;s<o.holes.length;s++)if(o.holes[s].shape.contains(mr.x,mr.y)){a=!0;break}if(!a)return!0}}return!1},r.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,i=this.graphicsData,o=null,a=null;this.batches.length>0&&(a=(o=this.batches[this.batches.length-1]).style);for(var s=this.shapeIndex;s<i.length;s++){this.shapeIndex++;var u=i[s],h=u.fillStyle,c=u.lineStyle;Pi[u.type].build(u),u.matrix&&this.transformPoints(u.points,u.matrix);for(var l=0;l<2;l++){var d=0===l?h:c;if(d.visible){var y=this.indices.length,P=this.points.length/2;d.texture.baseTexture.wrapMode=Et.REPEAT,0===l?this.processFill(u):this.processLine(u);var tt=this.points.length/2-P;0!==tt&&(o&&!this._compareStyles(a,d)&&(o.end(y,P),o=null),o||((o=_n.pop()||new Sa).begin(d,y,P),this.batches.push(o),a=d),this.addUvs(this.points,e,d.texture,P,tt,d.matrix))}}}var st=this.points.length/2;if(o&&o.end(this.indices.length,st),0===this.batches.length)return void(this.batchable=!0);this.indicesUint16&&this.indices.length===this.indicesUint16.length?this.indicesUint16.set(this.indices):this.indicesUint16=st>65535&&t?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}}else this.batchable=!0},r.prototype._compareStyles=function(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)},r.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var i=this.graphicsData[t],o=i.fillStyle,a=i.lineStyle;if(o&&!o.texture.baseTexture.valid||a&&!a.texture.baseTexture.valid)return!1}return!0},r.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,i=t.length;e<i;e++)for(var o=t[e],a=0;a<o.size;a++){var s=o.start+a;this.indicesUint16[s]=this.indicesUint16[s]-o.attribStart}},r.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<2*r.BATCHABLE_SIZE},r.prototype.buildDrawCalls=function(){for(var t=++Wt._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Vr.push(this.drawCalls[e]);this.drawCalls.length=0;var i=this.colors,o=this.textureIds,a=Vr.pop();a||((a=new bi).texArray=new Ti),a.texArray.count=0,a.start=0,a.size=0,a.type=g.TRIANGLES;var s=0,u=null,h=0,c=!1,f=g.TRIANGLES,l=0;for(this.drawCalls.push(a),e=0;e<this.batches.length;e++){var d=this.batches[e],y=d.style,P=y.texture.baseTexture;c!==!!y.native&&(f=(c=!!y.native)?g.LINES:g.TRIANGLES,u=null,s=8,t++),u!==P&&(u=P,P._batchEnabled!==t&&(8===s&&(t++,s=0,a.size>0&&((a=Vr.pop())||((a=new bi).texArray=new Ti),this.drawCalls.push(a)),a.start=l,a.size=0,a.texArray.count=0,a.type=f),P.touched=1,P._batchEnabled=t,P._batchLocation=s,P.wrapMode=10497,a.texArray.elements[a.texArray.count++]=P,s++)),a.size+=d.size,l+=d.size,h=P._batchLocation,this.addColors(i,y.color,y.alpha,d.attribSize,d.attribStart),this.addTextureIds(o,h,d.attribSize,d.attribStart)}Wt._globalBatch=t,this.packAttributes()},r.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,i=this.colors,o=this.textureIds,a=new ArrayBuffer(3*t.length*4),s=new Float32Array(a),u=new Uint32Array(a),h=0,c=0;c<t.length/2;c++)s[h++]=t[2*c],s[h++]=t[2*c+1],s[h++]=e[2*c],s[h++]=e[2*c+1],u[h++]=i[c],s[h++]=o[c];this._buffer.update(a),this._indexBuffer.update(this.indicesUint16)},r.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),vn.triangulate(t,this)):Pi[t.type].triangulate(t,this)},r.prototype.processLine=function(t){yn(t,this);for(var e=0;e<t.holes.length;e++)yn(t.holes[e],this)},r.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var i=t[e];Pi[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},r.prototype.calculateBounds=function(){var t=this._bounds,e=cu,i=Qt.IDENTITY;this._bounds.clear(),e.clear();for(var o=0;o<this.graphicsData.length;o++){var a=this.graphicsData[o],s=a.shape,u=a.type,h=a.lineStyle,c=a.matrix||Qt.IDENTITY,f=0;if(h&&h.visible){var l=h.alignment;f=h.width,f*=u===jt.POLY?.5+Math.abs(.5-l):Math.max(0,l)}i!==c&&(e.isEmpty()||(t.addBoundsMatrix(e,i),e.clear()),i=c),u===jt.RECT||u===jt.RREC?e.addFramePad(s.x,s.y,s.x+s.width,s.y+s.height,f,f):u===jt.CIRC?e.addFramePad(s.x,s.y,s.x,s.y,s.radius+f,s.radius+f):u===jt.ELIP?e.addFramePad(s.x,s.y,s.x,s.y,s.width+f,s.height+f):t.addVerticesMatrix(i,s.points,0,s.points.length,f,f)}e.isEmpty()||t.addBoundsMatrix(e,i),t.pad(this.boundsPadding,this.boundsPadding)},r.prototype.transformPoints=function(t,e){for(var i=0;i<t.length/2;i++){var o=t[2*i],a=t[2*i+1];t[2*i]=e.a*o+e.c*a+e.tx,t[2*i+1]=e.b*o+e.d*a+e.ty}},r.prototype.addColors=function(t,e,i,o,a){void 0===a&&(a=0);var u=we((e>>16)+(65280&e)+((255&e)<<16),i);t.length=Math.max(t.length,a+o);for(var h=0;h<o;h++)t[a+h]=u},r.prototype.addTextureIds=function(t,e,i,o){void 0===o&&(o=0),t.length=Math.max(t.length,o+i);for(var a=0;a<i;a++)t[o+a]=e},r.prototype.addUvs=function(t,e,i,o,a,s){void 0===s&&(s=null);for(var u=0,h=e.length,c=i.frame;u<a;){var f=t[2*(o+u)],l=t[2*(o+u)+1];if(s){var d=s.a*f+s.c*l+s.tx;l=s.b*f+s.d*l+s.ty,f=d}u++,e.push(f/c.width,l/c.height)}var m=i.baseTexture;(c.width<m.width||c.height<m.height)&&this.adjustUvs(e,i,h,a)},r.prototype.adjustUvs=function(t,e,i,o){for(var a=e.baseTexture,s=1e-6,u=i+2*o,h=e.frame,c=h.width/a.width,f=h.height/a.height,l=h.x/h.width,d=h.y/h.height,m=Math.floor(t[i]+s),y=Math.floor(t[i+1]+s),P=i+2;P<u;P+=2)m=Math.min(m,Math.floor(t[P]+s)),y=Math.min(y,Math.floor(t[P+1]+s));for(l-=m,d-=y,P=i;P<u;P+=2)t[P]=(t[P]+l)*c,t[P+1]=(t[P+1]+d)*f},r.BATCHABLE_SIZE=100,r}(an),Pa=function(n){function r(){var t=null!==n&&n.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=be.BUTT,t.join=xe.MITER,t.miterLimit=10,t}return Si(r,n),r.prototype.clone=function(){var t=new r;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},r.prototype.reset=function(){n.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},r}(dn),du=new Float32Array(3),bn={},Tn=function(n){function r(t){void 0===t&&(t=null);var e=n.call(this)||this;return e._geometry=t||new wa,e._geometry.refCount++,e.shader=null,e.state=Be.for2d(),e._fillStyle=new dn,e._lineStyle=new Pa,e._matrix=null,e._holeMode=!1,e.currentPath=null,e.batches=[],e.batchTint=-1,e.batchDirty=-1,e.vertexData=null,e.pluginName="batch",e._transformID=-1,e.tint=16777215,e.blendMode=F.NORMAL,e}return Si(r,n),Object.defineProperty(r.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return this.finishPoly(),new r(this._geometry)},Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),r.prototype.lineStyle=function(t){if(void 0===t&&(t=null),"number"==typeof t){var e=arguments;t={width:e[0]||0,color:e[1]||0,alpha:void 0!==e[2]?e[2]:1,alignment:void 0!==e[3]?e[3]:.5,native:!!e[4]}}return this.lineTextureStyle(t)},r.prototype.lineTextureStyle=function(t){if("number"==typeof t){lt("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var e=arguments,i=e[0],o=e[1],a=e[2],s=e[3],u=e[4],h=e[5],c=e[6];t={width:i,texture:o,color:a,alpha:s,matrix:u,alignment:h,native:c},Object.keys(t).forEach(function(l){return void 0===t[l]&&delete t[l]})}t=Object.assign({width:0,texture:Rt.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:be.BUTT,join:xe.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var f=t.width>0&&t.alpha>0;return f?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:f},t)):this._lineStyle.reset(),this},r.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new lr,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new lr,this.currentPath.closeStroke=!1},r.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},r.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},r.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points;return(i[i.length-2]!==t||i[i.length-1]!==e)&&i.push(t,e),this},r.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},r.prototype.quadraticCurveTo=function(t,e,i,o){this._initCurve();var a=this.currentPath.points;return 0===a.length&&this.moveTo(0,0),Ea.curveTo(t,e,i,o,a),this},r.prototype.bezierCurveTo=function(t,e,i,o,a,s){return this._initCurve(),Ta.curveTo(t,e,i,o,a,s,this.currentPath.points),this},r.prototype.arcTo=function(t,e,i,o,a){this._initCurve(t,e);var u=gn.curveTo(t,e,i,o,a,this.currentPath.points);return u&&this.arc(u.cx,u.cy,u.radius,u.startAngle,u.endAngle,u.anticlockwise),this},r.prototype.arc=function(t,e,i,o,a,s){if(void 0===s&&(s=!1),o===a)return this;if(!s&&a<=o?a+=Ie:s&&o<=a&&(o+=Ie),0==a-o)return this;var h=t+Math.cos(o)*i,c=e+Math.sin(o)*i,f=this._geometry.closePointEps,l=this.currentPath?this.currentPath.points:null;if(l){var d=Math.abs(l[l.length-2]-h),m=Math.abs(l[l.length-1]-c);d<f&&m<f||l.push(h,c)}else this.moveTo(h,c),l=this.currentPath.points;return gn.arc(h,c,t,e,i,o,a,s,l),this},r.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:Rt.WHITE,color:t,alpha:e})},r.prototype.beginTextureFill=function(t){if(t instanceof Rt){lt("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var e=arguments,i=e[0],o=e[1],a=e[2],s=e[3];t={texture:i,color:o,alpha:a,matrix:s},Object.keys(t).forEach(function(h){return void 0===t[h]&&delete t[h]})}t=Object.assign({texture:Rt.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var u=t.alpha>0;return u?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:u},t)):this._fillStyle.reset(),this},r.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},r.prototype.drawRect=function(t,e,i,o){return this.drawShape(new Ut(t,e,i,o))},r.prototype.drawRoundedRect=function(t,e,i,o,a){return this.drawShape(new $n(t,e,i,o,a))},r.prototype.drawCircle=function(t,e,i){return this.drawShape(new oi(t,e,i))},r.prototype.drawEllipse=function(t,e,i,o){return this.drawShape(new Lr(t,e,i,o))},r.prototype.drawPolygon=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var o,a=!0,s=e[0];s.points?(a=s.closeStroke,o=s.points):o=Array.isArray(e[0])?e[0]:e;var u=new lr(o);return u.closeStroke=a,this.drawShape(u),this},r.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},r.prototype.drawStar=function(t,e,i,o,a,s){return void 0===s&&(s=0),this.drawPolygon(new ba(t,e,i,o,a,s))},r.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},r.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return 1===t.length&&t[0].shape.type===jt.RECT&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)},r.prototype._render=function(t){this.finishPoly();var e=this._geometry;e.updateBatches(t.context.supports.uint32Indices),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},r.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(var o=0;o<i;o++){var a=t.batches[o],s=a.style.color,u=new Float32Array(this.vertexData.buffer,4*a.attribStart*2,2*a.attribSize),h=new Float32Array(t.uvsFloat32.buffer,4*a.attribStart*2,2*a.attribSize),f={vertexData:u,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*a.start,a.size),uvs:h,_batchRGB:_e(s),_tintRGB:s,_texture:a.style.texture,alpha:a.style.alpha,worldAlpha:1};this.batches[o]=f}},r.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,i=this.batches.length;e<i;e++){var o=this.batches[e];o.worldAlpha=this.worldAlpha*o.alpha,t.plugins[this.pluginName].render(o)}}},r.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),i=this._geometry,o=this.tint,a=this.worldAlpha,s=e.uniforms,u=i.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(o>>16&255)/255*a,s.tint[1]=(o>>8&255)/255*a,s.tint[2]=(255&o)/255*a,s.tint[3]=a,t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(var h=0,c=u.length;h<c;h++)this._renderDrawCallDirect(t,i.drawCalls[h])},r.prototype._renderDrawCallDirect=function(t,e){for(var i=e.texArray,o=e.type,a=e.size,s=e.start,u=i.count,h=0;h<u;h++)t.texture.bind(i.elements[h],h);t.geometry.draw(o,a,s)},r.prototype._resolveDirectShader=function(t){var e=this.shader,i=this.pluginName;if(!e){if(!bn[i]){for(var o=t.plugins.batch.MAX_TEXTURES,a=new Int32Array(o),s=0;s<o;s++)a[s]=s;var u={tint:new Float32Array([1,1,1,1]),translationMatrix:new Qt,default:Le.from({uSamplers:a},!0)};bn[i]=new Ne(t.plugins[i]._shader.program,u)}e=bn[i]}return e},r.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds;this._bounds.addFrame(this.transform,e.minX,e.minY,e.maxX,e.maxY)}},r.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,r._TEMP_POINT),this._geometry.containsPoint(r._TEMP_POINT)},r.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=_e(this.tint,du),e=0;e<this.batches.length;e++){var i=this.batches[e],o=i._batchRGB,h=(t[0]*o[0]*255<<16)+(t[1]*o[1]*255<<8)+(0|t[2]*o[2]*255);i._tintRGB=(h>>16)+(65280&h)+((255&h)<<16)}}},r.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,i=e.a,o=e.b,a=e.c,s=e.d,u=e.tx,h=e.ty,c=this._geometry.points,f=this.vertexData,l=0,d=0;d<c.length;d+=2){var m=c[d],y=c[d+1];f[l++]=i*m+a*y+u,f[l++]=s*y+o*m+h}}},r.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},r.prototype.setMatrix=function(t){return this._matrix=t,this},r.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},r.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},r.prototype.destroy=function(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,n.prototype.destroy.call(this,t)},r._TEMP_POINT=new ee,r}(ye),En=function(n,r){return(En=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)},Wr=new ee,vu=new Uint16Array([0,1,2,0,2,3]),yr=function(n){function r(t){var e=n.call(this)||this;return e._anchor=new ze(e._onAnchorUpdate,e,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),e._texture=null,e._width=0,e._height=0,e._tint=null,e._tintRGB=null,e.tint=16777215,e.blendMode=F.NORMAL,e._cachedTint=16777215,e.uvs=null,e.texture=t||Rt.EMPTY,e.vertexData=new Float32Array(8),e.vertexTrimmedData=null,e._transformID=-1,e._textureID=-1,e._transformTrimmedID=-1,e._textureTrimmedID=-1,e.indices=vu,e.pluginName="batch",e.isSprite=!0,e._roundPixels=v.ROUND_PIXELS,e}return function pu(n,r){function t(){this.constructor=n}En(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}(r,n),r.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=ue(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=ue(this.scale.y)*this._height/this._texture.orig.height)},r.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},r.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,i=e.a,o=e.b,a=e.c,s=e.d,u=e.tx,h=e.ty,c=this.vertexData,f=t.trim,l=t.orig,d=this._anchor,m=0,y=0,P=0,tt=0;if(f?(m=(y=f.x-d._x*l.width)+f.width,P=(tt=f.y-d._y*l.height)+f.height):(m=(y=-d._x*l.width)+l.width,P=(tt=-d._y*l.height)+l.height),c[0]=i*y+a*tt+u,c[1]=s*tt+o*y+h,c[2]=i*m+a*tt+u,c[3]=s*tt+o*m+h,c[4]=i*m+a*P+u,c[5]=s*P+o*m+h,c[6]=i*y+a*P+u,c[7]=s*P+o*y+h,this._roundPixels)for(var gt=v.RESOLUTION,st=0;st<c.length;++st)c[st]=Math.round((c[st]*gt|0)/gt)}},r.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this.vertexTrimmedData,i=this._texture.orig,o=this._anchor,a=this.transform.worldTransform,s=a.a,u=a.b,h=a.c,c=a.d,f=a.tx,l=a.ty,d=-o._x*i.width,m=d+i.width,y=-o._y*i.height,P=y+i.height;e[0]=s*d+h*y+f,e[1]=c*y+u*d+l,e[2]=s*m+h*y+f,e[3]=c*y+u*m+l,e[4]=s*m+h*P+f,e[5]=c*P+u*m+l,e[6]=s*d+h*P+f,e[7]=c*P+u*d+l},r.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},r.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},r.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Ut),t=this._localBoundsRect),this._bounds.getRectangle(t)):n.prototype.getLocalBounds.call(this,t)},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Wr);var e=this._texture.orig.width,i=this._texture.orig.height,o=-e*this.anchor.x,a=0;return Wr.x>=o&&Wr.x<o+e&&Wr.y>=(a=-i*this.anchor.y)&&Wr.y<a+i},r.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof t?t:t&&t.texture)&&this._texture.destroy(!!("boolean"==typeof t?t:t&&t.baseTexture)),this._texture=null},r.from=function(t,e){return new r(t instanceof Rt?t:Rt.from(t,e))},Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=ue(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=ue(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||Rt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),r}(ye),Sn=function(n,r){return(Sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)},er=(()=>{return(n=er||(er={}))[n.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",n[n.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",er;var n})(),wn={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:er.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},yu=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],rr=function(){function n(r){this.styleID=0,this.reset(),In(this,r,r)}return n.prototype.clone=function(){var r={};return In(r,this,wn),new n(r)},n.prototype.reset=function(){In(this,wn,wn)},Object.defineProperty(n.prototype,"align",{get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"breakWords",{get:function(){return this._breakWords},set:function(r){this._breakWords!==r&&(this._breakWords=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(r){this._dropShadow!==r&&(this._dropShadow=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(r){this._dropShadowAlpha!==r&&(this._dropShadowAlpha=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(r){this._dropShadowAngle!==r&&(this._dropShadowAngle=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(r){this._dropShadowBlur!==r&&(this._dropShadowBlur=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(r){var t=Pn(r);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(r){this._dropShadowDistance!==r&&(this._dropShadowDistance=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fill",{get:function(){return this._fill},set:function(r){var t=Pn(r);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(r){this._fillGradientType!==r&&(this._fillGradientType=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(r){(function gu(n,r){if(!Array.isArray(n)||!Array.isArray(r)||n.length!==r.length)return!1;for(var t=0;t<n.length;++t)if(n[t]!==r[t])return!1;return!0})(this._fillGradientStops,r)||(this._fillGradientStops=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(r){this.fontFamily!==r&&(this._fontFamily=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontSize",{get:function(){return this._fontSize},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(r){this._fontStyle!==r&&(this._fontStyle=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(r){this._fontVariant!==r&&(this._fontVariant=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(r){this._fontWeight!==r&&(this._fontWeight=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(r){this._lineHeight!==r&&(this._lineHeight=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"leading",{get:function(){return this._leading},set:function(r){this._leading!==r&&(this._leading=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(r){this._lineJoin!==r&&(this._lineJoin=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(r){this._miterLimit!==r&&(this._miterLimit=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"padding",{get:function(){return this._padding},set:function(r){this._padding!==r&&(this._padding=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stroke",{get:function(){return this._stroke},set:function(r){var t=Pn(r);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(r){this._strokeThickness!==r&&(this._strokeThickness=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(r){this._textBaseline!==r&&(this._textBaseline=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"trim",{get:function(){return this._trim},set:function(r){this._trim!==r&&(this._trim=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(r){this._whiteSpace!==r&&(this._whiteSpace=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(r){this._wordWrap!==r&&(this._wordWrap=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(r){this._wordWrapWidth!==r&&(this._wordWrapWidth=r,this.styleID++)},enumerable:!1,configurable:!0}),n.prototype.toFontString=function(){var r="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var e=t.length-1;e>=0;e--){var i=t[e].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&yu.indexOf(i)<0&&(i='"'+i+'"'),t[e]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+r+" "+t.join(",")},n}();function Ia(n){return"number"==typeof n?Ir(n):("string"==typeof n&&0===n.indexOf("0x")&&(n=n.replace("0x","#")),n)}function Pn(n){if(Array.isArray(n)){for(var r=0;r<n.length;++r)n[r]=Ia(n[r]);return n}return Ia(n)}function In(n,r,t){for(var e in t)n[e]=Array.isArray(r[e])?r[e].slice():r[e]}var pe=function(){function n(r,t,e,i,o,a,s,u,h){this.text=r,this.style=t,this.width=e,this.height=i,this.lines=o,this.lineWidths=a,this.lineHeight=s,this.maxLineWidth=u,this.fontProperties=h}return n.measureText=function(r,t,e,i){void 0===i&&(i=n._canvas),e=null==e?t.wordWrap:e;var o=t.toFontString(),a=n.measureFont(o);0===a.fontSize&&(a.fontSize=t.fontSize,a.ascent=t.fontSize);var s=i.getContext("2d");s.font=o;for(var h=(e?n.wordWrap(r,t,i):r).split(/(?:\r\n|\r|\n)/),c=new Array(h.length),f=0,l=0;l<h.length;l++){var d=s.measureText(h[l]).width+(h[l].length-1)*t.letterSpacing;c[l]=d,f=Math.max(f,d)}var m=f+t.strokeThickness;t.dropShadow&&(m+=t.dropShadowDistance);var y=t.lineHeight||a.fontSize+t.strokeThickness,P=Math.max(y,a.fontSize+t.strokeThickness)+(h.length-1)*(y+t.leading);return t.dropShadow&&(P+=t.dropShadowDistance),new n(r,t,m,P,h,c,y+t.leading,f,a)},n.wordWrap=function(r,t,e){void 0===e&&(e=n._canvas);for(var i=e.getContext("2d"),o=0,a="",s="",u=Object.create(null),h=t.letterSpacing,c=t.whiteSpace,f=n.collapseSpaces(c),l=n.collapseNewlines(c),d=!f,m=t.wordWrapWidth+h,y=n.tokenize(r),P=0;P<y.length;P++){var tt=y[P];if(n.isNewline(tt)){if(!l){s+=n.addLine(a),d=!f,a="",o=0;continue}tt=" "}if(f){var gt=n.isBreakingSpace(tt),st=n.isBreakingSpace(a[a.length-1]);if(gt&&st)continue}var bt=n.getFromCache(tt,h,u,i);if(bt>m)if(""!==a&&(s+=n.addLine(a),a="",o=0),n.canBreakWords(tt,t.breakWords))for(var vt=n.wordWrapSplit(tt),pt=0;pt<vt.length;pt++){for(var Ft=vt[pt],Bt=1;vt[pt+Bt];){var Tt=vt[pt+Bt];if(n.canBreakChars(Ft[Ft.length-1],Tt,tt,pt,t.breakWords))break;Ft+=Tt,Bt++}pt+=Ft.length-1;var Ht=n.getFromCache(Ft,h,u,i);Ht+o>m&&(s+=n.addLine(a),d=!1,a="",o=0),a+=Ft,o+=Ht}else a.length>0&&(s+=n.addLine(a),a="",o=0),s+=n.addLine(tt,!(P===y.length-1)),d=!1,a="",o=0;else bt+o>m&&(d=!1,s+=n.addLine(a),a="",o=0),(a.length>0||!n.isBreakingSpace(tt)||d)&&(a+=tt,o+=bt)}return s+n.addLine(a,!1)},n.addLine=function(r,t){return void 0===t&&(t=!0),r=n.trimRight(r),t?r+"\n":r},n.getFromCache=function(r,t,e,i){var o=e[r];if("number"!=typeof o){var a=r.length*t;o=i.measureText(r).width+a,e[r]=o}return o},n.collapseSpaces=function(r){return"normal"===r||"pre-line"===r},n.collapseNewlines=function(r){return"normal"===r},n.trimRight=function(r){if("string"!=typeof r)return"";for(var t=r.length-1;t>=0&&n.isBreakingSpace(r[t]);t--)r=r.slice(0,-1);return r},n.isNewline=function(r){return"string"==typeof r&&n._newlines.indexOf(r.charCodeAt(0))>=0},n.isBreakingSpace=function(r){return"string"==typeof r&&n._breakingSpaces.indexOf(r.charCodeAt(0))>=0},n.tokenize=function(r){var t=[],e="";if("string"!=typeof r)return t;for(var i=0;i<r.length;i++){var o=r[i];n.isBreakingSpace(o)||n.isNewline(o)?(""!==e&&(t.push(e),e=""),t.push(o)):e+=o}return""!==e&&t.push(e),t},n.canBreakWords=function(r,t){return t},n.canBreakChars=function(r,t,e,i,o){return!0},n.wordWrapSplit=function(r){return r.split("")},n.measureFont=function(r){if(n._fonts[r])return n._fonts[r];var t={ascent:0,descent:0,fontSize:0},e=n._canvas,i=n._context;i.font=r;var o=n.METRICS_STRING+n.BASELINE_SYMBOL,a=Math.ceil(i.measureText(o).width),s=Math.ceil(i.measureText(n.BASELINE_SYMBOL).width),u=2*s;s=s*n.BASELINE_MULTIPLIER|0,e.width=a,e.height=u,i.fillStyle="#f00",i.fillRect(0,0,a,u),i.font=r,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,s);var h=i.getImageData(0,0,a,u).data,c=h.length,f=4*a,l=0,d=0,m=!1;for(l=0;l<s;++l){for(var y=0;y<f;y+=4)if(255!==h[d+y]){m=!0;break}if(m)break;d+=f}for(t.ascent=s-l,d=c-f,m=!1,l=u;l>s;--l){for(y=0;y<f;y+=4)if(255!==h[d+y]){m=!0;break}if(m)break;d-=f}return t.descent=l-s,t.fontSize=t.ascent+t.descent,n._fonts[r]=t,t},n.clearMetrics=function(r){void 0===r&&(r=""),r?delete n._fonts[r]:n._fonts={}},n}(),Ii=function(){try{var n=new OffscreenCanvas(0,0),r=n.getContext("2d");return r&&r.measureText?n:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();Ii.width=Ii.height=10,pe._canvas=Ii,pe._context=Ii.getContext("2d"),pe._fonts={},pe.METRICS_STRING="|\xc9q\xc5",pe.BASELINE_SYMBOL="M",pe.BASELINE_MULTIPLIER=1.4,pe._newlines=[10,13],pe._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var _u={texture:!0,children:!1,baseTexture:!0},An=function(n){function r(t,e,i){var o=this,a=!1;i||(i=document.createElement("canvas"),a=!0),i.width=3,i.height=3;var s=Rt.from(i);return s.orig=new Ut,s.trim=new Ut,(o=n.call(this,s)||this)._ownCanvas=a,o.canvas=i,o.context=o.canvas.getContext("2d"),o._resolution=v.RESOLUTION,o._autoResolution=!0,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=t,o.style=e,o.localStyleID=-1,o}return function mu(n,r){function t(){this.constructor=n}Sn(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}(r,n),r.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i=this.context,o=pe.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=o.height,u=o.lines,h=o.lineHeight,c=o.lineWidths,f=o.maxLineWidth,l=o.fontProperties;this.canvas.width=Math.ceil((Math.max(1,o.width)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,s)+2*e.padding)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;for(var d,m,y=e.dropShadow?2:1,P=0;P<y;++P){var tt=e.dropShadow&&0===P,gt=tt?Math.ceil(Math.max(1,s)+2*e.padding):0,st=gt*this._resolution;if(tt){i.fillStyle="black",i.strokeStyle="black";var bt=e.dropShadowColor,vt=_e("number"==typeof bt?bt:Se(bt)),pt=e.dropShadowBlur*this._resolution,Ft=e.dropShadowDistance*this._resolution;i.shadowColor="rgba("+255*vt[0]+","+255*vt[1]+","+255*vt[2]+","+e.dropShadowAlpha+")",i.shadowBlur=pt,i.shadowOffsetX=Math.cos(e.dropShadowAngle)*Ft,i.shadowOffsetY=Math.sin(e.dropShadowAngle)*Ft+st}else i.fillStyle=this._generateFillStyle(e,u,o),i.strokeStyle=e.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;for(var Bt=0;Bt<u.length;Bt++)d=e.strokeThickness/2,m=e.strokeThickness/2+Bt*h+l.ascent,"right"===e.align?d+=f-c[Bt]:"center"===e.align&&(d+=(f-c[Bt])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(u[Bt],d+e.padding,m+e.padding-gt,!0),e.fill&&this.drawLetterSpacing(u[Bt],d+e.padding,m+e.padding-gt)}this.updateTexture()}},r.prototype.drawLetterSpacing=function(t,e,i,o){void 0===o&&(o=!1);var s=this._style.letterSpacing;if(0!==s)for(var u=e,h=Array.from?Array.from(t):t.split(""),c=this.context.measureText(t).width,f=0,l=0;l<h.length;++l){var d=h[l];o?this.context.strokeText(d,u,i):this.context.fillText(d,u,i),u+=c-(f=this.context.measureText(t.substring(l+1)).width)+s,c=f}else o?this.context.strokeText(t,e,i):this.context.fillText(t,e,i)},r.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=ur(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var i=this._texture,o=this._style,a=o.trim?0:o.padding,s=i.baseTexture;i.trim.width=i._frame.width=Math.ceil(t.width/this._resolution),i.trim.height=i._frame.height=Math.ceil(t.height/this._resolution),i.trim.x=-a,i.trim.y=-a,i.orig.width=i._frame.width-2*a,i.orig.height=i._frame.height-2*a,this._onTextureUpdate(),s.setRealSize(t.width,t.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},r.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),n.prototype._render.call(this,t)},r.prototype.getLocalBounds=function(t){return this.updateText(!0),n.prototype.getLocalBounds.call(this,t)},r.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},r.prototype._generateFillStyle=function(t,e,i){var o=t.fill;if(!Array.isArray(o))return o;if(1===o.length)return o[0];var a,s=t.dropShadow?t.dropShadowDistance:0,u=t.padding||0,h=Math.ceil(this.canvas.width/this._resolution)-s-2*u,c=Math.ceil(this.canvas.height/this._resolution)-s-2*u,f=o.slice(),l=t.fillGradientStops.slice();if(!l.length)for(var d=f.length+1,m=1;m<d;++m)l.push(m/d);if(f.unshift(o[0]),l.unshift(0),f.push(o[o.length-1]),l.push(1),t.fillGradientType===er.LINEAR_VERTICAL){a=this.context.createLinearGradient(h/2,u,h/2,c+u);var y=0,tt=(i.fontProperties.fontSize+t.strokeThickness)/c;for(m=0;m<e.length;m++)for(var gt=i.lineHeight*m,st=0;st<f.length;st++){var pt=Math.max(y,gt/c+("number"==typeof l[st]?l[st]:st/f.length)*tt);pt=Math.min(pt,1),a.addColorStop(pt,f[st]),y=pt}}else{a=this.context.createLinearGradient(u,c/2,h+u,c/2);var Ft=f.length+1,Bt=1;for(m=0;m<f.length;m++)a.addColorStop("number"==typeof l[m]?l[m]:Bt/Ft,f[m]),Bt++}return a},r.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},_u,t),n.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(r.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=ue(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=ue(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"style",{get:function(){return this._style},set:function(t){this._style=(t=t||{})instanceof rr?t:new rr(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),r}(yr);v.UPLOADS_PER_FRAME=4;var On=function(n,r){return(On=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)},Aa=function(){function n(r){this.maxItemsPerFrame=r,this.itemsLeft=0}return n.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},n.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},n}();function bu(n,r){var t=!1;if(n&&n._textures&&n._textures.length)for(var e=0;e<n._textures.length;e++)if(n._textures[e]instanceof Rt){var i=n._textures[e].baseTexture;-1===r.indexOf(i)&&(r.push(i),t=!0)}return t}function Tu(n,r){if(n.baseTexture instanceof Wt){var t=n.baseTexture;return-1===r.indexOf(t)&&r.push(t),!0}return!1}function Eu(n,r){if(n._texture&&n._texture instanceof Rt){var t=n._texture.baseTexture;return-1===r.indexOf(t)&&r.push(t),!0}return!1}function Su(n,r){return r instanceof An&&(r.updateText(!0),!0)}function wu(n,r){if(r instanceof rr){var t=r.toFontString();return pe.measureFont(t),!0}return!1}function Pu(n,r){if(n instanceof An){-1===r.indexOf(n.style)&&r.push(n.style),-1===r.indexOf(n)&&r.push(n);var t=n._texture.baseTexture;return-1===r.indexOf(t)&&r.push(t),!0}return!1}function Iu(n,r){return n instanceof rr&&(-1===r.indexOf(n)&&r.push(n),!0)}var Oa=function(){function n(r){var t=this;this.limiter=new Aa(v.UPLOADS_PER_FRAME),this.renderer=r,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){!t.queue||t.prepareItems()},this.registerFindHook(Pu),this.registerFindHook(Iu),this.registerFindHook(bu),this.registerFindHook(Tu),this.registerFindHook(Eu),this.registerUploadHook(Su),this.registerUploadHook(wu)}return n.prototype.upload=function(r,t){"function"==typeof r&&(t=r,r=null),r&&this.add(r),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,re.system.addOnce(this.tick,this,ge.UTILITY))):t&&t()},n.prototype.tick=function(){setTimeout(this.delayedTick,0)},n.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var r=this.queue[0],t=!1;if(r&&!r._destroyed)for(var e=0,i=this.uploadHooks.length;e<i;e++)if(this.uploadHooks[e](this.uploadHookHelper,r)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)re.system.addOnce(this.tick,this,ge.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);for(this.completes.length=0,e=0,i=o.length;e<i;e++)o[e]()}},n.prototype.registerFindHook=function(r){return r&&this.addHooks.push(r),this},n.prototype.registerUploadHook=function(r){return r&&this.uploadHooks.push(r),this},n.prototype.add=function(r){for(var t=0,e=this.addHooks.length;t<e&&!this.addHooks[t](r,this.queue);t++);if(r instanceof ye)for(t=r.children.length-1;t>=0;t--)this.add(r.children[t]);return this},n.prototype.destroy=function(){this.ticking&&re.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},n}();function Ma(n,r){return r instanceof Wt&&(r._glTextures[n.CONTEXT_UID]||n.texture.bind(r),!0)}function Au(n,r){if(!(r instanceof Tn))return!1;var t=r.geometry;r.finishPoly(),t.updateBatches();for(var e=t.batches,i=0;i<e.length;i++){var o=e[i].style.texture;o&&Ma(n,o.baseTexture)}return t.batchable||n.geometry.bind(t,r._resolveDirectShader(n)),!0}function Ou(n,r){return n instanceof Tn&&(r.push(n),!0)}var Ca=function(n){function r(t){var e=n.call(this,t)||this;return e.uploadHookHelper=e.renderer,e.registerFindHook(Ou),e.registerUploadHook(Ma),e.registerUploadHook(Au),e}return function xu(n,r){function t(){this.constructor=n}On(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}(r,n),r}(Oa),Mu=function(){function n(r){this.maxMilliseconds=r,this.frameStart=0}return n.prototype.beginFrame=function(){this.frameStart=Date.now()},n.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},n}(),Ra=function(){function n(r,t,e){void 0===e&&(e=null),this._texture=r instanceof Rt?r:null,this.baseTexture=r instanceof Wt?r:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var i=this.baseTexture.resource;this.resolution=this._updateResolution(e||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return n.prototype._updateResolution=function(r){void 0===r&&(r=null);var t=this.data.meta.scale,e=Pe(r,null);return null===e&&(e=void 0!==t?parseFloat(t):1),1!==e&&this.baseTexture.setResolution(e),e},n.prototype.parse=function(r){this._batchIndex=0,this._callback=r,this._frameKeys.length<=n.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},n.prototype._processFrames=function(r){for(var t=r,e=n.BATCH_SIZE;t-r<e&&t<this._frameKeys.length;){var i=this._frameKeys[t],o=this._frames[i],a=o.frame;if(a){var s,u=null,h=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,c=new Ut(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);s=o.rotated?new Ut(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):new Ut(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(u=new Ut(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[i]=new Rt(this.baseTexture,s,c,u,o.rotated?2:0,o.anchor),Rt.addToCache(this.textures[i],i)}t++}},n.prototype._processAnimations=function(){var r=this.data.animations||{};for(var t in r){this.animations[t]=[];for(var e=0;e<r[t].length;e++)this.animations[t].push(this.textures[r[t][e]])}},n.prototype._parseComplete=function(){var r=this._callback;this._callback=null,this._batchIndex=0,r.call(this,this.textures)},n.prototype._nextBatch=function(){var r=this;this._processFrames(this._batchIndex*n.BATCH_SIZE),this._batchIndex++,setTimeout(function(){r._batchIndex*n.BATCH_SIZE<r._frameKeys.length?r._nextBatch():(r._processAnimations(),r._parseComplete())},0)},n.prototype.destroy=function(r){var t;for(var e in void 0===r&&(r=!1),this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,r&&(null===(t=this._texture)||void 0===t||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},n.BATCH_SIZE=1e3,n}(),Da=function(){function n(){}return n.use=function(r,t){var e=this,i=r.name+"_image";if(r.data&&r.type===zr.TYPE.JSON&&r.data.frames&&!e.resources[i]){var o={crossOrigin:r.crossOrigin,metadata:r.metadata.imageMetadata,parentResource:r},a=n.getResourcePath(r,e.baseUrl);e.add(i,a,o,function(u){if(u.error)t(u.error);else{var h=new Ra(u.texture,r.data,r.url);h.parse(function(){r.spritesheet=h,r.textures=h.textures,t()})}})}else t()},n.getResourcePath=function(r,t){return r.isDataUrl?r.data.meta.image:A.resolve(r.url.replace(t,""),r.data.meta.image)},n}(),Mn=function(n,r){return(Mn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)};function Fa(n,r){function t(){this.constructor=n}Mn(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}var $r=new ee,Cu=function(n){function r(t,e,i){void 0===e&&(e=100),void 0===i&&(i=100);var o=n.call(this,t)||this;return o.tileTransform=new Li,o._width=e,o._height=i,o.uvMatrix=o.texture.uvMatrix||new _i(t),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return Fa(r,n),Object.defineProperty(r.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),r.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},r.prototype._render=function(t){var e=this._texture;!e||!e.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},r.prototype._calculateBounds=function(){this._bounds.addFrame(this.transform,this._width*-this._anchor._x,this._height*-this._anchor._y,this._width*(1-this._anchor._x),this._height*(1-this._anchor._y))},r.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Ut),t=this._localBoundsRect),this._bounds.getRectangle(t)):n.prototype.getLocalBounds.call(this,t)},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,$r);var e=this._width,i=this._height,o=-e*this.anchor._x;if($r.x>=o&&$r.x<o+e){var a=-i*this.anchor._y;if($r.y>=a&&$r.y<a+i)return!0}return!1},r.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},r.from=function(t,e){return"number"==typeof e&&(lt("5.3.0","TilingSprite.from use options instead of width and height args"),e={width:e,height:arguments[2]}),new r(Rt.from(t,e),e.width,e.height)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),r}(yr),La="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",Ai=new Qt,Na=function(n){function r(t){var e=n.call(this,t)||this,i={globals:e.renderer.globalUniforms};return e.shader=Ne.from(La,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",i),e.simpleShader=Ne.from(La,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",i),e.quad=new Zi,e.state=Be.for2d(),e}return Fa(r,n),r.prototype.render=function(t){var e=this.renderer,i=this.quad,o=i.vertices;o[0]=o[6]=t._width*-t.anchor.x,o[1]=o[3]=t._height*-t.anchor.y,o[2]=o[4]=t._width*(1-t.anchor.x),o[5]=o[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((o=i.uvs)[0]=o[6]=-t.anchor.x,o[1]=o[3]=-t.anchor.y,o[2]=o[4]=1-t.anchor.x,o[5]=o[7]=1-t.anchor.y),i.invalidate();var a=t._texture,s=a.baseTexture,u=t.tileTransform.localTransform,h=t.uvMatrix,c=s.isPowerOfTwo&&a.frame.width===s.width&&a.frame.height===s.height;c&&(s._glTextures[e.CONTEXT_UID]?c=s.wrapMode!==Et.CLAMP:s.wrapMode===Et.CLAMP&&(s.wrapMode=Et.REPEAT));var f=c?this.simpleShader:this.shader,l=a.width,d=a.height,m=t._width,y=t._height;Ai.set(u.a*l/m,u.b*l/y,u.c*d/m,u.d*d/y,u.tx/m,u.ty/y),Ai.invert(),c?Ai.prepend(h.mapCoord):(f.uniforms.uMapCoord=h.mapCoord.toArray(!0),f.uniforms.uClampFrame=h.uClampFrame,f.uniforms.uClampOffset=h.uClampOffset),f.uniforms.uTransform=Ai.toArray(!0),f.uniforms.uColor=U(t.tint,t.worldAlpha,f.uniforms.uColor,s.alphaMode),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,e.shader.bind(f),e.geometry.bind(i),this.state.blendMode=Mr(t.blendMode,s.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},r}(Ur),Cn=function(n,r){return(Cn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)};function Rn(n,r){function t(){this.constructor=n}Cn(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}var Ba=function(){function n(r,t){this.uvBuffer=r,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return n.prototype.update=function(r){if(r||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}},n}(),Dn=new ee,Ua=new lr,gr=function(n){function r(t,e,i,o){void 0===o&&(o=g.TRIANGLES);var a=n.call(this)||this;return a.geometry=t,t.refCount++,a.shader=e,a.state=i||Be.for2d(),a.drawMode=o,a.start=0,a.size=0,a.uvs=null,a.indices=null,a.vertexData=new Float32Array(1),a.vertexDirty=0,a._transformID=-1,a._roundPixels=v.ROUND_PIXELS,a.batchUvs=null,a}return Rn(r,n),Object.defineProperty(r.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this.shader.tint},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),r.prototype._render=function(t){this.shader.batchable&&this.drawMode===g.TRIANGLES&&this.geometry.buffers[0].data.length<2*r.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},r.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},r.prototype._renderToBatch=function(t){var e=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var i=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[i]),t.plugins[i].render(this)},r.prototype.calculateVertices=function(){var t=this.geometry,e=t.buffers[0].data;if(t.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var i=this.transform.worldTransform,o=i.a,a=i.b,s=i.c,u=i.d,h=i.tx,c=i.ty,f=this.vertexData,l=0;l<f.length/2;l++){var d=e[2*l],m=e[2*l+1];f[2*l]=o*d+s*m+h,f[2*l+1]=a*d+u*m+c}if(this._roundPixels){var y=v.RESOLUTION;for(l=0;l<f.length;++l)f[l]=Math.round((f[l]*y|0)/y)}this.vertexDirty=t.vertexDirtyId}},r.prototype.calculateUvs=function(){var t=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Ba(t,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},r.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},r.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Dn);for(var e=this.geometry.getBuffer("aVertexPosition").data,i=Ua.points,o=this.geometry.getIndex().data,a=o.length,s=4===this.drawMode?3:1,u=0;u+2<a;u+=s){var h=2*o[u],c=2*o[u+1],f=2*o[u+2];if(i[0]=e[h],i[1]=e[h+1],i[2]=e[c],i[3]=e[c+1],i[4]=e[f],i[5]=e[f+1],Ua.contains(Dn.x,Dn.y))return!0}return!1},r.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},r.BATCHABLE_SIZE=100,r}(ye),Zr=function(n){function r(t,e){var i=this,o={uSampler:t,alpha:1,uTextureMatrix:Qt.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e)).uniforms&&Object.assign(o,e.uniforms),(i=n.call(this,e.program||Gr.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),o)||this)._colorDirty=!1,i.uvMatrix=new _i(t),i.batchable=void 0===e.program,i.pluginName=e.pluginName,i.tint=e.tint,i.alpha=e.alpha,i}return Rn(r,n),Object.defineProperty(r.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),r.prototype.update=function(){this._colorDirty&&(this._colorDirty=!1,U(this._tint,this._alpha,this.uniforms.uColor,this.texture.baseTexture.alphaMode)),this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},r}(Ne),Kr=function(n){function r(t,e,i){var o=n.call(this)||this,a=new ie(t),s=new ie(e,!0),u=new ie(i,!0,!0);return o.addAttribute("aVertexPosition",a,2,!1,at.FLOAT).addAttribute("aTextureCoord",s,2,!1,at.FLOAT).addIndex(u),o._updateId=-1,o}return Rn(r,n),Object.defineProperty(r.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),r}(cr),Fn=function(n,r){return(Fn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)},qr=function n(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]},Bu=function(){function n(){}return n.test=function(r){return"string"==typeof r&&0===r.indexOf("info face=")},n.parse=function(r){var t=r.match(/^[a-z]+\s+.+$/gm),e={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var i in t){var o=t[i].match(/^[a-z]+/gm)[0],a=t[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(var u in a){var h=a[u].split("="),c=h[0],f=h[1].replace(/"/gm,""),l=parseFloat(f),d=isNaN(l)?f:l;s[c]=d}e[o].push(s)}var m=new qr;return e.info.forEach(function(y){return m.info.push({face:y.face,size:parseInt(y.size,10)})}),e.common.forEach(function(y){return m.common.push({lineHeight:parseInt(y.lineHeight,10)})}),e.page.forEach(function(y){return m.page.push({id:parseInt(y.id,10),file:y.file})}),e.char.forEach(function(y){return m.char.push({id:parseInt(y.id,10),page:parseInt(y.page,10),x:parseInt(y.x,10),y:parseInt(y.y,10),width:parseInt(y.width,10),height:parseInt(y.height,10),xoffset:parseInt(y.xoffset,10),yoffset:parseInt(y.yoffset,10),xadvance:parseInt(y.xadvance,10)})}),e.kerning.forEach(function(y){return m.kerning.push({first:parseInt(y.first,10),second:parseInt(y.second,10),amount:parseInt(y.amount,10)})}),m},n}(),Ln=function(){function n(){}return n.test=function(r){return r instanceof XMLDocument&&r.getElementsByTagName("page").length&&null!==r.getElementsByTagName("info")[0].getAttribute("face")},n.parse=function(r){for(var t=new qr,e=r.getElementsByTagName("info"),i=r.getElementsByTagName("common"),o=r.getElementsByTagName("page"),a=r.getElementsByTagName("char"),s=r.getElementsByTagName("kerning"),u=0;u<e.length;u++)t.info.push({face:e[u].getAttribute("face"),size:parseInt(e[u].getAttribute("size"),10)});for(u=0;u<i.length;u++)t.common.push({lineHeight:parseInt(i[u].getAttribute("lineHeight"),10)});for(u=0;u<o.length;u++)t.page.push({id:parseInt(o[u].getAttribute("id"),10)||0,file:o[u].getAttribute("file")});for(u=0;u<a.length;u++){var h=a[u];t.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(u=0;u<s.length;u++)t.kerning.push({first:parseInt(s[u].getAttribute("first"),10),second:parseInt(s[u].getAttribute("second"),10),amount:parseInt(s[u].getAttribute("amount"),10)});return t},n}(),Uu=function(){function n(){}return n.test=function(r){if("string"==typeof r&&r.indexOf("<font>")>-1){var t=(new self.DOMParser).parseFromString(r,"text/xml");return Ln.test(t)}return!1},n.parse=function(r){var t=(new window.DOMParser).parseFromString(r,"text/xml");return Ln.parse(t)},n}(),Nn=[Bu,Ln,Uu];function ka(n){for(var r=0;r<Nn.length;r++)if(Nn[r].test(n))return Nn[r];return null}function Xu(n,r,t,e,i,o,a){var s=t.text,u=t.fontProperties;r.translate(e,i),r.scale(o,o);var h=a.strokeThickness/2,c=-a.strokeThickness/2;if(r.font=a.toFontString(),r.lineWidth=a.strokeThickness,r.textBaseline=a.textBaseline,r.lineJoin=a.lineJoin,r.miterLimit=a.miterLimit,r.fillStyle=function ku(n,r,t,e,i,o){var a=t.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var s,u=t.dropShadow?t.dropShadowDistance:0,h=t.padding||0,c=Math.ceil(n.width/e)-u-2*h,f=Math.ceil(n.height/e)-u-2*h,l=a.slice(),d=t.fillGradientStops.slice();if(!d.length)for(var m=l.length+1,y=1;y<m;++y)d.push(y/m);if(l.unshift(a[0]),d.unshift(0),l.push(a[a.length-1]),d.push(1),t.fillGradientType===er.LINEAR_VERTICAL){s=r.createLinearGradient(c/2,h,c/2,f+h);var P=0,gt=(o.fontProperties.fontSize+t.strokeThickness)/f;for(y=0;y<i.length;y++)for(var st=o.lineHeight*y,bt=0;bt<l.length;bt++){var Ft=Math.max(P,st/f+("number"==typeof d[bt]?d[bt]:bt/l.length)*gt);Ft=Math.min(Ft,1),s.addColorStop(Ft,l[bt]),P=Ft}}else{s=r.createLinearGradient(h,f/2,c+h,f/2);var Bt=l.length+1,Tt=1;for(y=0;y<l.length;y++)s.addColorStop("number"==typeof d[y]?d[y]:Tt/Bt,l[y]),Tt++}return s}(n,r,a,o,[s],t),r.strokeStyle=a.stroke,a.dropShadow){var f=a.dropShadowColor,l=_e("number"==typeof f?f:Se(f)),d=a.dropShadowBlur*o,m=a.dropShadowDistance*o;r.shadowColor="rgba("+255*l[0]+","+255*l[1]+","+255*l[2]+","+a.dropShadowAlpha+")",r.shadowBlur=d,r.shadowOffsetX=Math.cos(a.dropShadowAngle)*m,r.shadowOffsetY=Math.sin(a.dropShadowAngle)*m}else r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;a.stroke&&a.strokeThickness&&r.strokeText(s,h,c+t.lineHeight-u.descent),a.fill&&r.fillText(s,h,c+t.lineHeight-u.descent),r.setTransform(1,0,0,1,0,0),r.fillStyle="rgba(0, 0, 0, 0)"}var Ue=function(){function n(r,t,e){var i=r.info[0],o=r.common[0],s=Pe(r.page[0].file),u={};this._ownsTextures=e,this.font=i.face,this.size=i.size,this.lineHeight=o.lineHeight/s,this.chars={},this.pageTextures=u;for(var h=0;h<r.page.length;h++){var c=r.page[h];u[f=c.id]=t instanceof Array?t[h]:t[c.file]}for(h=0;h<r.char.length;h++){var d=r.char[h],f=d.id,m=d.page,y=r.char[h],P=y.x,tt=y.y,gt=y.width,st=y.height,bt=y.xoffset,vt=y.yoffset,pt=y.xadvance;bt/=s,vt/=s,pt/=s;var Ft=new Ut((P/=s)+u[m].frame.x/s,(tt/=s)+u[m].frame.y/s,gt/=s,st/=s);this.chars[f]={xOffset:bt,yOffset:vt,xAdvance:pt,kerning:{},texture:new Rt(u[m].baseTexture,Ft),page:m}}for(h=0;h<r.kerning.length;h++){var Bt=r.kerning[h],Tt=Bt.first,wt=Bt.second,Ht=Bt.amount;Tt/=s,Ht/=s,this.chars[wt/=s]&&(this.chars[wt].kerning[Tt]=Ht)}}return n.prototype.destroy=function(){for(var r in this.chars)this.chars[r].texture.destroy(),this.chars[r].texture=null;for(var r in this.pageTextures)this._ownsTextures&&this.pageTextures[r].destroy(!0),this.pageTextures[r]=null;this.chars=null,this.pageTextures=null},n.install=function(r,t,e){var i;if(r instanceof qr)i=r;else{var o=ka(r);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(r)}t instanceof Rt&&(t=[t]);var a=new n(i,t,e);return n.available[a.font]=a,a},n.uninstall=function(r){var t=n.available[r];if(!t)throw new Error("No font found named '"+r+"'");t.destroy(),delete n.available[r]},n.from=function(r,t,e){if(!r)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},n.defaultOptions,e),a=i.padding,s=i.resolution,u=i.textureWidth,h=i.textureHeight,c=function Gu(n){"string"==typeof n&&(n=[n]);for(var r=[],t=0,e=n.length;t<e;t++){var i=n[t];if(Array.isArray(i)){if(2!==i.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var o=i[0].charCodeAt(0),a=i[1].charCodeAt(0);if(a<o)throw new Error("[BitmapFont]: Invalid character range.");for(var s=o,u=a;s<=u;s++)r.push(String.fromCharCode(s))}else r.push.apply(r,i.split(""))}if(0===r.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return r}(i.chars),f=t instanceof rr?t:new rr(t),l=u,d=new qr;d.info[0]={face:f.fontFamily,size:f.fontSize},d.common[0]={lineHeight:f.fontSize};for(var P,tt,gt,m=0,y=0,st=0,bt=[],vt=0;vt<c.length;vt++){P||((P=document.createElement("canvas")).width=u,P.height=h,tt=P.getContext("2d"),gt=new Wt(P,{resolution:s}),bt.push(new Rt(gt)),d.page.push({id:bt.length-1,file:""}));var pt=pe.measureText(c[vt],f,!1,P),Ft=pt.width,Bt=Math.ceil(pt.height),Tt=Math.ceil(("italic"===f.fontStyle?2:1)*Ft);if(y>=h-Bt*s){if(0===y)throw new Error("[BitmapFont] textureHeight "+h+"px is too small for "+f.fontSize+"px fonts");--vt,P=null,tt=null,gt=null,y=0,m=0,st=0}else if(st=Math.max(Bt+pt.fontProperties.descent,st),Tt*s+m>=l)--vt,y+=st*s,y=Math.ceil(y),m=0,st=0;else{Xu(P,tt,pt,m,y,s,f);var wt=pt.text.charCodeAt(0);d.char.push({id:wt,page:bt.length-1,x:m/s,y:y/s,width:Tt,height:Bt,xoffset:0,yoffset:0,xadvance:Math.ceil(Ft-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),m+=(Tt+2*a)*s,m=Math.ceil(m)}}var Ht=new n(d,bt,!0);return void 0!==n.available[r]&&n.uninstall(r),n.available[r]=Ht,Ht},n.ALPHA=[["a","z"],["A","Z"]," "],n.NUMERIC=[["0","9"]],n.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],n.ASCII=[[" ","~"]],n.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:n.ALPHANUMERIC},n.available={},n}(),Xa=[],Ga=[],Hu=function(n){function r(t,e){void 0===e&&(e={});var i=n.call(this)||this;i._tint=16777215,e.font&&(lt("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),i._upgradeStyle(e));var o=Object.assign({},r.styleDefaults,e),a=o.align,s=o.tint,u=o.maxWidth,h=o.letterSpacing,c=o.fontName,f=o.fontSize;if(!Ue.available[c])throw new Error('Missing BitmapFont "'+c+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=a,i._tint=s,i._fontName=c,i._fontSize=f||Ue.available[c].size,i._text=t,i._maxWidth=u,i._maxLineHeight=0,i._letterSpacing=h,i._anchor=new ze(function(){i.dirty=!0},i,0,0),i._roundPixels=v.ROUND_PIXELS,i.dirty=!0,i._textureCache={},i}return function Nu(n,r){function t(){this.constructor=n}Fn(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}(r,n),r.prototype.updateText=function(){for(var t,e=Ue.available[this._fontName],i=this._fontSize/e.size,o=new ee,a=[],s=[],u=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",h=u.length,c=this._maxWidth*e.size/this._fontSize,f=null,l=0,d=0,m=0,y=-1,P=0,tt=0,gt=0,st=0;st<h;st++){var bt=u.charCodeAt(st),vt=u.charAt(st);if(/(?:\s)/.test(vt)&&(y=st,P=l),"\r"!==vt&&"\n"!==vt){var pt=e.chars[bt];if(pt){f&&pt.kerning[f]&&(o.x+=pt.kerning[f]);var Ft=Ga.pop()||{texture:Rt.EMPTY,line:0,charCode:0,position:new ee};Ft.texture=pt.texture,Ft.line=m,Ft.charCode=bt,Ft.position.x=o.x+pt.xOffset+this._letterSpacing/2,Ft.position.y=o.y+pt.yOffset,a.push(Ft),o.x+=pt.xAdvance+this._letterSpacing,l=o.x,gt=Math.max(gt,pt.yOffset+pt.texture.height),f=bt,-1!==y&&c>0&&o.x>c&&(qt(a,1+y-++tt,1+st-y),st=y,y=-1,s.push(P),d=Math.max(d,P),m++,o.x=0,o.y+=e.lineHeight,f=null)}}else s.push(l),d=Math.max(d,l),++m,++tt,o.x=0,o.y+=e.lineHeight,f=null}var Bt=u.charAt(u.length-1);"\r"!==Bt&&"\n"!==Bt&&(/(?:\s)/.test(Bt)&&(l=P),s.push(l),d=Math.max(d,l));var Tt=[];for(st=0;st<=m;st++){var wt=0;"right"===this._align?wt=d-s[st]:"center"===this._align&&(wt=(d-s[st])/2),Tt.push(wt)}var Ht=a.length,zt={},ne=[],ke=this._activePagesMeshData;for(st=0;st<ke.length;st++)Xa.push(ke[st]);for(st=0;st<Ht;st++){var Mt=(Ot=a[st].texture).baseTexture.uid;if(!zt[Mt]){if(!(Pt=Xa.pop())){var br=new Kr,Tr=new Zr(Rt.EMPTY);Pt={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new gr(br,Tr),vertices:null,uvs:null,indices:null}}Pt.index=0,Pt.indexCount=0,Pt.vertexCount=0,Pt.uvsCount=0,Pt.total=0;var Xe=this._textureCache;Xe[Mt]=Xe[Mt]||new Rt(Ot.baseTexture),Pt.mesh.texture=Xe[Mt],Pt.mesh.tint=this._tint,ne.push(Pt),zt[Mt]=Pt}zt[Mt].total++}for(st=0;st<ke.length;st++)-1===ne.indexOf(ke[st])&&this.removeChild(ke[st].mesh);for(st=0;st<ne.length;st++)ne[st].mesh.parent!==this&&this.addChild(ne[st].mesh);for(var st in this._activePagesMeshData=ne,zt){var Te=(Pt=zt[st]).total;if(!((null===(t=Pt.indices)||void 0===t?void 0:t.length)>6*Te)||Pt.vertices.length<2*gr.BATCHABLE_SIZE)Pt.vertices=new Float32Array(8*Te),Pt.uvs=new Float32Array(8*Te),Pt.indices=new Uint16Array(6*Te);else for(var Qr=Pt.vertices,Sr=4*Pt.total*2;Sr<Qr.length;Sr++)Qr[Sr]=0;Pt.mesh.size=6*Te}for(st=0;st<Ht;st++){var Ge=(vt=a[st]).position.x+Tt[vt.line];this._roundPixels&&(Ge=Math.round(Ge));var Ot,De=Ge*i,He=vt.position.y*i,Yt=zt[(Ot=vt.texture).baseTexture.uid],ve=Ot.frame,he=Ot._uvs,kt=Yt.index++;Yt.indices[6*kt+0]=0+4*kt,Yt.indices[6*kt+1]=1+4*kt,Yt.indices[6*kt+2]=2+4*kt,Yt.indices[6*kt+3]=0+4*kt,Yt.indices[6*kt+4]=2+4*kt,Yt.indices[6*kt+5]=3+4*kt,Yt.vertices[8*kt+0]=De,Yt.vertices[8*kt+1]=He,Yt.vertices[8*kt+2]=De+ve.width*i,Yt.vertices[8*kt+3]=He,Yt.vertices[8*kt+4]=De+ve.width*i,Yt.vertices[8*kt+5]=He+ve.height*i,Yt.vertices[8*kt+6]=De,Yt.vertices[8*kt+7]=He+ve.height*i,Yt.uvs[8*kt+0]=he.x0,Yt.uvs[8*kt+1]=he.y0,Yt.uvs[8*kt+2]=he.x1,Yt.uvs[8*kt+3]=he.y1,Yt.uvs[8*kt+4]=he.x2,Yt.uvs[8*kt+5]=he.y2,Yt.uvs[8*kt+6]=he.x3,Yt.uvs[8*kt+7]=he.y3}for(var st in this._textWidth=d*i,this._textHeight=(o.y+e.lineHeight)*i,zt){var Pt=zt[st];if(0!==this.anchor.x||0!==this.anchor.y)for(var Ee=0,nr=this._textWidth*this.anchor.x,wr=this._textHeight*this.anchor.y,Mi=0;Mi<Pt.total;Mi++)Pt.vertices[Ee++]-=nr,Pt.vertices[Ee++]-=wr,Pt.vertices[Ee++]-=nr,Pt.vertices[Ee++]-=wr,Pt.vertices[Ee++]-=nr,Pt.vertices[Ee++]-=wr,Pt.vertices[Ee++]-=nr,Pt.vertices[Ee++]-=wr;this._maxLineHeight=gt*i;var Ci=Pt.mesh.geometry.getBuffer("aVertexPosition"),Ri=Pt.mesh.geometry.getBuffer("aTextureCoord"),Za=Pt.mesh.geometry.getIndex();Ci.data=Pt.vertices,Ri.data=Pt.uvs,Za.data=Pt.indices,Ci.update(),Ri.update(),Za.update()}for(st=0;st<a.length;st++)Ga.push(a[st])},r.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},r.prototype.getLocalBounds=function(){return this.validate(),n.prototype.getLocalBounds.call(this)},r.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!Ue.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),r.prototype._upgradeStyle=function(t){if("string"==typeof t.font){var e=t.font.split(" ");t.fontName=1===e.length?e[0]:e.slice(1).join(" "),e.length>=2&&(t.fontSize=parseInt(e[0],10))}else t.fontName=t.font.name,t.fontSize="number"==typeof t.font.size?t.font.size:parseInt(t.font.size,10)},r.prototype.destroy=function(t){var e=this._textureCache;for(var i in e)e[i].destroy(),delete e[i];this._textureCache=null,n.prototype.destroy.call(this,t)},r.registerFont=function(t,e){return lt("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),Ue.install(t,e)},Object.defineProperty(r,"fonts",{get:function(){return lt("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),Ue.available},enumerable:!1,configurable:!0}),r.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},r}(ye),Ha=function(){function n(){}return n.add=function(){zr.setExtensionXhrType("fnt",zr.XHR_RESPONSE_TYPE.TEXT)},n.use=function(r,t){var e=ka(r.data);if(e)for(var i=n.getBaseUrl(this,r),o=e.parse(r.data),a={},s=function(y){a[y.metadata.pageFile]=y.texture,Object.keys(a).length===o.page.length&&(r.bitmapFont=Ue.install(o,a,!0),t())},u=0;u<o.page.length;++u){var h=o.page[u].file,c=i+h,f=!1;for(var l in this.resources){var d=this.resources[l];if(d.url===c){d.metadata.pageFile=h,d.texture?s(d):d.onAfterMiddleware.add(s),f=!0;break}}if(!f){var m={crossOrigin:r.crossOrigin,loadType:zr.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:h},r.metadata.imageMetadata),parentResource:r};this.add(c,m,s)}}else t()},n.getBaseUrl=function(r,t){var e=t.isDataUrl?"":n.dirname(t.url);return t.isDataUrl&&("."===e&&(e=""),r.baseUrl&&e&&"/"===r.baseUrl.charAt(r.baseUrl.length-1)&&(e+="/")),(e=e.replace(r.baseUrl,""))&&"/"!==e.charAt(e.length-1)&&(e+="/"),e},n.dirname=function(r){var t=r.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===r?".":""===t?"/":t},n}(),Bn=function(n,r){return(Bn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)},zu=function(n){function r(t){void 0===t&&(t=1);var e=n.call(this,Zo,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return e.alpha=t,e}return function Yu(n,r){function t(){this.constructor=n}Bn(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}(r,n),Object.defineProperty(r.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),r}(Oe),Un=function(n,r){return(Un=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)};function Ya(n,r){function t(){this.constructor=n}Un(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}var $u={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Zu=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n"),_r=(()=>{return(n=_r||(_r={}))[n.NO=0]="NO",n[n.YES=1]="YES",n[n.AUTO=2]="AUTO",n[n.BLEND=0]="BLEND",n[n.CLEAR=1]="CLEAR",n[n.BLIT=2]="BLIT",_r;var n})(),kn=function(n){function r(t,e,i,o,a){void 0===e&&(e=8),void 0===i&&(i=4),void 0===o&&(o=v.FILTER_RESOLUTION),void 0===a&&(a=5);var s=this,u=function Wu(n,r){var o,t=Math.ceil(n/2),e="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",i="";o=r?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<n;a++){var s=o.replace("%index%",a.toString());i+=s=s.replace("%sampleIndex%",a-(t-1)+".0"),i+="\n"}return(e=e.replace("%blur%",i)).replace("%size%",n.toString())}(a,t),h=function Ku(n){for(var a,r=$u[n],t=r.length,e=Zu,i="",s=0;s<n;s++){var u="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",s.toString());a=s,s>=t&&(a=n-s-1),i+=u=u.replace("%value%",r[a].toString()),i+="\n"}return(e=e.replace("%blur%",i)).replace("%size%",n.toString())}(a);return(s=n.call(this,u,h)||this).horizontal=t,s.resolution=o,s._quality=0,s.quality=i,s.blur=e,s}return Ya(r,n),r.prototype.apply=function(t,e,i,o){if(this.uniforms.strength=i?this.horizontal?1/i.width*(i.width/e.width):1/i.height*(i.height/e.height):this.horizontal?1/t.renderer.width*(t.renderer.width/e.width):1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,o);else{var a=t.getFilterTexture(),s=t.renderer,u=e,h=a;this.state.blend=!1,t.applyFilter(this,u,h,_r.CLEAR);for(var c=1;c<this.passes-1;c++){t.bindAndClear(u,_r.BLIT),this.uniforms.uSampler=h;var f=h;h=u,u=f,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,h,i,o),t.returnFilterTexture(a)}},Object.defineProperty(r.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),r}(Oe),qu=function(n){function r(t,e,i,o){void 0===t&&(t=8),void 0===e&&(e=4),void 0===i&&(i=v.FILTER_RESOLUTION),void 0===o&&(o=5);var a=n.call(this)||this;return a.blurXFilter=new kn(!0,t,e,i,o),a.blurYFilter=new kn(!1,t,e,i,o),a.resolution=i,a.quality=e,a.blur=t,a.repeatEdgePixels=!1,a}return Ya(r,n),r.prototype.apply=function(t,e,i,o){var a=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(a&&s){var u=t.getFilterTexture();this.blurXFilter.apply(t,e,u,_r.CLEAR),this.blurYFilter.apply(t,u,i,o),t.returnFilterTexture(u)}else s?this.blurYFilter.apply(t,e,i,o):this.blurXFilter.apply(t,e,i,o)},r.prototype.updatePadding=function(){this.padding=this._repeatEdgePixels?0:2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(r.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),r}(Oe),Xn=function(n,r){return(Xn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)},Gn=function(n){function r(){var t=this,e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(t=n.call(this,on,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",e)||this).alpha=1,t}return function Qu(n,r){function t(){this.constructor=n}Xn(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}(r,n),r.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},r.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},r.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},r.prototype.brightness=function(t,e){this._loadMatrix([t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0],e)},r.prototype.greyscale=function(t,e){this._loadMatrix([t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0],e)},r.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},r.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),o=Math.sin(t),s=1/3,u=(0,Math.sqrt)(s);this._loadMatrix([i+(1-i)*s,s*(1-i)-u*o,s*(1-i)+u*o,0,0,s*(1-i)+u*o,i+s*(1-i),s*(1-i)-u*o,0,0,s*(1-i)-u*o,s*(1-i)+u*o,i+s*(1-i),0,0,0,0,0,1,0],e)},r.prototype.contrast=function(t,e){var i=(t||0)+1,o=-.5*(i-1);this._loadMatrix([i,0,0,0,o,0,i,0,0,o,0,0,i,0,o,0,0,0,1,0],e)},r.prototype.saturate=function(t,e){void 0===t&&(t=0);var i=2*t/3+1,o=-.5*(i-1);this._loadMatrix([i,o,o,0,0,o,i,o,0,0,o,o,i,0,0,0,0,0,1,0],e)},r.prototype.desaturate=function(){this.saturate(-1)},r.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},r.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},r.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},r.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},r.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},r.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},r.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},r.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},r.prototype.colorTone=function(t,e,i,o,a){var s=((i=i||16770432)>>16&255)/255,u=(i>>8&255)/255,h=(255&i)/255,c=((o=o||3375104)>>16&255)/255,f=(o>>8&255)/255,l=(255&o)/255;this._loadMatrix([.3,.59,.11,0,0,s,u,h,t=t||.2,0,c,f,l,e=e||.15,0,s-c,u-f,h-l,0,0],a)},r.prototype.night=function(t,e){this._loadMatrix([-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],e)},r.prototype.predator=function(t,e){this._loadMatrix([11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0],e)},r.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},r.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(r.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),r}(Oe);Gn.prototype.grayscale=Gn.prototype.greyscale;var Hn=function(n,r){return(Hn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)},ih=function(n){function r(t,e){var i=this,o=new Qt;return t.renderable=!1,(i=n.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:t._texture,filterMatrix:o,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=t,i.maskMatrix=o,null==e&&(e=20),i.scale=new ee(e,e),i}return function th(n,r){function t(){this.constructor=n}Hn(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}(r,n),r.prototype.apply=function(t,e,i,o){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var a=this.maskSprite.worldTransform,s=Math.sqrt(a.a*a.a+a.b*a.b),u=Math.sqrt(a.c*a.c+a.d*a.d);0!==s&&0!==u&&(this.uniforms.rotation[0]=a.a/s,this.uniforms.rotation[1]=a.b/s,this.uniforms.rotation[2]=a.c/u,this.uniforms.rotation[3]=a.d/u),t.applyFilter(this,e,i,o)},Object.defineProperty(r.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),r}(Oe),Yn=function(n,r){return(Yn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)},sh=function(n){function r(){return n.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function nh(n,r){function t(){this.constructor=n}Yn(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}(r,n),r}(Oe),jn=function(n,r){return(jn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)},lh=function(n){function r(t,e){void 0===t&&(t=.5),void 0===e&&(e=Math.random());var i=n.call(this,on,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return i.noise=t,i.seed=e,i}return function uh(n,r){function t(){this.constructor=n}jn(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}(r,n),Object.defineProperty(r.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),r}(Oe),ja=new Qt;Jt.prototype._cacheAsBitmap=!1,Jt.prototype._cacheData=null;var fh=function n(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(Jt.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(n){var r;this._cacheAsBitmap!==n&&(this._cacheAsBitmap=n,n?(this._cacheData||(this._cacheData=new fh),(r=this._cacheData).originalRender=this.render,r.originalRenderCanvas=this.renderCanvas,r.originalUpdateTransform=this.updateTransform,r.originalCalculateBounds=this.calculateBounds,r.originalGetLocalBounds=this.getLocalBounds,r.originalDestroy=this.destroy,r.originalContainsPoint=this.containsPoint,r.originalMask=this._mask,r.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((r=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=r.originalRender,this.renderCanvas=r.originalRenderCanvas,this.calculateBounds=r.originalCalculateBounds,this.getLocalBounds=r.originalGetLocalBounds,this.destroy=r.originalDestroy,this.updateTransform=r.originalUpdateTransform,this.containsPoint=r.originalContainsPoint,this._mask=r.originalMask,this.filterArea=r.originalFilterArea))}}}),Jt.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))},Jt.prototype._initCachedDisplayObject=function(r){if(!this._cacheData||!this._cacheData.sprite){var t=this.alpha;this.alpha=1,r.batch.flush();var e=this.getLocalBounds(null,!0).clone();this.filters&&e.pad(this.filters[0].padding),e.ceil(v.RESOLUTION);var o=r.renderTexture.current,a=r.renderTexture.sourceFrame.clone(),s=r.renderTexture.destinationFrame.clone(),u=r.projection.transform,h=Ke.create({width:e.width,height:e.height}),c="cacheAsBitmap_"+le();this._cacheData.textureCacheId=c,Wt.addToCache(h.baseTexture,c),Rt.addToCache(h,c);var f=this.transform.localTransform.copyTo(ja).invert().translate(-e.x,-e.y);this.render=this._cacheData.originalRender,r.render(this,h,!0,f,!1),r.projection.transform=u,r.renderTexture.bind(o,a,s),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var l=new yr(h);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-e.x/e.width,l.anchor.y=-e.y/e.height,l.alpha=t,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=l.containsPoint.bind(l)}},Jt.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))},Jt.prototype._initCachedDisplayObjectCanvas=function(r){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(null,!0),e=this.alpha;this.alpha=1;var i=r.context,o=r._projTransform;t.ceil(v.RESOLUTION);var a=Ke.create({width:t.width,height:t.height}),s="cacheAsBitmap_"+le();this._cacheData.textureCacheId=s,Wt.addToCache(a.baseTexture,s),Rt.addToCache(a,s);var u=ja;this.transform.localTransform.copyTo(u),u.invert(),u.tx-=t.x,u.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,a,!0,u,!1),r.context=i,r._projTransform=o,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var h=new yr(a);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-t.x/t.width,h.anchor.y=-t.y/t.height,h.alpha=e,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)}},Jt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},Jt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},Jt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Wt.removeFromCache(this._cacheData.textureCacheId),Rt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Jt.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)},Jt.prototype.name=null,ye.prototype.getChildByName=function(r,t){for(var e=0,i=this.children.length;e<i;e++)if(this.children[e].name===r)return this.children[e];if(t)for(e=0,i=this.children.length;e<i;e++)if(this.children[e].getChildByName){var a=this.children[e].getChildByName(r,!0);if(a)return a}return null},Jt.prototype.getGlobalPosition=function(r,t){return void 0===r&&(r=new ee),void 0===t&&(t=!1),this.parent?this.parent.toGlobal(this.position,r,t):(r.x=this.position.x,r.y=this.position.y),r};var zn=function(n,r){return(zn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)};function xr(n,r){function t(){this.constructor=n}zn(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}var za=function(n){function r(t,e,i,o){void 0===t&&(t=100),void 0===e&&(e=100),void 0===i&&(i=10),void 0===o&&(o=10);var a=n.call(this)||this;return a.segWidth=i,a.segHeight=o,a.width=t,a.height=e,a.build(),a}return xr(r,n),r.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],i=[],o=[],a=this.segWidth-1,s=this.segHeight-1,u=this.width/a,h=this.height/s,c=0;c<t;c++){var f=c%this.segWidth,l=c/this.segWidth|0;e.push(f*u,l*h),i.push(f/a,l/s)}var d=a*s;for(c=0;c<d;c++){var m=c%a,y=c/a|0,tt=y*this.segWidth+m+1,gt=(y+1)*this.segWidth+m;o.push(y*this.segWidth+m,tt,gt,tt,(y+1)*this.segWidth+m+1,gt)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},r}(Kr),Va=function(n){function r(t,e,i){void 0===t&&(t=200),void 0===i&&(i=0);var o=n.call(this,new Float32Array(4*e.length),new Float32Array(4*e.length),new Uint16Array(6*(e.length-1)))||this;return o.points=e,o._width=t,o.textureScale=i,o.build(),o}return xr(r,n),Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),r.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),o=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),i.data=new Float32Array(4*t.length),o.data=new Uint16Array(6*(t.length-1)));var a=i.data,s=o.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;for(var u=0,h=t[0],c=this._width*this.textureScale,f=t.length,l=0;l<f;l++){var d=4*l;if(this.textureScale>0){var m=h.x-t[l].x,y=h.y-t[l].y,P=Math.sqrt(m*m+y*y);h=t[l],u+=P/c}else u=l/(f-1);a[d]=u,a[d+1]=0,a[d+2]=u,a[d+3]=1}var tt=0;for(l=0;l<f-1;l++)s[tt++]=d=2*l,s[tt++]=d+1,s[tt++]=d+2,s[tt++]=d+2,s[tt++]=d+1,s[tt++]=d+3;i.update(),o.update(),this.updateVertices()}}},r.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var i,e=t[0],o=0,a=0,s=this.buffers[0].data,u=t.length,h=0;h<u;h++){var c=t[h],f=4*h;a=-((i=h<t.length-1?t[h+1]:c).x-e.x),o=i.y-e.y;var l=Math.sqrt(o*o+a*a),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;o/=l,a/=l,a*=d,s[f]=c.x+(o*=d),s[f+1]=c.y+a,s[f+2]=c.x-o,s[f+3]=c.y-a,e=c}this.buffers[0].update()}},r.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},r}(Kr),ch=function(n){function r(t,e,i){void 0===i&&(i=0);var o=this,a=new Va(t.height,e,i),s=new Zr(t);return i>0&&(t.baseTexture.wrapMode=Et.REPEAT),(o=n.call(this,a,s)||this).autoUpdate=!0,o}return xr(r,n),r.prototype._render=function(t){var e=this.geometry;(this.autoUpdate||e._width!==this.shader.texture.height)&&(e._width=this.shader.texture.height,e.update()),n.prototype._render.call(this,t)},r}(gr),Wa=function(n){function r(t,e,i){var o=this,a=new za(t.width,t.height,e,i),s=new Zr(Rt.WHITE);return(o=n.call(this,a,s)||this).texture=t,o}return xr(r,n),r.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry;t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build()},Object.defineProperty(r.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),r.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),n.prototype._render.call(this,t)},r.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),n.prototype.destroy.call(this,t)},r}(gr),dh=function(n){function r(t,e,i,o,a){void 0===t&&(t=Rt.EMPTY);var s=this,u=new Kr(e,i,o);u.getBuffer("aVertexPosition").static=!1;var h=new Zr(t);return(s=n.call(this,u,h,null,a)||this).autoUpdate=!0,s}return xr(r,n),Object.defineProperty(r.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),r.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),n.prototype._render.call(this,t)},r}(gr),ph=function(n){function r(t,e,i,o,a){void 0===e&&(e=10),void 0===i&&(i=10),void 0===o&&(o=10),void 0===a&&(a=10);var s=n.call(this,Rt.WHITE,4,4)||this;return s._origWidth=t.orig.width,s._origHeight=t.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=e,s._rightWidth=o,s._topHeight=i,s._bottomHeight=a,s.texture=t,s}return xr(r,n),r.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(r.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),r.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},r.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},r.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,i=this._topHeight+this._bottomHeight;return Math.min(this._width>t?1:this._width/t,this._height>i?1:this._height/i)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),r.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var i=1/this._origWidth,o=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[9]=e[11]=e[13]=e[15]=o*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-o*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},r}(Wa),Vn=function(n,r){return(Vn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)},mh=function(n){function r(t,e){void 0===e&&(e=!0);var i=n.call(this,t[0]instanceof Rt?t[0]:t[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=e,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=t,i}return function vh(n,r){function t(){this.constructor=n}Vn(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}(r,n),r.prototype.stop=function(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(re.shared.remove(this.update,this),this._isConnectedToTicker=!1))},r.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(re.shared.add(this.update,this,ge.HIGH),this._isConnectedToTicker=!0))},r.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},r.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},r.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=e/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];var a=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())}},r.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},r.prototype.destroy=function(t){this.stop(),n.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},r.fromFrames=function(t){for(var e=[],i=0;i<t.length;++i)e.push(Rt.from(t[i]));return new r(e)},r.fromImages=function(t){for(var e=[],i=0;i<t.length;++i)e.push(Rt.from(t[i]));return new r(e)},Object.defineProperty(r.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof Rt)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(re.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(re.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),r}(yr),Wn=function(n,r){return(Wn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(n,r)};function $a(n,r){function t(){this.constructor=n}Wn(n,r),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}var _t="5.0.0";function yh(){var n=this;Object.defineProperties(n,{SVG_SIZE:{get:function(){return lt(_t,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),n.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return lt(_t,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),n.Transform}},TransformBase:{get:function(){return lt(_t,"PIXI.TransformBase class has been removed, use PIXI.Transform"),n.Transform}},TRANSFORM_MODE:{get:function(){return lt(_t,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return lt(_t,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),n.Renderer}},CanvasRenderTarget:{get:function(){return lt(_t,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),n.utils.CanvasRenderTarget}},loader:{get:function(){return lt(_t,"PIXI.loader instance has moved to PIXI.Loader.shared"),n.Loader.shared}},FilterManager:{get:function(){return lt(_t,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),n.systems.FilterSystem}},CanvasTinter:{get:function(){return lt("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),n.canvasUtils}},GroupD8:{get:function(){return lt("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),n.groupD8}}}),n.accessibility={},Object.defineProperties(n.accessibility,{AccessibilityManager:{get:function(){return lt("5.3.0","PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager"),n.AccessibilityManager}}}),n.interaction={},Object.defineProperties(n.interaction,{InteractionManager:{get:function(){return lt("5.3.0","PIXI.interaction.InteractionManager moved to PIXI.InteractionManager"),n.InteractionManager}},InteractionData:{get:function(){return lt("5.3.0","PIXI.interaction.InteractionData moved to PIXI.InteractionData"),n.InteractionData}},InteractionEvent:{get:function(){return lt("5.3.0","PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent"),n.InteractionEvent}}}),n.prepare={},Object.defineProperties(n.prepare,{BasePrepare:{get:function(){return lt("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),n.BasePrepare}},Prepare:{get:function(){return lt("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),n.Prepare}},CanvasPrepare:{get:function(){return lt("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),n.CanvasPrepare}}}),n.extract={},Object.defineProperties(n.extract,{Extract:{get:function(){return lt("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),n.Extract}},CanvasExtract:{get:function(){return lt("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),n.CanvasExtract}}}),n.extras={},Object.defineProperties(n.extras,{TilingSprite:{get:function(){return lt(_t,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),n.TilingSprite}},TilingSpriteRenderer:{get:function(){return lt(_t,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),n.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return lt(_t,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),n.AnimatedSprite}},BitmapText:{get:function(){return lt(_t,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),n.BitmapText}}}),n.TilingSprite.fromFrame=function(l,d,m){return lt("5.3.0","TilingSprite.fromFrame is deprecated, use TilingSprite.from"),n.TilingSprite.from(l,{width:d,height:m})},n.TilingSprite.fromImage=function(l,d,m,y){return void 0===y&&(y={}),lt("5.3.0","TilingSprite.fromImage is deprecated, use TilingSprite.from"),y&&"object"!=typeof y&&(y={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),y.width=d,y.height=m,n.TilingSprite.from(l,y)},Object.defineProperties(n.utils,{getSvgSize:{get:function(){return lt(_t,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),n.resources.SVGResource.getSize}}}),n.mesh={},Object.defineProperties(n.mesh,{Mesh:{get:function(){return lt(_t,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),n.SimpleMesh}},NineSlicePlane:{get:function(){return lt(_t,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),n.NineSlicePlane}},Plane:{get:function(){return lt(_t,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),n.SimplePlane}},Rope:{get:function(){return lt(_t,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),n.SimpleRope}},RawMesh:{get:function(){return lt(_t,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),n.Mesh}},CanvasMeshRenderer:{get:function(){return lt(_t,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),n.CanvasMeshRenderer}},MeshRenderer:{get:function(){return lt(_t,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),n.MeshRenderer}}}),n.particles={},Object.defineProperties(n.particles,{ParticleContainer:{get:function(){return lt(_t,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),n.ParticleContainer}},ParticleRenderer:{get:function(){return lt(_t,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),n.ParticleRenderer}}}),n.ticker={},Object.defineProperties(n.ticker,{Ticker:{get:function(){return lt(_t,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),n.Ticker}},shared:{get:function(){return lt(_t,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),n.Ticker.shared}}}),n.loaders={},Object.defineProperties(n.loaders,{Loader:{get:function(){return lt(_t,"PIXI.loaders.Loader class has moved to PIXI.Loader"),n.Loader}},Resource:{get:function(){return lt(_t,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),n.LoaderResource}},bitmapFontParser:{get:function(){return lt(_t,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),n.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){lt(_t,"PIXI.loaders.parseBitmapFontData function has removed")}},spritesheetParser:{get:function(){return lt(_t,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),n.SpritesheetLoader.use}},getResourcePath:{get:function(){return lt(_t,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),n.SpritesheetLoader.getResourcePath}}}),n.Loader.addPixiMiddleware=function(l){return lt(_t,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),n.loaders.Loader.registerPlugin({use:l()})};var r=function(f){return"on"+f.charAt(0).toUpperCase()+f.slice(1)};Object.assign(n.Loader.prototype,{on:function(f){var l=r(f);lt(_t,"PIXI.Loader#on is completely deprecated, use PIXI.Loader#"+l+".add")},once:function(f){var l=r(f);lt(_t,"PIXI.Loader#once is completely deprecated, use PIXI.Loader#"+l+".once")},off:function(f){var l=r(f);lt(_t,"PIXI.Loader#off is completely deprecated, use PIXI.Loader#"+l+".detach")}}),Object.defineProperty(n.extract,"WebGLExtract",{get:function(){return lt(_t,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),n.Extract}}),Object.defineProperty(n.prepare,"WebGLPrepare",{get:function(){return lt(_t,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),n.Prepare}}),n.Container.prototype._renderWebGL=function(l){lt(_t,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(l)},n.Container.prototype.renderWebGL=function(l){lt(_t,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(l)},n.DisplayObject.prototype.renderWebGL=function(l){lt(_t,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(l)},n.Container.prototype.renderAdvancedWebGL=function(l){lt(_t,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(l)},Object.defineProperties(n.settings,{TRANSFORM_MODE:{get:function(){return lt(_t,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){lt(_t,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var t=n.BaseTexture;t.prototype.loadSource=function(l){lt(_t,"PIXI.BaseTexture.loadSource method has been deprecated");var d=n.resources.autoDetectResource(l);d.internal=!0,this.setResource(d),this.update()};var e=!1;Object.defineProperties(t.prototype,{hasLoaded:{get:function(){return lt(_t,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){var f;return lt(_t,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),null===(f=this.resource)||void 0===f?void 0:f.url},set:function(f){lt(_t,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=f)}},source:{get:function(){return lt(_t,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource.source},set:function(f){lt(_t,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=f)}},premultiplyAlpha:{get:function(){return lt("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(f){lt("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(f)}},_id:{get:function(){return e||(lt("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),e=!0),this._batchLocation},set:function(f){this._batchLocation=f}}}),t.fromImage=function(l,d,m,y){return lt(_t,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from"),t.from(l,{scaleMode:m,resourceOptions:{scale:y,crossorigin:d}})},t.fromCanvas=function(l,d){return lt(_t,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),t.from(l,{scaleMode:d})},t.fromSVG=function(l,d,m,y){return lt(_t,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from"),t.from(l,{scaleMode:m,resourceOptions:{scale:y,crossorigin:d}})},Object.defineProperties(n.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return lt("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(f){lt("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(f)}}}),n.Point.prototype.copy=function(l){return lt(_t,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(l)},n.ObservablePoint.prototype.copy=function(l){return lt(_t,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(l)},n.Rectangle.prototype.copy=function(l){return lt(_t,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(l)},n.Matrix.prototype.copy=function(l){return lt(_t,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(l)},n.systems.StateSystem.prototype.setState=function(l){return lt("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(l)},Object.assign(n.systems.FilterSystem.prototype,{getRenderTarget:function(f,l){return lt(_t,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(null,l)},returnRenderTarget:function(f){lt(_t,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(f)},calculateScreenSpaceMatrix:function(f){lt(_t,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var l=f.identity(),d=this.activeState,m=d.sourceFrame,y=d.destinationFrame;return l.translate(m.x/y.width,m.y/y.height),l.scale(y.width,y.height),l},calculateNormalizedScreenSpaceMatrix:function(f){lt(_t,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var l=this.activeState,d=l.sourceFrame,m=l.destinationFrame,y=f.identity();return y.translate(d.x/m.width,d.y/m.height),y.scale(m.width/d.width,m.height/d.height),y}}),Object.defineProperties(n.RenderTexture.prototype,{sourceFrame:{get:function(){return lt(_t,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return lt(_t,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var i=function(f){function l(d,m,y,P){return lt(_t,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),f.call(this,!0,d,m,y,P)||this}return $a(l,f),l}(n.filters.BlurFilterPass),o=function(f){function l(d,m,y,P){return lt(_t,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),f.call(this,!1,d,m,y,P)||this}return $a(l,f),l}(n.filters.BlurFilterPass);Object.assign(n.filters,{BlurXFilter:i,BlurYFilter:o});var a=n.Sprite,s=n.Texture,u=n.Graphics;function h(f,l,d,m){return lt(_t,"PIXI.Sprite."+f+" method is deprecated, use PIXI.Sprite.from"),a.from(l,{resourceOptions:{scale:m,crossorigin:d}})}function c(f,l,d,m){return lt(_t,"PIXI.Texture."+f+" method is deprecated, use PIXI.Texture.from"),s.from(l,{resourceOptions:{scale:m,crossorigin:d}})}u.prototype.generateCanvasTexture||(u.prototype.generateCanvasTexture=function(){lt(_t,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(u.prototype,"graphicsData",{get:function(){return lt(_t,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}}),a.fromImage=h.bind(null,"fromImage"),a.fromSVG=h.bind(null,"fromSVG"),a.fromCanvas=h.bind(null,"fromCanvas"),a.fromVideo=h.bind(null,"fromVideo"),a.fromFrame=h.bind(null,"fromFrame"),s.fromImage=c.bind(null,"fromImage"),s.fromSVG=c.bind(null,"fromSVG"),s.fromCanvas=c.bind(null,"fromCanvas"),s.fromVideo=c.bind(null,"fromVideo"),s.fromFrame=c.bind(null,"fromFrame"),Object.defineProperty(n.AbstractRenderer.prototype,"autoResize",{get:function(){return lt(_t,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(f){lt(_t,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=f}}),Object.defineProperty(n.Renderer.prototype,"textureManager",{get:function(){return lt(_t,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),n.utils.mixins={mixin:function(){lt(_t,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){lt(_t,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){lt(_t,"PIXI.utils.mixins.performMixins function is no longer available")}},Object.defineProperty(n.BitmapText.prototype,"font",{get:function(){return lt("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),{name:this._fontName,size:this._fontSize,tint:this._tint,align:this._align}},set:function(f){if(lt("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),f){var l={font:f};this._upgradeStyle(l),l.fontSize=l.fontSize||n.BitmapFont.available[l.fontName].size,this._fontName=l.fontName,this._fontSize=l.fontSize,this.dirty=!0}}})}Me.registerPlugin("accessibility",Jn),Me.registerPlugin("extract",oa),Me.registerPlugin("interaction",io),Me.registerPlugin("particle",ya),Me.registerPlugin("prepare",Ca),Me.registerPlugin("batch",ra),Me.registerPlugin("tilingSprite",Na),Je.registerPlugin(Ha),Je.registerPlugin(Da),jr.registerPlugin(to),jr.registerPlugin(pa);var gh="5.3.12",_h={AlphaFilter:zu,BlurFilter:qu,BlurFilterPass:kn,ColorMatrixFilter:Gn,DisplacementFilter:ih,FXAAFilter:sh,NoiseFilter:lh}},9511:(mt,yt,L)=>{"use strict";var k=L(5203),nt=L(7484),T=L(7027)(),Q=L(7378),j=L(2844),Y=k("%Math.floor%");mt.exports=function(H,et){if("function"!=typeof H)throw new j("`fn` is not a function");if("number"!=typeof et||et<0||et>4294967295||Y(et)!==et)throw new j("`length` must be a positive 32-bit integer");var W=arguments.length>2&&!!arguments[2],$=!0,Z=!0;if("length"in H&&Q){var ot=Q(H,"length");ot&&!ot.configurable&&($=!1),ot&&!ot.writable&&(Z=!1)}return($||Z||!W)&&(T?nt(H,"length",et,!0,!0):nt(H,"length",et)),H}},8475:(mt,yt,L)=>{"use strict";var k=L(5203),nt=L(3957),T=L(7024),Q=L(2844),j=k("%WeakMap%",!0),Y=k("%Map%",!0),C=nt("WeakMap.prototype.get",!0),H=nt("WeakMap.prototype.set",!0),et=nt("WeakMap.prototype.has",!0),W=nt("Map.prototype.get",!0),$=nt("Map.prototype.set",!0),Z=nt("Map.prototype.has",!0),ot=function(_,X){for(var ht,B=_;null!==(ht=B.next);B=ht)if(ht.key===X)return B.next=ht.next,ht.next=_.next,_.next=ht,ht};mt.exports=function(){var X,B,ht,ft={assert:function(b){if(!ft.has(b))throw new Q("Side channel does not contain "+T(b))},get:function(b){if(j&&b&&("object"==typeof b||"function"==typeof b)){if(X)return C(X,b)}else if(Y){if(B)return W(B,b)}else if(ht)return function(_,X){var B=ot(_,X);return B&&B.value}(ht,b)},has:function(b){if(j&&b&&("object"==typeof b||"function"==typeof b)){if(X)return et(X,b)}else if(Y){if(B)return Z(B,b)}else if(ht)return function(_,X){return!!ot(_,X)}(ht,b);return!1},set:function(b,rt){j&&b&&("object"==typeof b||"function"==typeof b)?(X||(X=new j),H(X,b,rt)):Y?(B||(B=new Y),$(B,b,rt)):(ht||(ht={key:{},next:null}),function(_,X,B){var ht=ot(_,X);ht?ht.value=B:_.next={key:X,next:_.next,value:B}}(ht,b,rt))}};return ft}},1308:function(mt,yt,L){var k;mt=L.nmd(mt),function(nt){"object"==typeof global&&global;var Y,C=2147483647,H=36,K=/^xn--/,_=/[^\x20-\x7E]/,X=/[\x2E\u3002\uFF0E\uFF61]/g,B={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ft=Math.floor,b=String.fromCharCode;function I(S){throw new RangeError(B[S])}function dt(S,A){for(var N=S.length,ut=[];N--;)ut[N]=A(S[N]);return ut}function D(S,A){var N=S.split("@"),ut="";return N.length>1&&(ut=N[0]+"@",S=N[1]),ut+dt((S=S.replace(X,".")).split("."),A).join(".")}function G(S){for(var w,F,A=[],N=0,ut=S.length;N<ut;)(w=S.charCodeAt(N++))>=55296&&w<=56319&&N<ut?56320==(64512&(F=S.charCodeAt(N++)))?A.push(((1023&w)<<10)+(1023&F)+65536):(A.push(w),N--):A.push(w);return A}function z(S){return dt(S,function(A){var N="";return A>65535&&(N+=b((A-=65536)>>>10&1023|55296),A=56320|1023&A),N+b(A)}).join("")}function V(S){return S-48<10?S-22:S-65<26?S-65:S-97<26?S-97:H}function it(S,A){return S+22+75*(S<26)-((0!=A)<<5)}function p(S,A,N){var ut=0;for(S=N?ft(S/700):S>>1,S+=ft(S/A);S>455;ut+=H)S=ft(S/35);return ft(ut+36*S/(S+38))}function v(S){var ut,M,J,at,It,Et,Dt,Lt,St,xt,A=[],N=S.length,w=0,F=128,g=72;for((M=S.lastIndexOf("-"))<0&&(M=0),J=0;J<M;++J)S.charCodeAt(J)>=128&&I("not-basic"),A.push(S.charCodeAt(J));for(at=M>0?M+1:0;at<N;){for(It=w,Et=1,Dt=H;at>=N&&I("invalid-input"),((Lt=V(S.charCodeAt(at++)))>=H||Lt>ft((C-w)/Et))&&I("overflow"),w+=Lt*Et,!(Lt<(St=Dt<=g?1:Dt>=g+26?26:Dt-g));Dt+=H)Et>ft(C/(xt=H-St))&&I("overflow"),Et*=xt;g=p(w-It,ut=A.length+1,0==It),ft(w/ut)>C-F&&I("overflow"),F+=ft(w/ut),w%=ut,A.splice(w++,0,F)}return z(A)}function x(S){var A,N,ut,w,F,g,M,J,at,It,Et,Lt,St,xt,Gt,Dt=[];for(Lt=(S=G(S)).length,A=128,N=0,F=72,g=0;g<Lt;++g)(Et=S[g])<128&&Dt.push(b(Et));for(ut=w=Dt.length,w&&Dt.push("-");ut<Lt;){for(M=C,g=0;g<Lt;++g)(Et=S[g])>=A&&Et<M&&(M=Et);for(M-A>ft((C-N)/(St=ut+1))&&I("overflow"),N+=(M-A)*St,A=M,g=0;g<Lt;++g)if((Et=S[g])<A&&++N>C&&I("overflow"),Et==A){for(J=N,at=H;!(J<(It=at<=F?1:at>=F+26?26:at-F));at+=H)Dt.push(b(it(It+(Gt=J-It)%(xt=H-It),0))),J=ft(Gt/xt);Dt.push(b(it(J,0))),F=p(N,St,ut==w),N=0,++ut}++N,++A}return Dt.join("")}Y={version:"1.4.1",ucs2:{decode:G,encode:z},decode:v,encode:x,toASCII:function E(S){return D(S,function(A){return _.test(A)?"xn--"+x(A):A})},toUnicode:function O(S){return D(S,function(A){return K.test(A)?v(A.slice(4).toLowerCase()):A})}},void 0!==(k=function(){return Y}.call(yt,L,yt,mt))&&(mt.exports=k)}()},4277:mt=>{"use strict";var yt=String.prototype.replace,L=/%20/g;mt.exports={default:"RFC3986",formatters:{RFC1738:function(nt){return yt.call(nt,L,"+")},RFC3986:function(nt){return String(nt)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},8011:(mt,yt,L)=>{"use strict";var k=L(902),nt=L(6830),T=L(4277);mt.exports={formats:T,parse:nt,stringify:k}},6830:(mt,yt,L)=>{"use strict";var k=L(3295),nt=Object.prototype.hasOwnProperty,T=Array.isArray,Q={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!0,decoder:k.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Y=function(ot,R){return ot&&"string"==typeof ot&&R.comma&&ot.indexOf(",")>-1?ot.split(","):ot},$=function(R,ct,K,_){if(R){var X=K.allowDots?R.replace(/\.([^.[]+)/g,"[$1]"):R,ht=/(\[[^[\]]*])/g,ft=K.depth>0&&/(\[[^[\]]*])/.exec(X),b=ft?X.slice(0,ft.index):X,rt=[];if(b){if(!K.plainObjects&&nt.call(Object.prototype,b)&&!K.allowPrototypes)return;rt.push(b)}for(var I=0;K.depth>0&&null!==(ft=ht.exec(X))&&I<K.depth;){if(I+=1,!K.plainObjects&&nt.call(Object.prototype,ft[1].slice(1,-1))&&!K.allowPrototypes)return;rt.push(ft[1])}return ft&&rt.push("["+X.slice(ft.index)+"]"),function(ot,R,ct,K){for(var _=K?R:Y(R,ct),X=ot.length-1;X>=0;--X){var B,ht=ot[X];if("[]"===ht&&ct.parseArrays)B=ct.allowEmptyArrays&&""===_?[]:[].concat(_);else{B=ct.plainObjects?Object.create(null):{};var ft="["===ht.charAt(0)&&"]"===ht.charAt(ht.length-1)?ht.slice(1,-1):ht,b=ct.decodeDotInKeys?ft.replace(/%2E/g,"."):ft,rt=parseInt(b,10);ct.parseArrays||""!==b?!isNaN(rt)&&ht!==b&&String(rt)===b&&rt>=0&&ct.parseArrays&&rt<=ct.arrayLimit?(B=[])[rt]=_:"__proto__"!==b&&(B[b]=_):B={0:_}}_=B}return _}(rt,ct,K,_)}};mt.exports=function(ot,R){var ct=function(R){if(!R)return Q;if(void 0!==R.allowEmptyArrays&&"boolean"!=typeof R.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==R.decodeDotInKeys&&"boolean"!=typeof R.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!=R.decoder&&"function"!=typeof R.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==R.charset&&"utf-8"!==R.charset&&"iso-8859-1"!==R.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var ct=void 0===R.charset?Q.charset:R.charset,K=void 0===R.duplicates?Q.duplicates:R.duplicates;if("combine"!==K&&"first"!==K&&"last"!==K)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===R.allowDots?!0===R.decodeDotInKeys||Q.allowDots:!!R.allowDots,allowEmptyArrays:"boolean"==typeof R.allowEmptyArrays?!!R.allowEmptyArrays:Q.allowEmptyArrays,allowPrototypes:"boolean"==typeof R.allowPrototypes?R.allowPrototypes:Q.allowPrototypes,allowSparse:"boolean"==typeof R.allowSparse?R.allowSparse:Q.allowSparse,arrayLimit:"number"==typeof R.arrayLimit?R.arrayLimit:Q.arrayLimit,charset:ct,charsetSentinel:"boolean"==typeof R.charsetSentinel?R.charsetSentinel:Q.charsetSentinel,comma:"boolean"==typeof R.comma?R.comma:Q.comma,decodeDotInKeys:"boolean"==typeof R.decodeDotInKeys?R.decodeDotInKeys:Q.decodeDotInKeys,decoder:"function"==typeof R.decoder?R.decoder:Q.decoder,delimiter:"string"==typeof R.delimiter||k.isRegExp(R.delimiter)?R.delimiter:Q.delimiter,depth:"number"==typeof R.depth||!1===R.depth?+R.depth:Q.depth,duplicates:K,ignoreQueryPrefix:!0===R.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof R.interpretNumericEntities?R.interpretNumericEntities:Q.interpretNumericEntities,parameterLimit:"number"==typeof R.parameterLimit?R.parameterLimit:Q.parameterLimit,parseArrays:!1!==R.parseArrays,plainObjects:"boolean"==typeof R.plainObjects?R.plainObjects:Q.plainObjects,strictNullHandling:"boolean"==typeof R.strictNullHandling?R.strictNullHandling:Q.strictNullHandling}}(R);if(""===ot||null==ot)return ct.plainObjects?Object.create(null):{};for(var K="string"==typeof ot?function(R,ct){var ft,K={__proto__:null},B=(ct.ignoreQueryPrefix?R.replace(/^\?/,""):R).split(ct.delimiter,ct.parameterLimit===1/0?void 0:ct.parameterLimit),ht=-1,b=ct.charset;if(ct.charsetSentinel)for(ft=0;ft<B.length;++ft)0===B[ft].indexOf("utf8=")&&("utf8=%E2%9C%93"===B[ft]?b="utf-8":"utf8=%26%2310003%3B"===B[ft]&&(b="iso-8859-1"),ht=ft,ft=B.length);for(ft=0;ft<B.length;++ft)if(ft!==ht){var D,G,rt=B[ft],I=rt.indexOf("]="),dt=-1===I?rt.indexOf("="):I+1;-1===dt?(D=ct.decoder(rt,Q.decoder,b,"key"),G=ct.strictNullHandling?null:""):(D=ct.decoder(rt.slice(0,dt),Q.decoder,b,"key"),G=k.maybeMap(Y(rt.slice(dt+1),ct),function(V){return ct.decoder(V,Q.decoder,b,"value")})),G&&ct.interpretNumericEntities&&"iso-8859-1"===b&&(G=G.replace(/&#(\d+);/g,function(R,ct){return String.fromCharCode(parseInt(ct,10))})),rt.indexOf("[]=")>-1&&(G=T(G)?[G]:G);var z=nt.call(K,D);z&&"combine"===ct.duplicates?K[D]=k.combine(K[D],G):(!z||"last"===ct.duplicates)&&(K[D]=G)}return K}(ot,ct):ot,_=ct.plainObjects?Object.create(null):{},X=Object.keys(K),B=0;B<X.length;++B){var ht=X[B],ft=$(ht,K[ht],ct,"string"==typeof ot);_=k.merge(_,ft,ct)}return!0===ct.allowSparse?_:k.compact(_)}},902:(mt,yt,L)=>{"use strict";var k=L(8475),nt=L(3295),T=L(4277),Q=Object.prototype.hasOwnProperty,j={brackets:function(_){return _+"[]"},comma:"comma",indices:function(_,X){return _+"["+X+"]"},repeat:function(_){return _}},Y=Array.isArray,C=Array.prototype.push,H=function(K,_){C.apply(K,Y(_)?_:[_])},et=Date.prototype.toISOString,W=T.default,$={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:nt.encode,encodeValuesOnly:!1,format:W,formatter:T.formatters[W],indices:!1,serializeDate:function(_){return et.call(_)},skipNulls:!1,strictNullHandling:!1},ot={},R=function K(_,X,B,ht,ft,b,rt,I,dt,D,G,z,V,it,p,v,x,O){for(var E=_,S=O,A=0,N=!1;void 0!==(S=S.get(ot))&&!N;){var ut=S.get(_);if(A+=1,void 0!==ut){if(ut===A)throw new RangeError("Cyclic object value");N=!0}void 0===S.get(ot)&&(A=0)}if("function"==typeof D?E=D(X,E):E instanceof Date?E=V(E):"comma"===B&&Y(E)&&(E=nt.maybeMap(E,function(Gt){return Gt instanceof Date?V(Gt):Gt})),null===E){if(b)return dt&&!v?dt(X,$.encoder,x,"key",it):X;E=""}if(function(_){return"string"==typeof _||"number"==typeof _||"boolean"==typeof _||"symbol"==typeof _||"bigint"==typeof _}(E)||nt.isBuffer(E))return dt?[p(v?X:dt(X,$.encoder,x,"key",it))+"="+p(dt(E,$.encoder,x,"value",it))]:[p(X)+"="+p(String(E))];var g,F=[];if(void 0===E)return F;if("comma"===B&&Y(E))v&&dt&&(E=nt.maybeMap(E,dt)),g=[{value:E.length>0?E.join(",")||null:void 0}];else if(Y(D))g=D;else{var M=Object.keys(E);g=G?M.sort(G):M}var J=I?X.replace(/\./g,"%2E"):X,at=ht&&Y(E)&&1===E.length?J+"[]":J;if(ft&&Y(E)&&0===E.length)return at+"[]";for(var It=0;It<g.length;++It){var Et=g[It],Dt="object"==typeof Et&&void 0!==Et.value?Et.value:E[Et];if(!rt||null!==Dt){var Lt=z&&I?Et.replace(/\./g,"%2E"):Et,St=Y(E)?"function"==typeof B?B(at,Lt):at:at+(z?"."+Lt:"["+Lt+"]");O.set(_,A);var xt=k();xt.set(ot,O),H(F,K(Dt,St,B,ht,ft,b,rt,I,"comma"===B&&v&&Y(E)?null:dt,D,G,z,V,it,p,v,x,xt))}}return F};mt.exports=function(K,_){var ht,X=K,B=function(_){if(!_)return $;if(void 0!==_.allowEmptyArrays&&"boolean"!=typeof _.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==_.encodeDotInKeys&&"boolean"!=typeof _.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!=_.encoder&&"function"!=typeof _.encoder)throw new TypeError("Encoder has to be a function.");var X=_.charset||$.charset;if(void 0!==_.charset&&"utf-8"!==_.charset&&"iso-8859-1"!==_.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var B=T.default;if(void 0!==_.format){if(!Q.call(T.formatters,_.format))throw new TypeError("Unknown format option provided.");B=_.format}var b,ht=T.formatters[B],ft=$.filter;if(("function"==typeof _.filter||Y(_.filter))&&(ft=_.filter),b=_.arrayFormat in j?_.arrayFormat:"indices"in _?_.indices?"indices":"repeat":$.arrayFormat,"commaRoundTrip"in _&&"boolean"!=typeof _.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");return{addQueryPrefix:"boolean"==typeof _.addQueryPrefix?_.addQueryPrefix:$.addQueryPrefix,allowDots:void 0===_.allowDots?!0===_.encodeDotInKeys||$.allowDots:!!_.allowDots,allowEmptyArrays:"boolean"==typeof _.allowEmptyArrays?!!_.allowEmptyArrays:$.allowEmptyArrays,arrayFormat:b,charset:X,charsetSentinel:"boolean"==typeof _.charsetSentinel?_.charsetSentinel:$.charsetSentinel,commaRoundTrip:_.commaRoundTrip,delimiter:void 0===_.delimiter?$.delimiter:_.delimiter,encode:"boolean"==typeof _.encode?_.encode:$.encode,encodeDotInKeys:"boolean"==typeof _.encodeDotInKeys?_.encodeDotInKeys:$.encodeDotInKeys,encoder:"function"==typeof _.encoder?_.encoder:$.encoder,encodeValuesOnly:"boolean"==typeof _.encodeValuesOnly?_.encodeValuesOnly:$.encodeValuesOnly,filter:ft,format:B,formatter:ht,serializeDate:"function"==typeof _.serializeDate?_.serializeDate:$.serializeDate,skipNulls:"boolean"==typeof _.skipNulls?_.skipNulls:$.skipNulls,sort:"function"==typeof _.sort?_.sort:null,strictNullHandling:"boolean"==typeof _.strictNullHandling?_.strictNullHandling:$.strictNullHandling}}(_);"function"==typeof B.filter?X=(0,B.filter)("",X):Y(B.filter)&&(ht=B.filter);var b=[];if("object"!=typeof X||null===X)return"";var rt=j[B.arrayFormat],I="comma"===rt&&B.commaRoundTrip;ht||(ht=Object.keys(X)),B.sort&&ht.sort(B.sort);for(var dt=k(),D=0;D<ht.length;++D){var G=ht[D];B.skipNulls&&null===X[G]||H(b,R(X[G],G,rt,I,B.allowEmptyArrays,B.strictNullHandling,B.skipNulls,B.encodeDotInKeys,B.encode?B.encoder:null,B.filter,B.sort,B.allowDots,B.serializeDate,B.format,B.formatter,B.encodeValuesOnly,B.charset,dt))}var z=b.join(B.delimiter),V=!0===B.addQueryPrefix?"?":"";return B.charsetSentinel&&(V+="iso-8859-1"===B.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),z.length>0?V+z:""}},3295:(mt,yt,L)=>{"use strict";var k=L(4277),nt=Object.prototype.hasOwnProperty,T=Array.isArray,Q=function(){for(var K=[],_=0;_<256;++_)K.push("%"+((_<16?"0":"")+_.toString(16)).toUpperCase());return K}(),Y=function(_,X){for(var B=X&&X.plainObjects?Object.create(null):{},ht=0;ht<_.length;++ht)void 0!==_[ht]&&(B[ht]=_[ht]);return B};mt.exports={arrayToObject:Y,assign:function(_,X){return Object.keys(X).reduce(function(B,ht){return B[ht]=X[ht],B},_)},combine:function(_,X){return[].concat(_,X)},compact:function(_){for(var X=[{obj:{o:_},prop:"o"}],B=[],ht=0;ht<X.length;++ht)for(var ft=X[ht],b=ft.obj[ft.prop],rt=Object.keys(b),I=0;I<rt.length;++I){var dt=rt[I],D=b[dt];"object"==typeof D&&null!==D&&-1===B.indexOf(D)&&(X.push({obj:b,prop:dt}),B.push(D))}return function(_){for(;_.length>1;){var X=_.pop(),B=X.obj[X.prop];if(T(B)){for(var ht=[],ft=0;ft<B.length;++ft)void 0!==B[ft]&&ht.push(B[ft]);X.obj[X.prop]=ht}}}(X),_},decode:function(K,_,X){var B=K.replace(/\+/g," ");if("iso-8859-1"===X)return B.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(B)}catch(ht){return B}},encode:function(_,X,B,ht,ft){if(0===_.length)return _;var b=_;if("symbol"==typeof _?b=Symbol.prototype.toString.call(_):"string"!=typeof _&&(b=String(_)),"iso-8859-1"===B)return escape(b).replace(/%u[0-9a-f]{4}/gi,function(D){return"%26%23"+parseInt(D.slice(2),16)+"%3B"});for(var rt="",I=0;I<b.length;++I){var dt=b.charCodeAt(I);45===dt||46===dt||95===dt||126===dt||dt>=48&&dt<=57||dt>=65&&dt<=90||dt>=97&&dt<=122||ft===k.RFC1738&&(40===dt||41===dt)?rt+=b.charAt(I):dt<128?rt+=Q[dt]:dt<2048?rt+=Q[192|dt>>6]+Q[128|63&dt]:dt<55296||dt>=57344?rt+=Q[224|dt>>12]+Q[128|dt>>6&63]+Q[128|63&dt]:(dt=65536+((1023&dt)<<10|1023&b.charCodeAt(I+=1)),rt+=Q[240|dt>>18]+Q[128|dt>>12&63]+Q[128|dt>>6&63]+Q[128|63&dt])}return rt},isBuffer:function(_){return!(!_||"object"!=typeof _||!(_.constructor&&_.constructor.isBuffer&&_.constructor.isBuffer(_)))},isRegExp:function(_){return"[object RegExp]"===Object.prototype.toString.call(_)},maybeMap:function(_,X){if(T(_)){for(var B=[],ht=0;ht<_.length;ht+=1)B.push(X(_[ht]));return B}return X(_)},merge:function K(_,X,B){if(!X)return _;if("object"!=typeof X){if(T(_))_.push(X);else{if(!_||"object"!=typeof _)return[_,X];(B&&(B.plainObjects||B.allowPrototypes)||!nt.call(Object.prototype,X))&&(_[X]=!0)}return _}if(!_||"object"!=typeof _)return[_].concat(X);var ht=_;return T(_)&&!T(X)&&(ht=Y(_,B)),T(_)&&T(X)?(X.forEach(function(ft,b){if(nt.call(_,b)){var rt=_[b];rt&&"object"==typeof rt&&ft&&"object"==typeof ft?_[b]=K(rt,ft,B):_.push(ft)}else _[b]=ft}),_):Object.keys(X).reduce(function(ft,b){var rt=X[b];return ft[b]=nt.call(ft,b)?K(ft[b],rt,B):rt,ft},ht)}}},8762:(mt,yt,L)=>{"use strict";var k=L(1308);function nt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var T=/^([a-z0-9.+-]+:)/i,Q=/:[0-9]*$/,j=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,C=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),H=["'"].concat(C),et=["%","/","?",";","#"].concat(H),W=["/","?","#"],Z=/^[+a-z0-9A-Z_-]{0,63}$/,ot=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,R={javascript:!0,"javascript:":!0},ct={javascript:!0,"javascript:":!0},K={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=L(8011);function X(b,rt,I){if(b&&"object"==typeof b&&b instanceof nt)return b;var dt=new nt;return dt.parse(b,rt,I),dt}nt.prototype.parse=function(b,rt,I){if("string"!=typeof b)throw new TypeError("Parameter 'url' must be a string, not "+typeof b);var dt=b.indexOf("?"),D=-1!==dt&&dt<b.indexOf("#")?"?":"#",G=b.split(D);G[0]=G[0].replace(/\\/g,"/");var V=b=G.join(D);if(V=V.trim(),!I&&1===b.split("#").length){var it=j.exec(V);if(it)return this.path=V,this.href=V,this.pathname=it[1],it[2]?(this.search=it[2],this.query=rt?_.parse(this.search.substr(1)):this.search.substr(1)):rt&&(this.search="",this.query={}),this}var p=T.exec(V);if(p){var v=(p=p[0]).toLowerCase();this.protocol=v,V=V.substr(p.length)}if(I||p||V.match(/^\/\/[^@/]+@[^@/]+/)){var x="//"===V.substr(0,2);x&&(!p||!ct[p])&&(V=V.substr(2),this.slashes=!0)}if(!ct[p]&&(x||p&&!K[p])){for(var O=-1,E=0;E<W.length;E++)-1!==(S=V.indexOf(W[E]))&&(-1===O||S<O)&&(O=S);var A,N;for(-1!==(N=-1===O?V.lastIndexOf("@"):V.lastIndexOf("@",O))&&(A=V.slice(0,N),V=V.slice(N+1),this.auth=decodeURIComponent(A)),O=-1,E=0;E<et.length;E++){var S;-1!==(S=V.indexOf(et[E]))&&(-1===O||S<O)&&(O=S)}-1===O&&(O=V.length),this.host=V.slice(0,O),V=V.slice(O),this.parseHost(),this.hostname=this.hostname||"";var ut="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!ut)for(var w=this.hostname.split(/\./),F=(E=0,w.length);E<F;E++){var g=w[E];if(g&&!g.match(Z)){for(var M="",J=0,at=g.length;J<at;J++)g.charCodeAt(J)>127?M+="x":M+=g[J];if(!M.match(Z)){var It=w.slice(0,E),Et=w.slice(E+1),Dt=g.match(ot);Dt&&(It.push(Dt[1]),Et.unshift(Dt[2])),Et.length&&(V="/"+Et.join(".")+V),this.hostname=It.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),ut||(this.hostname=k.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,ut&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==V[0]&&(V="/"+V))}if(!R[v])for(E=0,F=H.length;E<F;E++){var xt=H[E];if(-1!==V.indexOf(xt)){var Gt=encodeURIComponent(xt);Gt===xt&&(Gt=escape(xt)),V=V.split(xt).join(Gt)}}var Kt=V.indexOf("#");-1!==Kt&&(this.hash=V.substr(Kt),V=V.slice(0,Kt));var se=V.indexOf("?");return-1!==se?(this.search=V.substr(se),this.query=V.substr(se+1),rt&&(this.query=_.parse(this.query)),V=V.slice(0,se)):rt&&(this.search="",this.query={}),V&&(this.pathname=V),K[v]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},nt.prototype.format=function(){var b=this.auth||"";b&&(b=(b=encodeURIComponent(b)).replace(/%3A/i,":"),b+="@");var rt=this.protocol||"",I=this.pathname||"",dt=this.hash||"",D=!1,G="";this.host?D=b+this.host:this.hostname&&(D=b+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(D+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(G=_.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var z=this.search||G&&"?"+G||"";return rt&&":"!==rt.substr(-1)&&(rt+=":"),this.slashes||(!rt||K[rt])&&!1!==D?(D="//"+(D||""),I&&"/"!==I.charAt(0)&&(I="/"+I)):D||(D=""),dt&&"#"!==dt.charAt(0)&&(dt="#"+dt),z&&"?"!==z.charAt(0)&&(z="?"+z),rt+D+(I=I.replace(/[?#]/g,function(V){return encodeURIComponent(V)}))+(z=z.replace("#","%23"))+dt},nt.prototype.resolve=function(b){return this.resolveObject(X(b,!1,!0)).format()},nt.prototype.resolveObject=function(b){if("string"==typeof b){var rt=new nt;rt.parse(b,!1,!0),b=rt}for(var I=new nt,dt=Object.keys(this),D=0;D<dt.length;D++){var G=dt[D];I[G]=this[G]}if(I.hash=b.hash,""===b.href)return I.href=I.format(),I;if(b.slashes&&!b.protocol){for(var z=Object.keys(b),V=0;V<z.length;V++){var it=z[V];"protocol"!==it&&(I[it]=b[it])}return K[I.protocol]&&I.hostname&&!I.pathname&&(I.pathname="/",I.path=I.pathname),I.href=I.format(),I}if(b.protocol&&b.protocol!==I.protocol){if(!K[b.protocol]){for(var p=Object.keys(b),v=0;v<p.length;v++){var x=p[v];I[x]=b[x]}return I.href=I.format(),I}if(I.protocol=b.protocol,b.host||ct[b.protocol])I.pathname=b.pathname;else{for(var F=(b.pathname||"").split("/");F.length&&!(b.host=F.shift()););b.host||(b.host=""),b.hostname||(b.hostname=""),""!==F[0]&&F.unshift(""),F.length<2&&F.unshift(""),I.pathname=F.join("/")}return I.search=b.search,I.query=b.query,I.host=b.host||"",I.auth=b.auth,I.hostname=b.hostname||b.host,I.port=b.port,(I.pathname||I.search)&&(I.path=(I.pathname||"")+(I.search||"")),I.slashes=I.slashes||b.slashes,I.href=I.format(),I}var S=I.pathname&&"/"===I.pathname.charAt(0),A=b.host||b.pathname&&"/"===b.pathname.charAt(0),N=A||S||I.host&&b.pathname,ut=N,w=I.pathname&&I.pathname.split("/")||[],g=(F=b.pathname&&b.pathname.split("/")||[],I.protocol&&!K[I.protocol]);if(g&&(I.hostname="",I.port=null,I.host&&(""===w[0]?w[0]=I.host:w.unshift(I.host)),I.host="",b.protocol&&(b.hostname=null,b.port=null,b.host&&(""===F[0]?F[0]=b.host:F.unshift(b.host)),b.host=null),N=N&&(""===F[0]||""===w[0])),A)I.host=b.host||""===b.host?b.host:I.host,I.hostname=b.hostname||""===b.hostname?b.hostname:I.hostname,I.search=b.search,I.query=b.query,w=F;else if(F.length)w||(w=[]),w.pop(),w=w.concat(F),I.search=b.search,I.query=b.query;else if(null!=b.search)return g&&(I.host=w.shift(),I.hostname=I.host,(M=!!(I.host&&I.host.indexOf("@")>0)&&I.host.split("@"))&&(I.auth=M.shift(),I.hostname=M.shift(),I.host=I.hostname)),I.search=b.search,I.query=b.query,(null!==I.pathname||null!==I.search)&&(I.path=(I.pathname?I.pathname:"")+(I.search?I.search:"")),I.href=I.format(),I;if(!w.length)return I.pathname=null,I.path=I.search?"/"+I.search:null,I.href=I.format(),I;for(var J=w.slice(-1)[0],at=(I.host||b.host||w.length>1)&&("."===J||".."===J)||""===J,It=0,Et=w.length;Et>=0;Et--)"."===(J=w[Et])?w.splice(Et,1):".."===J?(w.splice(Et,1),It++):It&&(w.splice(Et,1),It--);if(!N&&!ut)for(;It--;It)w.unshift("..");N&&""!==w[0]&&(!w[0]||"/"!==w[0].charAt(0))&&w.unshift(""),at&&"/"!==w.join("/").substr(-1)&&w.push("");var M,Dt=""===w[0]||w[0]&&"/"===w[0].charAt(0);return g&&(I.hostname=Dt?"":w.length?w.shift():"",I.host=I.hostname,(M=!!(I.host&&I.host.indexOf("@")>0)&&I.host.split("@"))&&(I.auth=M.shift(),I.hostname=M.shift(),I.host=I.hostname)),(N=N||I.host&&w.length)&&!Dt&&w.unshift(""),w.length>0?I.pathname=w.join("/"):(I.pathname=null,I.path=null),(null!==I.pathname||null!==I.search)&&(I.path=(I.pathname?I.pathname:"")+(I.search?I.search:"")),I.auth=b.auth||I.auth,I.slashes=I.slashes||b.slashes,I.href=I.format(),I},nt.prototype.parseHost=function(){var b=this.host,rt=Q.exec(b);rt&&(":"!==(rt=rt[0])&&(this.port=rt.substr(1)),b=b.substr(0,b.length-rt.length)),b&&(this.hostname=b)},yt.parse=X,yt.resolve=function ht(b,rt){return X(b,!1,!0).resolve(rt)},yt.resolveObject=function ft(b,rt){return b?X(b,!1,!0).resolveObject(rt):rt},yt.format=function B(b){return"string"==typeof b&&(b=X(b)),b instanceof nt?b.format():nt.prototype.format.call(b)},yt.Url=nt},2937:(mt,yt,L)=>{var nt,T;nt=[L(8407),L(4520)],void 0!==(T=function(Q,j){function Y(){return this}var C=Q.Point.prototype._round;function H(W,$,Z){$?W.destroy():Z||(W.autoPreventDefault=!1)}var et={options:{padding:.1,forceCanvas:!1,doubleBuffering:!1,resolution:Q.Browser.retina?2:1,projectionZoom:function(Z){var $=Z.getMaxZoom();return Z=Z.getMinZoom(),$===1/0?Z+8:($+Z)/2},destroyInteractionManager:!1,autoPreventDefault:!0,preserveDrawingBuffer:!1,clearBeforeRender:!0,shouldRedrawOnMove:function(){return!1}},initialize:function(W,$,Z){Q.setOptions(this,Z),Q.stamp(this),this._drawCallback=W,this._pixiContainer=$,this._rendererOptions={transparent:!0,resolution:this.options.resolution,antialias:!0,forceCanvas:this.options.forceCanvas,preserveDrawingBuffer:this.options.preserveDrawingBuffer,clearBeforeRender:this.options.clearBeforeRender},this._doubleBuffering=j.utils.isWebGLSupported()&&!this.options.forceCanvas&&this.options.doubleBuffering},_setMap:function(){},_setContainerStyle:function(){},_addContainer:function(){this.getPane().appendChild(this._container)},_setEvents:function(){},onAdd:function(W){this._setMap(W),this._container||((W=this._container=Q.DomUtil.create("div","leaflet-pixi-overlay")).style.position="absolute",this._renderer=j.autoDetectRenderer(this._rendererOptions),H(this._renderer.plugins.interaction,this.options.destroyInteractionManager,this.options.autoPreventDefault),W.appendChild(this._renderer.view),this._zoomAnimated&&(Q.DomUtil.addClass(W,"leaflet-zoom-animated"),this._setContainerStyle()),this._doubleBuffering&&(this._auxRenderer=j.autoDetectRenderer(this._rendererOptions),H(this._auxRenderer.plugins.interaction,this.options.destroyInteractionManager,this.options.autoPreventDefault),W.appendChild(this._auxRenderer.view),this._renderer.view.style.position="absolute",this._auxRenderer.view.style.position="absolute")),this._addContainer(),this._setEvents();var $=this._map;this._initialZoom=this.options.projectionZoom($),this._wgsOrigin=Q.latLng([0,0]),this._wgsInitialShift=$.project(this._wgsOrigin,this._initialZoom),this._mapInitialZoom=$.getZoom();var Z=this;this.utils={latLngToLayerPoint:function(ot,R){return R=void 0===R?Z._initialZoom:R,$.project(Q.latLng(ot),R)},layerPointToLatLng:function(ot,R){return R=void 0===R?Z._initialZoom:R,ot=Q.point(ot),$.unproject(ot,R)},getScale:function(ot){return $.getZoomScale(void 0===ot?$.getZoom():ot,Z._initialZoom)},getRenderer:function(){return Z._renderer},getContainer:function(){return Z._pixiContainer},getMap:function(){return Z._map}},this._update({type:"add"})},onRemove:function(){Q.DomUtil.remove(this._container)},getEvents:function(){var W={zoom:this._onZoom,move:this._onMove,moveend:this._update};return this._zoomAnimated&&(W.zoomanim=this._onAnimZoom),W},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_onAnimZoom:function(W){this._updateTransform(W.center,W.zoom)},_onMove:function(W){this.options.shouldRedrawOnMove(W)&&this._update(W)},_updateTransform:function(W,ct){var Z=this._map.getZoomScale(ct,this._zoom),ot=this._map.getSize().multiplyBy(.5+this.options.padding),R=this._map.project(this._center,ct);ct=ot.multiplyBy(-Z).add(R).subtract(this._map._getNewPixelOrigin(W,ct)),Q.Browser.any3d?Q.DomUtil.setTransform(this._container,ct,Z):Q.DomUtil.setPosition(this._container,ct)},_redraw:function(ot,$){this._disableLeafletRounding();var Z=this._map.getZoomScale(this._zoom,this._initialZoom);ot=this._map.latLngToLayerPoint(this._wgsOrigin)._subtract(this._wgsInitialShift.multiplyBy(Z))._subtract(ot),this._pixiContainer.scale.set(Z),this._pixiContainer.position.set(ot.x,ot.y),this._drawCallback(this.utils,$),this._enableLeafletRounding()},_update:function(W){var $,Z,ot,R,ct,K,_,X;this._map._animatingZoom&&this._bounds||(K=this.options.padding,$=this._map.getSize(),Z=this._map.containerPointToLayerPoint($.multiplyBy(-K)).round(),this._bounds=new Q.Bounds(Z,Z.add($.multiplyBy(1+2*K)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom(),this._doubleBuffering&&(_=this._renderer,this._renderer=this._auxRenderer,this._auxRenderer=_),ot=this._renderer.view,ct=this._container,K=(R=this._bounds).getSize(),this._renderer.size&&this._renderer.size.x===K.x&&this._renderer.size.y===K.y||(this._renderer.gl&&(this._renderer.resolution=this.options.resolution,this._renderer.rootRenderTarget&&(this._renderer.rootRenderTarget.resolution=this.options.resolution)),this._renderer.resize(K.x,K.y),ot.style.width=K.x+"px",ot.style.height=K.y+"px",!this._renderer.gl||(_=this._renderer.gl).drawingBufferWidth!==this._renderer.width&&(this._renderer.resolution=_=this.options.resolution*_.drawingBufferWidth/this._renderer.width,this._renderer.rootRenderTarget&&(this._renderer.rootRenderTarget.resolution=_),this._renderer.resize(K.x,K.y)),this._renderer.size=K),this._doubleBuffering?(X=this,requestAnimationFrame(function(){X._redraw(R.min,W),X._renderer.gl.finish(),ot.style.visibility="visible",X._auxRenderer.view.style.visibility="hidden",Q.DomUtil.setPosition(ct,R.min)})):(this._redraw(R.min,W),Q.DomUtil.setPosition(ct,R.min)))},_disableLeafletRounding:function(){Q.Point.prototype._round=Y},_enableLeafletRounding:function(){Q.Point.prototype._round=C},redraw:function(W){return this._map&&(this._disableLeafletRounding(),this._drawCallback(this.utils,W),this._enableLeafletRounding()),this}};"1"<=Q.version?Q.PixiOverlay=Q.Layer.extend(et):(Q.Map.prototype.getZoomScale=function(W,$){var Z=this.options.crs;return $=void 0===$?this._zoom:$,Z.scale(W)/Z.scale($)},Q.DomUtil.setTransform=function(W,$,Z){$=$||new Q.Point(0,0),W.style[Q.DomUtil.TRANSFORM]=(Q.Browser.ie3d?"translate("+$.x+"px,"+$.y+"px)":"translate3d("+$.x+"px,"+$.y+"px,0)")+(Z?" scale("+Z+")":"")},et.includes=Q.Mixin.Events,et.addTo=function(W){return W.addLayer(this),this},et._setMap=function(W){this._map=W,this._zoomAnimated=W._zoomAnimated},et._setContainerStyle=function(){var W=this;["-webkit-transform-origin","-ms-transform-origin","transform-origin"].forEach(function($){W._container.style[$]="0 0"})},et._addContainer=function(){this._map.getPanes()[this.options.pane||"overlayPane"].appendChild(this._container)},et._setEvents=function(){var W,$=this.getEvents();for(W in $)this._map.on(W,$[W],this)},et.onRemove=function(){this._map.getPanes()[this.options.pane||"overlayPane"].removeChild(this._container);var W,$=this.getEvents();for(W in $)this._map.off(W,$[W],this)},Q.PixiOverlay=Q.Class.extend(et)),Q.pixiOverlay=function(W,$,Z){return Q.Browser.canvas?new Q.PixiOverlay(W,$,Z):null}}.apply(yt,nt))&&(mt.exports=T)},4654:()=>{}}]);