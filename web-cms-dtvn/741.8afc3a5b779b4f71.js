"use strict";(self.webpackChunkweb_cms_dtvn=self.webpackChunkweb_cms_dtvn||[]).push([[741],{5741:(k,g,i)=>{i.r(g),i.d(g,{SignInModule:()=>N});var p=i(9808),a=i(8753),s=i(2382),n=i(5e3),l=i(564),c=i(8386),d=i(1424),f=i(1208),_=i(845),h=i(5787);function x(t,o){if(1&t&&(n.TgZ(0,"div",29),n._uU(1),n.qZA()),2&t){const e=n.oxw(2);n.xp6(1),n.hij(" ",e.errMsg," ")}}function v(t,o){1&t&&(n.TgZ(0,"div",32),n._uU(1," *C\u1ea7n \u0111i\u1ec1n t\xean \u0111\u0103ng nh\u1eadp."),n.qZA())}function M(t,o){1&t&&(n.TgZ(0,"div",32),n._uU(1," *T\xean \u0111\u0103ng nh\u1eadp d\xe0i \xedt nh\u1ea5t 4 k\xfd t\u1ef1."),n.qZA())}function I(t,o){if(1&t&&(n.TgZ(0,"small",30),n.YNc(1,v,2,0,"div",31),n.YNc(2,M,2,0,"div",31),n.qZA()),2&t){const e=n.oxw(2);n.xp6(1),n.Q6J("ngIf",e.loginForm.controls.username.invalid),n.xp6(1),n.Q6J("ngIf",e.loginForm.controls.username.errors.minlength)}}function C(t,o){1&t&&(n.TgZ(0,"span"),n._uU(1,"Hi\u1ec7n"),n.qZA())}function T(t,o){1&t&&(n.TgZ(0,"span"),n._uU(1,"\u1ea8n"),n.qZA())}function b(t,o){if(1&t){const e=n.EpF();n.TgZ(0,"input",33),n.NdJ("keyup",function(){return n.CHM(e),n.oxw(2).onClearMsg()}),n.qZA()}}function w(t,o){if(1&t){const e=n.EpF();n.TgZ(0,"input",34),n.NdJ("keyup",function(){return n.CHM(e),n.oxw(2).onClearMsg()}),n.qZA()}}function A(t,o){1&t&&(n.TgZ(0,"div",32),n._uU(1," *C\u1ea7n nh\u1eadp m\u1eadt kh\u1ea9u."),n.qZA())}function Z(t,o){1&t&&(n.TgZ(0,"div",32),n._uU(1," *M\u1eadt kh\u1ea9u d\xe0i \xedt nh\u1ea5t 6 k\xfd t\u1ef1."),n.qZA())}function S(t,o){if(1&t&&(n.TgZ(0,"small",30),n.YNc(1,A,2,0,"div",31),n.YNc(2,Z,2,0,"div",31),n.qZA()),2&t){const e=n.oxw(2);n.xp6(1),n.Q6J("ngIf",e.loginForm.controls.password.invalid),n.xp6(1),n.Q6J("ngIf",e.loginForm.controls.password.errors.minlength)}}function y(t,o){if(1&t){const e=n.EpF();n.TgZ(0,"form",6),n.NdJ("ngSubmit",function(){return n.CHM(e),n.oxw().onSubmit()}),n.TgZ(1,"div",7)(2,"div",8)(3,"p",9),n._uU(4,"\u0110\u0103ng nh\u1eadp"),n.qZA()(),n.YNc(5,x,2,1,"div",10),n.TgZ(6,"div",11)(7,"div",12)(8,"label",13),n._uU(9,"T\xean \u0111\u0103ng nh\u1eadp"),n.qZA(),n.TgZ(10,"input",14),n.NdJ("keyup",function(){return n.CHM(e),n.oxw().onClearMsg()}),n.qZA(),n.YNc(11,I,3,2,"small",15),n.qZA(),n.TgZ(12,"div",12)(13,"div",16)(14,"label",17),n._uU(15,"M\u1eadt kh\u1ea9u"),n.qZA(),n.TgZ(16,"label",18),n.NdJ("click",function(){return n.CHM(e),n.oxw().onTogShowPasswd()}),n.YNc(17,C,2,0,"span",19),n.YNc(18,T,2,0,"span",19),n.qZA()(),n.YNc(19,b,1,0,"input",20),n.YNc(20,w,1,0,"input",21),n.YNc(21,S,3,2,"small",15),n.qZA(),n.TgZ(22,"div",22)(23,"div",23)(24,"div",24),n._UZ(25,"p-checkbox",25),n.TgZ(26,"label",26),n._uU(27,"Ghi nh\u1edb \u0111\u0103ng nh\u1eadp"),n.qZA()()()(),n.TgZ(28,"div",27),n._UZ(29,"button",28),n.qZA()()()()}if(2&t){const e=n.oxw();n.Q6J("formGroup",e.loginForm),n.xp6(5),n.Q6J("ngIf",e.errMsg),n.xp6(6),n.Q6J("ngIf",e.loginForm.controls.username.invalid&&e.loginForm.controls.username.touched),n.xp6(6),n.Q6J("ngIf",!e.show_passw),n.xp6(1),n.Q6J("ngIf",e.show_passw),n.xp6(1),n.Q6J("ngIf",!e.show_passw),n.xp6(1),n.Q6J("ngIf",e.show_passw),n.xp6(1),n.Q6J("ngIf",e.loginForm.controls.password.invalid&&e.loginForm.controls.password.touched),n.xp6(4),n.Q6J("binary",!0),n.xp6(4),n.Q6J("disabled",e.loginForm.invalid)}}const E=[{path:"",component:(()=>{class t{constructor(e,u,m,r){this.userHttpService=e,this.userService=u,this.router=m,this.formBuilder=r,this.errMsg="",this.showForm=!1,this.show_passw=!1}ngOnInit(){this.user=this.userService.getUserFromStorage(),this.user&&this.user.token?(this.userService.saveMyAccount(this.user),this.processRouter()):(this.showForm=!0,this.loginForm=this.formBuilder.group({username:["",s.kI.required],password:["",[s.kI.required,s.kI.minLength(6)]],remember:[!1]}))}onSubmit(){this.loginForm.controls.username.invalid?this.errMsg="L\u1ed7i t\xean \u0111\u0103ng nh\u1eadp!":this.loginForm.controls.password.invalid?this.errMsg="L\u1ed7i m\u1eadt kh\u1ea9u!":(this.errMsg="",this.login(this.loginForm.value.username.toLowerCase(),this.loginForm.value.password,this.loginForm.value.remember))}login(e,u,m){this.userHttpService.login(e,u).subscribe({next:r=>{r&&200===r.status?(this.user=r.metadata,m&&this.userService.saveUser2Storage(this.user),this.userService.saveMyAccount(this.user),this.processRouter()):this.errMsg="T\xe0i kho\u1ea3n kh\xf4ng t\u1ed3n t\u1ea1i!"},error:r=>{this.errMsg=r&&r.error&&r.error.message?r.error.message:"C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i!",console.error("C\xf3 l\u1ed7i x\u1ea3y ra",r)}})}onClearMsg(){this.errMsg=""}onTogShowPasswd(){this.show_passw=!this.show_passw}processRouter(){this.router.navigate(0==this.user.user_group?["/primary/project"]:["/primary/station"])}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(l.b),n.Y36(c.K),n.Y36(a.F0),n.Y36(s.qu))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-sign-in-management"]],decls:8,vars:1,consts:[[1,"outbound"],[1,"top","flex","align-items-end","justify-content-center"],["height","100","src","assets/brand.png","alt","",1,"border-1","border-gray-200"],[1,"content","flex","justify-content-center"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"foo","flex","align-items-center","justify-content-center"],[3,"formGroup","ngSubmit"],[1,"bg-white","border-round-lg","shadow-4","m-3","px-5","py-2",2,"width","320px","min-height","300px"],[1,"flex","flex-wrap","justify-content-center"],[1,"text-2xl","text-blue-700","font-bold","m-4"],["class","text-sm border-round bg-red-100 text-red-600 p-2",4,"ngIf"],[1,"p-fluid"],[1,"field","mb-3"],["for","name"],["id","name","type","text","pInputText","","formControlName","username",3,"keyup"],["class","text-red-500",4,"ngIf"],[1,"flex","justify-content-between","mb-2"],["for","passw"],["for","passw",1,"text-blue-700","underline",2,"cursor","pointer",3,"click"],[4,"ngIf"],["id","passw","type","password","pInputText","","formControlName","password",3,"keyup",4,"ngIf"],["type","text","pInputText","","formControlName","password",3,"keyup",4,"ngIf"],[1,"formgrid","grid","grid-nogutter","mb-3"],[1,"field","col"],[1,"field-checkbox"],["inputId","remember_me","formControlName","remember",3,"binary"],["for","remember_me"],[1,"mb-4"],["pButton","","pRipple","","type","submit","label","\u0110\u0103ng nh\u1eadp",3,"disabled"],[1,"text-sm","border-round","bg-red-100","text-red-600","p-2"],[1,"text-red-500"],["class","my-1",4,"ngIf"],[1,"my-1"],["id","passw","type","password","pInputText","","formControlName","password",3,"keyup"],["type","text","pInputText","","formControlName","password",3,"keyup"]],template:function(e,u){1&e&&(n.TgZ(0,"div",0)(1,"div",1),n._UZ(2,"img",2),n.qZA(),n.TgZ(3,"div",3),n.YNc(4,y,30,10,"form",4),n.qZA(),n.TgZ(5,"div",5)(6,"small"),n._uU(7,"\xa92024 AquaLink Team. All rights reserved."),n.qZA()()()),2&e&&(n.xp6(4),n.Q6J("ngIf",u.showForm))},directives:[p.O5,s._Y,s.JL,s.sg,s.Fj,d.o,s.JJ,s.u,f.XZ,_.Hq,h.H],styles:[".outbound[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;margin:0;padding:0}.outbound[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{position:absolute;top:0;height:150px;width:100%;margin:0;padding:0}.outbound[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:absolute;top:150px;bottom:50px;width:100%;margin:0;padding:0}.outbound[_ngcontent-%COMP%]   .foo[_ngcontent-%COMP%]{position:absolute;height:50px;bottom:0;width:100%;z-index:200;margin:0;padding:0}"]}),t})()}];let F=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[a.Bz.forChild(E)],a.Bz]}),t})();var J=i(8910);let N=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[p.ez,F,J.m]]}),t})()}}]);