"use strict";(self.webpackChunkweb_cms_dtvn=self.webpackChunkweb_cms_dtvn||[]).push([[883],{8883:(xe,b,r)=>{r.r(b),r.d(b,{UserModule:()=>ve});var c=r(9808),g=r(8753),e=r(5e3),E=r(6675),a=r(2382),y=r(8215),T=r(535),l=r(5330),f=r(564),m=r(9783),w=r(8386),_=r(845),h=r(5787),v=r(1424),Z=r(4036);function U(n,s){1&n&&(e.TgZ(0,"div",25),e._uU(1," *C\u1ea7n \u0111i\u1ec1n t\xean \u0111\u0103ng nh\u1eadp."),e.qZA())}function A(n,s){1&n&&(e.TgZ(0,"div",25),e._uU(1," *T\xean \u0111\u0103ng nh\u1eadp d\xe0i \xedt nh\u1ea5t 4 k\xfd t\u1ef1."),e.qZA())}function M(n,s){1&n&&(e.TgZ(0,"div",25),e._uU(1," *T\xean \u0111\u0103ng nh\u1eadp ch\u1ec9 bao g\u1ed3m k\xfd t\u1ef1 A-F, a-f, 0-9, _, @, vi\u1ebft li\u1ec1n kh\xf4ng d\u1ea5u. "),e.qZA())}function P(n,s){if(1&n&&(e.TgZ(0,"small",23),e.YNc(1,U,2,0,"div",24),e.YNc(2,A,2,0,"div",24),e.YNc(3,M,2,0,"div",24),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.username.invalid),e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.username.errors.minlength),e.xp6(1),e.Q6J("ngIf",t.formGroup.get("username").hasError("invalidUsername")&&t.formGroup.get("username").dirty)}}function J(n,s){1&n&&(e.TgZ(0,"span"),e._uU(1,"Hi\u1ec7n"),e.qZA())}function I(n,s){1&n&&(e.TgZ(0,"span"),e._uU(1,"\u1ea8n"),e.qZA())}function N(n,s){1&n&&e._UZ(0,"input",26)}function S(n,s){1&n&&e._UZ(0,"input",27)}function O(n,s){1&n&&(e.TgZ(0,"div",25),e._uU(1," *C\u1ea7n nh\u1eadp m\u1eadt kh\u1ea9u."),e.qZA())}function k(n,s){1&n&&(e.TgZ(0,"div",25),e._uU(1," *M\u1eadt kh\u1ea9u d\xe0i \xedt nh\u1ea5t 6 k\xfd t\u1ef1."),e.qZA())}function q(n,s){if(1&n&&(e.TgZ(0,"small",23),e.YNc(1,O,2,0,"div",24),e.YNc(2,k,2,0,"div",24),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.password.invalid),e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.password.errors.minlength)}}function D(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1," *C\u1ea7n ch\u1ecdn nh\xf3m ng\u01b0\u1eddi d\xf9ng."),e.qZA())}function F(n,s){if(1&n&&(e.TgZ(0,"small",23),e.YNc(1,D,2,0,"div",15),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.user_group.invalid)}}function G(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"label"),e._uU(2,"C\xf4ng tr\xecnh "),e.TgZ(3,"span",9),e._uU(4,"(*)"),e.qZA()(),e.TgZ(5,"div",28),e._UZ(6,"input",29),e.TgZ(7,"button",30),e.NdJ("click",function(){return e.CHM(t),e.oxw().onPickProject()}),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("value",null!=t.formGroup.controls.project.value&&t.formGroup.controls.project.value.name?t.formGroup.controls.project.value.name:"Ch\u1ecdn c\xf4ng tr\xecnh")}}let Y=(()=>{class n{constructor(t,o,i,u,p,C,x){this.ref=t,this.config=o,this.formBuilder=i,this.userHttpService=u,this.messageService=p,this.dialogService=C,this.userService=x,this.title="Th\xeam m\u1edbi ng\u01b0\u1eddi d\xf9ng",this.userGroupOption=[{name:"Qu\u1ea3n l\xfd C\xf4ng tr\xecnh",value:1,inactive:!1},{name:"K\u1ef9 thu\u1eadt c\xf4ng tr\xecnh",value:2,inactive:!1}],this.show_passw=!1,this.partnerOption=y.o.partnerOption}ngOnInit(){this.user=this.userService.getMyAccount(),this.formGroup=this.formBuilder.group({username:["",[a.kI.required,a.kI.minLength(4),this.usernameValidator]],password:["",[a.kI.required,a.kI.minLength(6)]],user_group:["",[a.kI.required]],project:["",[a.kI.required]]}),1==this.user.user_group&&(this.formGroup.controls.project.disable(),this.userGroupOption[0].inactive=!0)}usernameValidator(t){return/^[a-zA-Z0-9_@]+$/.test(t.value)?null:{invalidUsername:!0}}onTogShowPasswd(){this.show_passw=!this.show_passw}onSubmit(){this.userHttpService.create(this.formGroup.value.username,this.formGroup.value.password,this.formGroup.value.user_group,1==this.user.user_group?null:this.formGroup.value.project._id).subscribe({next:t=>{t&&200===t.status?(this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"\u0110\xe3 t\u1ea1o ng\u01b0\u1eddi d\xf9ng th\xe0nh c\xf4ng"}),this.ref.close("success")):this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"C\u1ea3nh b\xe1o: No Content"})},error:t=>{let o;o=t&&t.error&&t.error.message?t.error.message:"C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i!",this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:o}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",t)}})}onDestroy(){this.ref.destroy()}onPickProject(){this.dialogService.open(T.A,{data:{project:null},showHeader:!1,width:"99vw",height:"99vh",contentStyle:{padding:"0",margin:0}}).onClose.subscribe(o=>{o&&this.formGroup.controls.project.setValue(o)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.E7),e.Y36(l.S),e.Y36(a.qu),e.Y36(f.b),e.Y36(m.ez),e.Y36(l.xA),e.Y36(w.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-or-edit-user"]],decls:38,vars:12,consts:[[3,"formGroup","ngSubmit"],[1,"outbound"],[1,"header","flex","align-items-center","justify-content-between","border-bottom-1","border-gray-300"],[1,"ml-2","text-xl","font-bold"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-danger","p-button-text",3,"click"],[1,"content"],[1,"p-fluid","m-2"],[1,"field","mb-3"],["for","name"],[1,"ml-2","text-red-500"],["id","name","type","text","pInputText","","formControlName","username"],["class","text-red-500",4,"ngIf"],[1,"flex","justify-content-between","mb-2"],["for","passw"],[1,"text-blue-700","underline",2,"cursor","pointer",3,"click"],[4,"ngIf"],["id","passw","type","password","pInputText","","formControlName","password",4,"ngIf"],["id","shpassw","type","text","pInputText","","formControlName","password",4,"ngIf"],["formControlName","user_group","optionLabel","name","placeholder","Ch\u1ecdn nh\xf3m ng\u01b0\u1eddi d\xf9ng","optionValue","value","panelStyleClass","text-overflow-ellipsis text-sm","optionDisabled","inactive",3,"options"],["class","field mb-3",4,"ngIf"],[1,"footer","flex","align-items-center","justify-content-end","border-top-1","border-gray-300"],["pButton","","pRipple","","type","button","label","H\u1ee7y b\u1ecf","icon","fa-solid fa-times",1,"p-button-outlined","mr-1",3,"click"],["pButton","","pRipple","","type","submit","label","L\u01b0u th\xf4ng tin","icon","fa-solid fa-floppy-disk",1,"mr-1",3,"disabled"],[1,"text-red-500"],["class","my-1",4,"ngIf"],[1,"my-1"],["id","passw","type","password","pInputText","","formControlName","password"],["id","shpassw","type","text","pInputText","","formControlName","password"],[1,"p-inputgroup"],["type","text","pInputText","","disabled","",3,"value"],["type","button","pButton","","pRipple","","icon","pi pi-ellipsis-h",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return o.onDestroy()}),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"label",8),e._uU(10,"T\xean \u0111\u0103ng nh\u1eadp ho\u1eb7c s\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),e.TgZ(11,"span",9),e._uU(12,"(*)"),e.qZA()(),e._UZ(13,"input",10),e.YNc(14,P,4,3,"small",11),e.qZA(),e.TgZ(15,"div",7)(16,"div",12)(17,"label",13),e._uU(18,"M\u1eadt kh\u1ea9u "),e.TgZ(19,"span",9),e._uU(20,"(*)"),e.qZA()(),e.TgZ(21,"label",14),e.NdJ("click",function(){return o.onTogShowPasswd()}),e.YNc(22,J,2,0,"span",15),e.YNc(23,I,2,0,"span",15),e.qZA()(),e.YNc(24,N,1,0,"input",16),e.YNc(25,S,1,0,"input",17),e.YNc(26,q,3,2,"small",11),e.qZA(),e.TgZ(27,"div",7)(28,"label"),e._uU(29,"Nh\xf3m "),e.TgZ(30,"span",9),e._uU(31,"(*)"),e.qZA()(),e._UZ(32,"p-dropdown",18),e.YNc(33,F,2,1,"small",11),e.qZA(),e.YNc(34,G,8,1,"div",19),e.qZA()(),e.TgZ(35,"div",20)(36,"button",21),e.NdJ("click",function(){return o.onDestroy()}),e.qZA(),e._UZ(37,"button",22),e.qZA()()()),2&t&&(e.Q6J("formGroup",o.formGroup),e.xp6(4),e.Oqu(o.title),e.xp6(10),e.Q6J("ngIf",o.formGroup.controls.username.invalid&&o.formGroup.controls.username.touched),e.xp6(8),e.Q6J("ngIf",!o.show_passw),e.xp6(1),e.Q6J("ngIf",o.show_passw),e.xp6(1),e.Q6J("ngIf",!o.show_passw),e.xp6(1),e.Q6J("ngIf",o.show_passw),e.xp6(1),e.Q6J("ngIf",o.formGroup.controls.password.invalid&&o.formGroup.controls.password.touched),e.xp6(6),e.Q6J("options",o.userGroupOption),e.xp6(1),e.Q6J("ngIf",o.formGroup.controls.user_group.invalid&&o.formGroup.controls.user_group.touched),e.xp6(1),e.Q6J("ngIf",0==o.user.user_group),e.xp6(3),e.Q6J("disabled",o.formGroup.invalid))},directives:[a._Y,a.JL,a.sg,_.Hq,h.H,a.Fj,v.o,a.JJ,a.u,c.O5,Z.Lt],styles:[".outbound[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;overflow:hidden}.outbound[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:45px}.outbound[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:absolute;top:45px;bottom:45px;left:0;width:100%;overflow:auto}.outbound[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{position:absolute;bottom:0;height:45px;left:0;width:100%}"]}),n})();var Q=r(1208);function B(n,s){1&n&&e._UZ(0,"input",20)}function H(n,s){1&n&&e._UZ(0,"input",21)}function R(n,s){1&n&&(e.TgZ(0,"div",24),e._uU(1," *C\u1ea7n nh\u1eadp m\u1eadt kh\u1ea9u."),e.qZA())}function j(n,s){1&n&&(e.TgZ(0,"div",24),e._uU(1," *M\u1eadt kh\u1ea9u d\xe0i \xedt nh\u1ea5t 6 k\xfd t\u1ef1."),e.qZA())}function L(n,s){if(1&n&&(e.TgZ(0,"small",22),e.YNc(1,R,2,0,"div",23),e.YNc(2,j,2,0,"div",23),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.new_password.invalid),e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.new_password.errors.minlength)}}let z=(()=>{class n{constructor(t,o,i,u,p){this.ref=t,this.config=o,this.formBuilder=i,this.uHttpService=u,this.messageService=p,this.title="Reset m\u1eadt kh\u1ea9u"}ngOnInit(){this.formGroup=this.formBuilder.group({new_password:["",[a.kI.required,a.kI.minLength(6)]],show_passw:[!1]})}onSubmit(){this.uHttpService.resetPassword(this.config.data.user._id,this.formGroup.value.new_password).subscribe({next:t=>{t&&200===t.status?(this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"\u0110\xe3 thay \u0111\u1ed5i m\u1eadt kh\u1ea9u th\xe0nh c\xf4ng"}),this.ref.close("success")):this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"C\u1ea3nh b\xe1o: No Content"})},error:t=>{let o;o=t&&t.error&&t.error.message?t.error.message:"C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i!",this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:o}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",t)}})}onDestroy(){this.ref.destroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.E7),e.Y36(l.S),e.Y36(a.qu),e.Y36(f.b),e.Y36(m.ez))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-reset-password"]],decls:24,vars:7,consts:[[3,"formGroup","ngSubmit"],[1,"outbound"],[1,"header","flex","align-items-center","justify-content-between","border-bottom-1","border-gray-300"],[1,"ml-2","text-xl","font-bold"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-danger","p-button-text",3,"click"],[1,"content"],[1,"p-fluid","m-2"],[1,"field","mb-3"],[1,"flex","justify-content-between","mb-2"],["for","passw2"],[1,"ml-2","text-red-500"],["id","passw2","type","password","pInputText","","formControlName","new_password",4,"ngIf"],["type","text","pInputText","","formControlName","new_password",4,"ngIf"],["class","text-red-500",4,"ngIf"],[1,"field-checkbox"],["formControlName","show_passw","inputId","binary",3,"binary"],["for","binary"],[1,"footer","flex","align-items-center","justify-content-end","border-top-1","border-gray-300"],["pButton","","pRipple","","type","button","label","H\u1ee7y b\u1ecf","icon","fa-solid fa-times",1,"p-button-outlined","mr-1",3,"click"],["pButton","","pRipple","","type","submit","label","L\u01b0u th\xf4ng tin","icon","fa-solid fa-floppy-disk",1,"mr-1",3,"disabled"],["id","passw2","type","password","pInputText","","formControlName","new_password"],["type","text","pInputText","","formControlName","new_password"],[1,"text-red-500"],["class","my-1",4,"ngIf"],[1,"my-1"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return o.onDestroy()}),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),e._uU(11,"M\u1eadt kh\u1ea9u m\u1edbi "),e.TgZ(12,"span",10),e._uU(13,"(*)"),e.qZA()()(),e.YNc(14,B,1,0,"input",11),e.YNc(15,H,1,0,"input",12),e.YNc(16,L,3,2,"small",13),e.qZA(),e.TgZ(17,"div",14),e._UZ(18,"p-checkbox",15),e.TgZ(19,"label",16),e._uU(20,"Hi\u1ec7n m\u1eadt kh\u1ea9u"),e.qZA()()()(),e.TgZ(21,"div",17)(22,"button",18),e.NdJ("click",function(){return o.onDestroy()}),e.qZA(),e._UZ(23,"button",19),e.qZA()()()),2&t&&(e.Q6J("formGroup",o.formGroup),e.xp6(4),e.Oqu(o.title),e.xp6(10),e.Q6J("ngIf",!o.formGroup.controls.show_passw.value),e.xp6(1),e.Q6J("ngIf",o.formGroup.controls.show_passw.value),e.xp6(1),e.Q6J("ngIf",o.formGroup.controls.new_password.invalid&&o.formGroup.controls.new_password.touched),e.xp6(2),e.Q6J("binary",!0),e.xp6(5),e.Q6J("disabled",o.formGroup.invalid))},directives:[a._Y,a.JL,a.sg,_.Hq,h.H,c.O5,a.Fj,v.o,a.JJ,a.u,Q.XZ],styles:[".outbound[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;overflow:hidden}.outbound[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:45px}.outbound[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:absolute;top:45px;bottom:45px;left:0;width:100%;overflow:auto}.outbound[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{position:absolute;bottom:0;height:45px;left:0;width:100%}"]}),n})();var V=r(9269),W=r(5431),K=r(7658),d=r(8952),X=r(4119),$=r(4132),ee=r(97);const te=["divBound"],ne=["divTable"],oe=["divPaginator"];function ie(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",28)(1,"div",29)(2,"div",30)(3,"input",31),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw(2).project_name=i}),e.qZA(),e.TgZ(4,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onPickProject()}),e.qZA()()(),e.TgZ(5,"div",29)(6,"input",33),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw(2).search_username=i}),e.qZA()(),e.TgZ(7,"div",29)(8,"p-dropdown",34),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw(2).user_group=i}),e.qZA()(),e.TgZ(9,"div",35)(10,"div",36)(11,"span")(12,"button",37),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onClear()}),e.qZA(),e.TgZ(13,"button",38),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).fetchListOfUsers()}),e.qZA()()()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.project_name),e.xp6(3),e.Q6J("ngModel",t.search_username),e.xp6(2),e.Q6J("options",t.userGroupOption)("ngModel",t.user_group)}}function se(n,s){1&n&&(e.TgZ(0,"tr")(1,"th",39),e._uU(2,"#"),e.qZA(),e.TgZ(3,"th",40),e._uU(4,"T\xean \u0111\u0103ng nh\u1eadp "),e._UZ(5,"p-sortIcon",41),e.qZA(),e.TgZ(6,"th",42),e._uU(7,"Nh\xf3m"),e.qZA(),e.TgZ(8,"th",42),e._uU(9,"C\xf4ng tr\xecnh"),e.qZA(),e.TgZ(10,"th",43),e._uU(11,"Th\u1eddi gian t\u1ea1o "),e._UZ(12,"p-sortIcon",44),e.qZA(),e.TgZ(13,"th",45),e._uU(14,"C\u1eadp nh\u1eadt "),e._UZ(15,"p-sortIcon",46),e.qZA()())}function re(n,s){1&n&&(e.TgZ(0,"span"),e._uU(1,"Qu\u1ea3n tr\u1ecb h\u1ec7 th\u1ed1ng"),e.qZA())}function ae(n,s){1&n&&(e.TgZ(0,"span"),e._uU(1,"Qu\u1ea3n l\xfd c\xf4ng tr\xecnh"),e.qZA())}function ue(n,s){1&n&&(e.TgZ(0,"span"),e._uU(1,"K\u1ef9 thu\u1eadt c\xf4ng tr\xecnh"),e.qZA())}function le(n,s){if(1&n&&(e.TgZ(0,"tr",47)(1,"td",39),e._uU(2),e.qZA(),e.TgZ(3,"td",42),e._uU(4),e.qZA(),e.TgZ(5,"td",42),e.YNc(6,re,2,0,"span",48),e.YNc(7,ae,2,0,"span",48),e.YNc(8,ue,2,0,"span",48),e.qZA(),e.TgZ(9,"td",42),e._uU(10),e.qZA(),e.TgZ(11,"td",42),e._uU(12),e.qZA(),e.TgZ(13,"td",42),e._uU(14),e.qZA()()),2&n){const t=s.$implicit,o=s.rowIndex,i=e.oxw(2);e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu((i.currentPage-1)*i.itemsPerPage+1+o),e.xp6(2),e.Oqu(t.username),e.xp6(2),e.Q6J("ngIf",0==t.user_group),e.xp6(1),e.Q6J("ngIf",1==t.user_group),e.xp6(1),e.Q6J("ngIf",2==t.user_group),e.xp6(2),e.Oqu(null==t.project?null:t.project.name),e.xp6(2),e.Oqu(i.convertTime(t.created_at)),e.xp6(2),e.Oqu(i.convertTime(t.updated_at))}}function pe(n,s){1&n&&(e.TgZ(0,"div",49),e._uU(1," Kh\xf4ng c\xf3 d\u1eef li\u1ec7u trong m\u1ee5c n\xe0y. "),e.qZA())}const ce=function(){return[15,20,30,50]};function me(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",2,3),e.NdJ("resize",function(){return e.CHM(t),e.oxw().onWindowResize()},!1,e.Jf7),e.TgZ(2,"div",4),e._UZ(3,"p-breadcrumb",5),e.TgZ(4,"div",6)(5,"h3",7),e._UZ(6,"i",8),e._uU(7,"Danh s\xe1ch Ng\u01b0\u1eddi d\xf9ng "),e.qZA()(),e.TgZ(8,"div",9,10)(10,"p-table",11),e.NdJ("selectionChange",function(i){return e.CHM(t),e.oxw().currentUser=i}),e.YNc(11,ie,14,4,"ng-template",12),e.YNc(12,se,16,0,"ng-template",13),e.YNc(13,le,15,9,"ng-template",14),e.YNc(14,pe,2,0,"ng-template",15),e.qZA()()(),e.TgZ(15,"div",16,17)(17,"div",18)(18,"div",19)(19,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().onAdd()}),e.qZA(),e.TgZ(20,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().onReset()}),e.qZA(),e.TgZ(21,"button",22),e.NdJ("click",function(){return e.CHM(t),e.oxw().onDelete()}),e.qZA()(),e.TgZ(22,"div",23)(23,"p-paginator",24),e.NdJ("onPageChange",function(i){return e.CHM(t),e.oxw().onPageChange(i)}),e.qZA()(),e.TgZ(24,"div",25)(25,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().onReSync()}),e.qZA(),e.TgZ(26,"span",27),e._uU(27),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("model",t.pathLinks)("home",t.homeLink),e.xp6(7),e.Q6J("selection",t.currentUser)("value",t.users)("scrollable",!0)("loading",t.loading),e.xp6(9),e.Q6J("disabled",!t.permission.user.create),e.xp6(1),e.Q6J("disabled",!t.currentUser||!t.permission.user.edit),e.xp6(1),e.Q6J("disabled",!t.currentUser||!t.permission.user.delete||0==t.currentUser.user_group),e.xp6(2),e.Q6J("rows",t.itemsPerPage)("totalRecords",t.totalItems)("rowsPerPageOptions",e.DdM(17,ce))("showJumpToPageDropdown",!0)("showPageLinks",!1),e.xp6(4),e.lnq("Hi\u1ec3n th\u1ecb ",(t.currentPage-1)*t.itemsPerPage+1,"-",(t.currentPage-1)*t.itemsPerPage+t.itemsPerPage>t.totalItems?t.totalItems:(t.currentPage-1)*t.itemsPerPage+t.itemsPerPage,"/",t.totalItems,"")}}function de(n,s){1&n&&(e._UZ(0,"i",57),e.TgZ(1,"span",58),e._uU(2,"B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp v\xe0o m\u1ee5c n\xe0y!"),e.qZA())}function ge(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",50)(1,"p-messages",51),e.YNc(2,de,3,0,"ng-template",52),e.qZA()(),e.TgZ(3,"div",53)(4,"div",54),e.NdJ("click",function(){return e.CHM(t),e.oxw().onGoBackHome()}),e._UZ(5,"span",55),e.TgZ(6,"span",56),e._uU(7,"Quay l\u1ea1i Trang ch\u1ee7"),e.qZA()()()}}const fe=[{path:"",component:(()=>{class n{constructor(t,o,i,u,p,C,x,Ce){this.uHttpService=t,this.messageService=o,this.renderer=i,this.confirmService=u,this.dialogService=p,this.permissionService=C,this.router=x,this.userService=Ce,this.userGroupOption=[{name:"Qu\u1ea3n l\xfd c\xf4ng tr\xecnh",value:1,inactive:!1},{name:"K\u1ef9 thu\u1eadt c\xf4ng tr\xecnh",value:2,inactive:!1}],this.offset=0,this.totalItems=0,this.itemsPerPage=15,this.currentPage=1,this.users=[],this.loading=!1}ngOnDestroy(){this.subPermission&&this.subPermission.unsubscribe(),this.loadingTime&&clearTimeout(this.loadingTime)}setStyleDiv(){this.windowWidth=this.divBound.nativeElement.offsetWidth,this.renderer.setStyle(this.divTable.nativeElement,"height",`  ${this.divBound.nativeElement.offsetHeight-this.divPaginator.nativeElement.offsetHeight-62}px`)}ngAfterViewInit(){this.setStyleDiv()}onWindowResize(){this.setStyleDiv()}calcWidth(){let t="";return t=this.windowWidth<450?.99*this.windowWidth+"px":"450px",t}ngOnInit(){this.myAccount=this.userService.getMyAccount(),this.subPermission=this.permissionService.currentPermission.subscribe(t=>{t&&(this.permission=t,this.initForm(),this.fetchListOfUsers())})}initForm(){this.pathLinks=[{label:"Qu\u1ea3n l\xfd",disabled:!0},{label:"Ng\u01b0\u1eddi d\xf9ng",disabled:!0}],this.homeLink={icon:"fa-solid fa-home",routerLink:"/"}}onClear(){this.user_group=null,this.search_username=null,this.project_id=null,this.project_name=null}onPickProject(){this.dialogService.open(T.A,{showHeader:!1,width:"99vw",height:"99vh",contentStyle:{padding:"0",margin:0}}).onClose.subscribe(o=>{o&&(this.project_name=o.name,this.project_id=o._id)})}fetchListOfUsers(){this.loadingTime=setTimeout(()=>{this.loading=!0},1e3),this.uHttpService.getList(this.user_group,this.itemsPerPage,this.offset,this.search_username,this.project_id).subscribe({next:t=>{t&&200===t.status?(this.users=t.metadata.docs,this.totalItems=t.metadata.totalDocs,this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime),this.currentUser=null):this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"C\u1ea3nh b\xe1o: No Content"})},error:t=>{let o;o=t&&t.error&&t.error.message?t.error.message:"C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i!",this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:o}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",t),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime)}})}onPageChange(t){this.currentPage=t.page+1,this.itemsPerPage=t.rows,this.offset=(this.currentPage-1)*this.itemsPerPage,this.fetchListOfUsers()}onReSync(){this.fetchListOfUsers()}onAdd(){this.dialogService.open(Y,{showHeader:!1,height:"450px",width:this.calcWidth(),contentStyle:{padding:"0",margin:0}}).onClose.subscribe(()=>{this.fetchListOfUsers()})}onReset(){this.dialogService.open(z,{data:{user:this.currentUser},showHeader:!1,height:"250px",width:this.calcWidth(),contentStyle:{padding:"0",margin:0}})}onDelete(){this.confirmService.confirm({message:`B\u1ea1n c\xf3 mu\u1ed1n x\xf3a ng\u01b0\u1eddi d\xf9ng "${this.currentUser.username}" kh\xf4ng?`,header:"X\xe1c nh\u1eadn x\xf3a ng\u01b0\u1eddi d\xf9ng",icon:"pi pi-info-circle"}).then(t=>{t&&this.uHttpService.delete(this.currentUser._id).subscribe({next:o=>{o&&200===o.status?(this.fetchListOfUsers(),this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"\u0110\xe3 x\xf3a ng\u01b0\u1eddi d\xf9ng th\xe0nh c\xf4ng."})):this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"C\u1ea3nh b\xe1o: No Content"})},error:o=>{let i;i=o&&o.error&&o.error.message?o.error.message:"C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i!",this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:i}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",o)}})}).catch(t=>{})}convertTime(t){return E.I.isoToVnTime(t)}onGoBackHome(){this.router.navigate(["/"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.b),e.Y36(m.ez),e.Y36(e.Qsj),e.Y36(V.I),e.Y36(l.xA),e.Y36(W.$),e.Y36(g.F0),e.Y36(w.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-management"]],viewQuery:function(t,o){if(1&t&&(e.Gf(te,5,e.SBq),e.Gf(ne,5,e.SBq),e.Gf(oe,5,e.SBq)),2&t){let i;e.iGM(i=e.CRH())&&(o.divBound=i.first),e.iGM(i=e.CRH())&&(o.divTable=i.first),e.iGM(i=e.CRH())&&(o.divPaginator=i.first)}},decls:3,vars:2,consts:[["class","relative h-full w-full",3,"resize",4,"ngIf","ngIfElse"],["noPermission",""],[1,"relative","h-full","w-full",3,"resize"],["divBound",""],[1,"absolute","top-0","left-0","w-full"],["styleClass","text-sm p-1",3,"model","home"],[1,"flex","align-items-center"],[1,"text-blue-700","m-0","px-2","pt-2","pb-0"],[1,"fa-solid","fa-list","mr-2"],[1,"page-content","mt-1"],["divTable",""],["selectionMode","single","styleClass","p-datatable-sm p-datatable-striped","scrollHeight","flex",3,"selection","value","scrollable","loading","selectionChange"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"absolute","bottom-0","left-0","w-full","border-top-1","border-gray-300"],["divPaginator",""],[1,"grid","grid-nogutter"],[1,"col-12","md:col-5","flex","align-items-center","py-1"],["pButton","","pRipple","","type","button","label","Th\xeam","icon","fa-solid fa-plus",1,"mx-1",3,"disabled","click"],["pButton","","pRipple","","type","button","label","Reset","icon","fa-solid fa-unlock",1,"mr-1",3,"disabled","click"],["pButton","","pRipple","","type","button","label","X\xf3a b\u1ecf","icon","fa-solid fa-minus",1,"mr-1",3,"disabled","click"],[1,"col-12","md:col-5","flex","align-items-center","justify-content-end"],["styleClass","p-0",3,"rows","totalRecords","rowsPerPageOptions","showJumpToPageDropdown","showPageLinks","onPageChange"],[1,"col-12","md:col-2","flex","align-items-center"],["pButton","","pRipple","","type","button","icon","fa-solid fa-sync",1,"p-button-raised","p-button-text","m-0","p-1",3,"click"],[1,"ml-1"],[1,"p-fluid","grid","formgrid"],[1,"field","col-12","md:col-3","mb-1"],[1,"p-inputgroup"],["type","text","pInputText","","placeholder","Ch\u1ecdn C\xf4ng tr\xecnh","disabled","",3,"ngModel","ngModelChange"],["type","button","pButton","","pRipple","","icon","pi pi-ellipsis-h",3,"click"],["type","text","pInputText","","placeholder","Nh\u1eadp username",3,"ngModel","ngModelChange"],["optionLabel","name","optionValue","value","placeholder","Ch\u1ecdn nh\xf3m ng\u01b0\u1eddi d\xf9ng","panelStyleClass","text-overflow-ellipsis text-sm",3,"options","ngModel","ngModelChange"],[1,"field","col-12","md:col-3"],[1,"flex","justify-content-between"],["type","button","pButton","","icon","fa-solid fa-undo","pTooltip","\u0110\u1eb7t l\u1ea1i","tooltipPosition","top",1,"mr-1",3,"click"],["type","button","pButton","","icon","fa-solid fa-search","pTooltip","T\xecm ki\u1ebfm","tooltipPosition","top",1,"mr-1",3,"click"],[2,"width","60px","max-width","60px"],["pSortableColumn","username",2,"min-width","200px"],["field","username"],[2,"min-width","200px"],["pSortableColumn","created_at",2,"min-width","200px"],["field","created_at"],["pSortableColumn","updated_at",2,"min-width","200px"],["field","updated_at"],[3,"pSelectableRow"],[4,"ngIf"],[1,"p-fluid","p-2"],[1,"flex","align-items-center","justify-content-center"],["severity","error"],["pTemplate",""],[1,"flex","align-items-center","justify-content-center","cursor-pointer"],["pRipple","",1,"flex","align-items-center","justify-content-center","w-full","h-4rem","max-w-20rem","bg-blue-500","border-round-md","shadow-8","text-white","font-bold",3,"click"],[1,"fa-solid","fa-home"],[1,"text-center","text-xl","mx-2"],[1,"pi","pi-times-circle"],[1,"ml-2"]],template:function(t,o){if(1&t&&(e.YNc(0,me,28,18,"div",0),e.YNc(1,ge,8,0,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.permission.user.self)("ngIfElse",i)}},directives:[c.O5,K.a,d.iA,m.jx,a.Fj,v.o,a.JJ,a.On,_.Hq,h.H,Z.Lt,X.u,d.lQ,d.fz,d.Ei,$.D,ee.V],styles:[""]}),n})()}];let _e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.Bz.forChild(fe)],g.Bz]}),n})();var he=r(8910);let ve=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[c.ez,_e,he.m]]}),n})()}}]);