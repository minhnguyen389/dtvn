"use strict";(self.webpackChunkweb_cms_dtvn=self.webpackChunkweb_cms_dtvn||[]).push([[860],{5834:(A,y,o)=>{o.d(y,{v:()=>M});var v=o(520),f=o(2340),t=o(5e3);let M=(()=>{class P{constructor(g){this.http=g}getList(g,u,c,h,r,C){let m=new v.LE;return m=m.append("limit",r),m=m.append("offset",C),g&&(m=m.append("name",g)),u&&(m=m.append("code",u)),c&&(m=m.append("project_id",c)),h&&(m=m.append("station_id",h)),this.http.get(`${f.N.url.BASE_URL}/parameter`,{params:m})}getDetail(g){return this.http.get(`${f.N.url.BASE_URL}/parameter/${g}`)}create(g,u,c,h){let r=new v.LE;return r=r.append("name",g),r=r.append("code",c),r=r.append("station_id",h),u&&(r=r.append("description",u)),this.http.post(`${f.N.url.BASE_URL}/parameter`,r)}edit(g,u,c,h){let r=new v.LE;return u&&(r=r.append("name",u)),c&&(r=r.append("description",c)),h&&(r=r.append("code",h)),this.http.put(`${f.N.url.BASE_URL}/parameter/${g}`,r)}delete(g){return this.http.delete(`${f.N.url.BASE_URL}/parameter/${g}`)}config(g,u,c,h,r,C,m,Z,b,_,T,x){let l=new v.LE;return u&&(l=l.append("dtype",u)),c&&(l=l.append("port",c)),h&&(l=l.append("address",h)),r&&(l=l.append("ftype",r)),C&&(l=l.append("cval",C)),m>=0&&(l=l.append("dval",m)),Z>=0&&(l=l.append("cycle",Z)),b&&(l=l.append("table",b)),_&&(l=l.append("params",_)),T&&(l=l.append("hmi",T)),x&&(l=l.append("siren_control",x)),this.http.put(`${f.N.url.BASE_URL}/parameter/${g}/config`,l)}}return P.\u0275fac=function(g){return new(g||P)(t.LFG(v.eN))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})()},8860:(A,y,o)=>{o.r(y),o.d(y,{DataLogModule:()=>nt});var v=o(9808),f=o(8753),t=o(5e3),M=o(6675),P=o(1764),d=o.n(P),g=o(5268),u=o.n(g),c=o(535),h=o(4416),r=o(5330),C=o(5834),m=o(9783),Z=o(845),b=o(5787),_=o(8952),T=o(2382),x=o(1424),l=o(4119),w=o(4132);const L=["divBound"],k=["divTable"],S=["divPaginator"];function H(a,p){if(1&a){const e=t.EpF();t.TgZ(0,"div",24)(1,"div",25)(2,"div",26)(3,"input",27),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().project_name=i}),t.qZA(),t.TgZ(4,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPickProject()}),t.qZA()()(),t.TgZ(5,"div",25)(6,"div",26)(7,"input",29),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().station_name=i}),t.qZA(),t.TgZ(8,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPickStation()}),t.qZA()()(),t.TgZ(9,"div",30)(10,"input",31),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().name=i}),t.qZA()(),t.TgZ(11,"div",30)(12,"input",32),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().code=i}),t.qZA()(),t.TgZ(13,"div",33)(14,"div",34)(15,"span")(16,"button",35),t.NdJ("click",function(){return t.CHM(e),t.oxw().onClear()}),t.qZA(),t.TgZ(17,"button",36),t.NdJ("click",function(){return t.CHM(e),t.oxw().fetchListOfParameters()}),t.qZA()()()()()}if(2&a){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.project_name),t.xp6(4),t.Q6J("ngModel",e.station_name),t.xp6(3),t.Q6J("ngModel",e.name),t.xp6(2),t.Q6J("ngModel",e.code)}}function O(a,p){1&a&&(t.TgZ(0,"tr")(1,"th",37),t._uU(2,"#"),t.qZA(),t.TgZ(3,"th",38),t._uU(4,"T\xean "),t._UZ(5,"p-sortIcon",39),t.qZA(),t.TgZ(6,"th",40),t._uU(7,"M\xe3"),t.qZA(),t.TgZ(8,"th",41),t._uU(9,"Tr\u1ea1m"),t.qZA(),t.TgZ(10,"th",41),t._uU(11,"C\xf4ng tr\xecnh"),t.qZA()())}function q(a,p){if(1&a&&(t.TgZ(0,"tr",42)(1,"td",37),t._uU(2),t.qZA(),t.TgZ(3,"td",41),t._uU(4),t.qZA(),t.TgZ(5,"td",40),t._uU(6),t.qZA(),t.TgZ(7,"td",41),t._uU(8),t.qZA(),t.TgZ(9,"td",41),t._uU(10),t.qZA()()),2&a){const e=p.$implicit,n=p.rowIndex,i=t.oxw();t.Q6J("pSelectableRow",e),t.xp6(2),t.Oqu((i.currentPage-1)*i.itemsPerPage+1+n),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.code),t.xp6(2),t.Oqu(null==e.station?null:e.station.name),t.xp6(2),t.Oqu(e.project_name)}}function J(a,p){1&a&&(t.TgZ(0,"div",43),t._uU(1," Kh\xf4ng c\xf3 d\u1eef li\u1ec7u trong m\u1ee5c n\xe0y. "),t.qZA())}const B=function(){return[15,20,30,50]};let N=(()=>{class a{constructor(e,n,i,s,D,E){this.ref=e,this.config=n,this.pHttpService=i,this.messageService=s,this.renderer=D,this.dialogService=E,this.title="Ch\u1ecdn Th\xf4ng s\u1ed1",this.parameters=[],this.offset=0,this.totalItems=0,this.itemsPerPage=15,this.currentPage=1,this.loading=!1}ngOnDestroy(){this.loadingTime&&clearTimeout(this.loadingTime)}ngAfterViewInit(){this.renderer.setStyle(this.divTable.nativeElement,"height",`  ${this.divBound.nativeElement.offsetHeight-this.divPaginator.nativeElement.offsetHeight-40}px`)}onWindowResize(){this.renderer.setStyle(this.divTable.nativeElement,"height",`  ${this.divBound.nativeElement.offsetHeight-this.divPaginator.nativeElement.offsetHeight-40}px`)}ngOnInit(){this.fetchListOfParameters()}fetchListOfParameters(){this.loadingTime=setTimeout(()=>{this.loading=!0},1e3),this.pHttpService.getList(this.name,this.code,this.project_id,this.station_id,this.itemsPerPage,this.offset).subscribe({next:e=>{e&&200===e.status&&(this.parameters=e.metadata.docs,this.totalItems=e.metadata.totalDocs,this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime),this.currentParameter=null)},error:e=>{let n;n=e&&e.error&&e.error.message?e.error.message:"C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i!",this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:n}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",e),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime)}})}onPageChange(e){this.currentPage=e.page+1,this.itemsPerPage=e.rows,this.offset=(this.currentPage-1)*this.itemsPerPage,this.fetchListOfParameters()}onReSync(){this.fetchListOfParameters()}onSubmit(){this.ref.close(this.currentParameter)}onDestroy(){this.ref.destroy()}onClear(){this.name=null,this.code=null,this.project_id=null,this.project_name=null,this.station_name=null,this.station_id=null}onPickProject(){this.dialogService.open(c.A,{showHeader:!1,width:"99vw",height:"99vh",contentStyle:{padding:"0",margin:0}}).onClose.subscribe(n=>{n&&(this.project_name=n.name,this.project_id=n._id)})}onPickStation(){this.dialogService.open(h.L,{showHeader:!1,width:"99vw",height:"99vh",contentStyle:{padding:"0",margin:0}}).onClose.subscribe(n=>{n&&(this.station_name=n.name,this.station_id=n._id)})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(r.E7),t.Y36(r.S),t.Y36(C.v),t.Y36(m.ez),t.Y36(t.Qsj),t.Y36(r.xA))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-pick-parameter"]],viewQuery:function(e,n){if(1&e&&(t.Gf(L,5,t.SBq),t.Gf(k,5,t.SBq),t.Gf(S,5,t.SBq)),2&e){let i;t.iGM(i=t.CRH())&&(n.divBound=i.first),t.iGM(i=t.CRH())&&(n.divTable=i.first),t.iGM(i=t.CRH())&&(n.divPaginator=i.first)}},decls:26,vars:15,consts:[[1,"absolute","top-0","left-0","bottom-0","right-0",3,"resize"],["divBound",""],[1,"absolute","top-0","left-0","w-full"],[1,"flex","align-items-center","justify-content-between","border-bottom-1","border-gray-300"],[1,"ml-2","text-xl","font-bold"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-danger","p-button-text",3,"click"],[1,"page-content","mt-1"],["divTable",""],["selectionMode","single","styleClass","p-datatable-sm p-datatable-striped","scrollHeight","flex",3,"selection","value","scrollable","loading","selectionChange"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"absolute","bottom-0","left-0","w-full","p-1","border-top-1","border-gray-300"],["divPaginator",""],[1,"grid","grid-nogutter"],[1,"col-12","md:col-5","flex","align-items-center"],["pButton","","pRipple","","type","button","label","Ch\u1ecdn","icon","fa-solid fa-check",1,"mr-1",3,"disabled","click"],["pButton","","pRipple","","type","button","label","H\u1ee7y b\u1ecf","icon","fa-solid fa-times",1,"p-button-outlined","mr-1",3,"click"],[1,"col-12","md:col-5","flex","align-items-center","justify-content-end"],["styleClass","p-0",3,"rows","totalRecords","rowsPerPageOptions","showJumpToPageDropdown","showPageLinks","onPageChange"],[1,"col-12","md:col-2","flex","align-items-center"],["pButton","","pRipple","","type","button","icon","fa-solid fa-sync",1,"p-button-raised","p-button-text",3,"click"],[1,"ml-1"],[1,"p-fluid","grid","formgrid"],[1,"field","col-12","md:col-3","mb-1"],[1,"p-inputgroup"],["type","text","pInputText","","placeholder","Ch\u1ecdn c\xf4ng tr\xecnh","disabled","",3,"ngModel","ngModelChange"],["type","button","pButton","","pRipple","","icon","pi pi-ellipsis-h",3,"click"],["type","text","pInputText","","placeholder","Ch\u1ecdn tr\u1ea1m","disabled","",3,"ngModel","ngModelChange"],[1,"field","col-12","md:col-2","mb-1"],["type","text","pInputText","","placeholder","Nh\u1eadp t\xean th\xf4ng s\u1ed1",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Nh\u1eadp m\xe3 th\xf4ng s\u1ed1",3,"ngModel","ngModelChange"],[1,"field","col-12","md:col-2"],[1,"flex","justify-content-between"],["type","button","pButton","","icon","fa-solid fa-undo","pTooltip","\u0110\u1eb7t l\u1ea1i","tooltipPosition","top",1,"mr-1",3,"click"],["type","button","pButton","","icon","fa-solid fa-search","pTooltip","T\xecm ki\u1ebfm","tooltipPosition","top",1,"mr-1",3,"click"],[2,"width","60px","max-width","60px"],["pSortableColumn","name",2,"min-width","200px"],["field","name"],[2,"min-width","50px"],[2,"min-width","200px"],[3,"pSelectableRow"],[1,"p-fluid","p-2"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0,1),t.NdJ("resize",function(){return n.onWindowResize()},!1,t.Jf7),t.TgZ(2,"div",2)(3,"div",3)(4,"span",4),t._uU(5),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){return n.onDestroy()}),t.qZA()(),t.TgZ(7,"div",6,7)(9,"p-table",8),t.NdJ("selectionChange",function(s){return n.currentParameter=s}),t.YNc(10,H,18,4,"ng-template",9),t.YNc(11,O,12,0,"ng-template",10),t.YNc(12,q,11,6,"ng-template",11),t.YNc(13,J,2,0,"ng-template",12),t.qZA()()(),t.TgZ(14,"div",13,14)(16,"div",15)(17,"div",16)(18,"button",17),t.NdJ("click",function(){return n.onSubmit()}),t.qZA(),t.TgZ(19,"button",18),t.NdJ("click",function(){return n.onDestroy()}),t.qZA()(),t.TgZ(20,"div",19)(21,"p-paginator",20),t.NdJ("onPageChange",function(s){return n.onPageChange(s)}),t.qZA()(),t.TgZ(22,"div",21)(23,"button",22),t.NdJ("click",function(){return n.onReSync()}),t.qZA(),t.TgZ(24,"span",23),t._uU(25),t.qZA()()()()()),2&e&&(t.xp6(5),t.Oqu(n.title),t.xp6(4),t.Q6J("selection",n.currentParameter)("value",n.parameters)("scrollable",!0)("loading",n.loading),t.xp6(9),t.Q6J("disabled",!n.currentParameter),t.xp6(3),t.Q6J("rows",n.itemsPerPage)("totalRecords",n.totalItems)("rowsPerPageOptions",t.DdM(14,B))("showJumpToPageDropdown",!0)("showPageLinks",!1),t.xp6(4),t.lnq("Displaying ",(n.currentPage-1)*n.itemsPerPage+1,"-",(n.currentPage-1)*n.itemsPerPage+n.itemsPerPage>n.totalItems?n.totalItems:(n.currentPage-1)*n.itemsPerPage+n.itemsPerPage," of ",n.totalItems,""))},directives:[Z.Hq,b.H,_.iA,m.jx,T.Fj,x.o,T.JJ,T.On,l.u,_.lQ,_.fz,_.Ei,w.D],styles:[""]}),a})();var U=o(1484),R=o(5431),j=o(8386),I=o(4036),F=o(5077);const Y=["divTable"],Q=["divPaginator"],z=function(){return{applyLabel:"Ch\u1ecdn",clearLabel:"X\xf3a",format:"HH:mm DD/MM/YYYY",separator:" \u0111\u1ebfn "}};function $(a,p){if(1&a){const e=t.EpF();t.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"input",20),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().project_name=i}),t.qZA(),t.TgZ(4,"button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPickProject()}),t.qZA()()(),t.TgZ(5,"div",18)(6,"div",19)(7,"input",22),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().station_name=i}),t.qZA(),t.TgZ(8,"button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPickStation()}),t.qZA()()(),t.TgZ(9,"div",18)(10,"div",19)(11,"input",23),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().parameter_name=i}),t.qZA(),t.TgZ(12,"button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPickParameter()}),t.qZA()()(),t.TgZ(13,"div",18)(14,"p-dropdown",24),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().data_type=i}),t.qZA()(),t.TgZ(15,"div",18)(16,"input",25),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().rangeTimes=i}),t.qZA()(),t.TgZ(17,"div",26)(18,"div",27)(19,"span")(20,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().onClear()}),t.qZA(),t.TgZ(21,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSearch()}),t.qZA()()()()()}if(2&a){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.project_name),t.xp6(4),t.Q6J("ngModel",e.station_name),t.xp6(4),t.Q6J("ngModel",e.parameter_name),t.xp6(3),t.Q6J("options",e.dataTypeOption)("ngModel",e.data_type),t.xp6(2),t.Q6J("showDropdowns",!0)("locale",t.DdM(15,z))("showClearButton",!0)("timePicker",!0)("timePicker24Hour",!0)("dateLimit",93)("ngModel",e.rangeTimes)("ranges",e.ranges)("alwaysShowCalendars",!0),t.xp6(5),t.Q6J("disabled",!e.rangeTimes||e.rangeTimes&&!e.rangeTimes.startDate&&!e.rangeTimes.endDate)}}function G(a,p){1&a&&(t.TgZ(0,"tr")(1,"th",30),t._uU(2,"#"),t.qZA(),t.TgZ(3,"th",31),t._uU(4,"Th\xf4ng s\u1ed1"),t.qZA(),t.TgZ(5,"th",31),t._uU(6,"v1|v2|v3|v4|cv"),t.qZA(),t.TgZ(7,"th",32),t._uU(8,"Lo\u1ea1i"),t.qZA(),t.TgZ(9,"th",31),t._uU(10,"Tr\u1ea1m"),t.qZA(),t.TgZ(11,"th",31),t._uU(12,"D\u1ef1 \xe1n"),t.qZA(),t.TgZ(13,"th",33),t._uU(14,"Th\u1eddi gian "),t._UZ(15,"p-sortIcon",34),t.qZA()())}function V(a,p){if(1&a&&(t.TgZ(0,"tr")(1,"td",30),t._uU(2),t.qZA(),t.TgZ(3,"td",31),t._uU(4),t.qZA(),t.TgZ(5,"td",31)(6,"span",35),t._uU(7),t.qZA(),t.TgZ(8,"span",35),t._uU(9),t.qZA(),t.TgZ(10,"span",35),t._uU(11),t.qZA(),t.TgZ(12,"span",35),t._uU(13),t.qZA(),t.TgZ(14,"span",36),t._uU(15),t.qZA()(),t.TgZ(16,"td",32),t._uU(17),t.qZA(),t.TgZ(18,"td",31),t._uU(19),t.qZA(),t.TgZ(20,"td",31),t._uU(21),t.qZA(),t.TgZ(22,"td",37),t._uU(23),t.qZA()()),2&a){const e=p.$implicit,n=p.rowIndex,i=t.oxw();t.xp6(2),t.Oqu((i.currentPage-1)*i.itemsPerPage+1+n),t.xp6(2),t.Oqu(e.parameter.name),t.xp6(3),t.Oqu(i.formatVal(e.v1)),t.xp6(2),t.Oqu(i.formatVal(e.v2)),t.xp6(2),t.Oqu(i.formatVal(e.v3)),t.xp6(2),t.Oqu(i.formatVal(e.v4)),t.xp6(2),t.Oqu(i.formatVal(e.cv)),t.xp6(2),t.Oqu(e.data_type?"Prod":"Test"),t.xp6(2),t.Oqu(e.station.name),t.xp6(2),t.Oqu(e.project.name),t.xp6(2),t.Oqu(e.time)}}function W(a,p){1&a&&(t.TgZ(0,"div",38),t._uU(1," Kh\xf4ng c\xf3 d\u1eef li\u1ec7u trong m\u1ee5c n\xe0y. H\xe3y ch\u1ecdn c\xe1c \u0111i\u1ec1u ki\u1ec7n ph\xf9 h\u1ee3p v\xe0 T\xecm ki\u1ebfm. "),t.qZA())}const K=function(){return[15,20,30,50]};d().extend(u());const X=[{path:"",component:(()=>{class a{constructor(e,n,i,s,D,E,it){this.logHttpService=e,this.messageService=n,this.renderer=i,this.dialogService=s,this.permissionService=D,this.router=E,this.userService=it,this.offset=0,this.totalItems=0,this.itemsPerPage=15,this.currentPage=1,this.dataLogs=[],this.dataTypeOption=[{name:"T\u1ea5t c\u1ea3",value:void 0},{name:"D\u1eef li\u1ec7u Prod",value:1},{name:"D\u1eef li\u1ec7u Test",value:0}],this.loading=!1,this.ranges={"H\xf4m nay":[d()().startOf("dates"),d()().endOf("dates")],"H\xf4m qua":[d()().subtract(1,"days").startOf("dates"),d()().subtract(1,"days").endOf("dates")],"7 ng\xe0y g\u1ea7n nh\u1ea5t":[d()().subtract(6,"days").startOf("dates"),d()().endOf("dates")],"Th\xe1ng n\xe0y":[d()().startOf("month"),d()().endOf("month")],"3 th\xe1ng g\u1ea7n nh\u1ea5t":[d()().subtract(2,"month").startOf("month"),d()().endOf("month")],"6 th\xe1ng g\u1ea7n nh\u1ea5t":[d()().subtract(5,"month").startOf("month"),d()().endOf("month")]}}ngOnDestroy(){this.subPermission&&this.subPermission.unsubscribe(),this.loadingTime&&clearTimeout(this.loadingTime)}setStyleDiv(){this.renderer.setStyle(this.divTable.nativeElement,"bottom",`  ${this.divPaginator.nativeElement.offsetHeight}px`)}ngAfterViewInit(){this.setStyleDiv()}onWindowResize(){this.setStyleDiv()}ngOnInit(){this.user=this.userService.getMyAccount(),this.subPermission=this.permissionService.currentPermission.subscribe(e=>{e&&(this.permission=e),3!==this.user.user_group&&(this.startDate=d()().subtract(1,"years").startOf("dates").utc().format(),this.endDate=d()().endOf("dates").utc().format(),this.fetchListOfDataLogs())})}fetchListOfDataLogs(){this.loadingTime=setTimeout(()=>{this.loading=!0},1e3),this.logHttpService.getListDataLogs(this.project_id,this.station_id,this.parameter_id,this.data_type,this.startDate,this.endDate,this.itemsPerPage,this.offset).subscribe({next:e=>{200===e.status?(console.log("fetchListOfDataLogs",e),this.dataLogs=e.metadata.docs,this.totalItems=e.metadata.totalDocs,this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime)):(this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:`${e.message}`}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",e.message),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime))},error:e=>{let n;n=e&&e.error&&e.error.message?e.error.message:"C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i!",this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:n}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",e),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime)}})}onPageChange(e){this.currentPage=e.page+1,this.itemsPerPage=e.rows,this.offset=(this.currentPage-1)*this.itemsPerPage,this.fetchListOfDataLogs()}onReSync(){this.fetchListOfDataLogs()}convertTime(e){return M.I.isoToVnTime(e)}formatCurrency(e){return new Intl.NumberFormat("en-US").format(e)}onGoBackHome(){this.router.navigate(["/"])}onClear(){this.startDate=void 0,this.endDate=void 0,this.rangeTimes=void 0,this.project_id=void 0,this.project_name=void 0,this.station_id=void 0,this.station_name=void 0,this.parameter_id=void 0,this.parameter_name=void 0,this.data_type=void 0}onSearch(){this.startDate=this.rangeTimes&&this.rangeTimes.startDate?d().utc(this.rangeTimes.startDate).subtract(7,"hours").format():null,this.endDate=this.rangeTimes&&this.rangeTimes.endDate?d().utc(this.rangeTimes.endDate).subtract(7,"hours").format():null,this.fetchListOfDataLogs()}formatVal(e){return null!=e||null!=e?e:"-"}onPickProject(){this.dialogService.open(c.A,{showHeader:!1,width:"99vw",height:"99vh",contentStyle:{padding:"0",margin:0}}).onClose.subscribe(n=>{n&&(this.project_name=n.name,this.project_id=n._id)})}onPickStation(){this.dialogService.open(h.L,{showHeader:!1,width:"99vw",height:"99vh",contentStyle:{padding:"0",margin:0}}).onClose.subscribe(n=>{n&&(this.station_name=n.name,this.station_id=n._id)})}onPickParameter(){this.dialogService.open(N,{showHeader:!1,width:"99vw",height:"99vh",contentStyle:{padding:"0",margin:0}}).onClose.subscribe(n=>{n&&(this.parameter_name=n.name,this.parameter_id=n._id)})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(U.m),t.Y36(m.ez),t.Y36(t.Qsj),t.Y36(r.xA),t.Y36(R.$),t.Y36(f.F0),t.Y36(j.K))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-data-log-management"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Y,5,t.SBq),t.Gf(Q,5,t.SBq)),2&e){let i;t.iGM(i=t.CRH())&&(n.divTable=i.first),t.iGM(i=t.CRH())&&(n.divPaginator=i.first)}},decls:18,vars:12,consts:[[1,"relative","h-full","w-full",3,"resize"],[1,"absolute","top-0","left-0","w-full"],["divTable",""],["styleClass","p-datatable-sm","scrollHeight","flex",3,"value","scrollable","loading"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"absolute","bottom-0","left-0","w-full","border-top-1","border-gray-300"],["divPaginator",""],[1,"grid","grid-nogutter"],[1,"col-12","md:col-5","flex","align-items-center"],[1,"col-12","md:col-5","flex","align-items-center","justify-content-end"],["styleClass","p-0",3,"rows","totalRecords","rowsPerPageOptions","showJumpToPageDropdown","showPageLinks","onPageChange"],[1,"col-12","md:col-2","flex","align-items-center"],["pButton","","pRipple","","type","button","icon","fa-solid fa-sync",1,"p-button-raised","p-button-text","m-0",3,"click"],[1,"ml-1"],[1,"p-fluid","grid","formgrid"],[1,"field","col-12","md:col-3","mb-1"],[1,"p-inputgroup"],["type","text","pInputText","","placeholder","Ch\u1ecdn D\u1ef1 \xe1n","disabled","",3,"ngModel","ngModelChange"],["type","button","pButton","","pRipple","","icon","pi pi-ellipsis-h",3,"click"],["type","text","pInputText","","placeholder","Ch\u1ecdn Tr\u1ea1m","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Ch\u1ecdn Th\xf4ng s\u1ed1","disabled","",3,"ngModel","ngModelChange"],["optionLabel","name","optionValue","value","placeholder","Ch\u1ecdn lo\u1ea1i gi\xe1 tr\u1ecb","panelStyleClass","text-overflow-ellipsis text-sm","pTooltip","Ch\u1ecdn lo\u1ea1i Gi\xe1 tr\u1ecb","tooltipPosition","top",3,"options","ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Ch\u1ecdn kho\u1ea3ng th\u1eddi gian","ngxDaterangepickerMd","",1,"w-full",3,"showDropdowns","locale","showClearButton","timePicker","timePicker24Hour","dateLimit","ngModel","ranges","alwaysShowCalendars","ngModelChange"],[1,"field","col-12","md:col-3"],[1,"flex","justify-content-between"],["type","button","pButton","","icon","fa-solid fa-undo","pTooltip","\u0110\u1eb7t l\u1ea1i","tooltipPosition","top",1,"mr-1",3,"click"],["type","button","pButton","","icon","fa-solid fa-search","pTooltip","T\xecm ki\u1ebfm","tooltipPosition","top",1,"mr-1",3,"disabled","click"],[2,"width","60px","max-width","60px"],[2,"min-width","200px"],[2,"min-width","50px"],["pSortableColumn","created_at",2,"width","200px","max-width","200px"],["field","created_at"],[1,"m-0","py-1","px-2","text-white","border-round-sm","mr-1",2,"background-color","green"],[1,"m-0","py-1","px-2","text-white","border-round-sm",2,"background-color","green"],[2,"width","200px","max-width","200px"],[1,"p-fluid","p-2"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.NdJ("resize",function(){return n.onWindowResize()},!1,t.Jf7),t.TgZ(1,"div",1,2)(3,"p-table",3),t.YNc(4,$,22,16,"ng-template",4),t.YNc(5,G,16,0,"ng-template",5),t.YNc(6,V,24,11,"ng-template",6),t.YNc(7,W,2,0,"ng-template",7),t.qZA()(),t.TgZ(8,"div",8,9)(10,"div",10),t._UZ(11,"div",11),t.TgZ(12,"div",12)(13,"p-paginator",13),t.NdJ("onPageChange",function(s){return n.onPageChange(s)}),t.qZA()(),t.TgZ(14,"div",14)(15,"button",15),t.NdJ("click",function(){return n.onReSync()}),t.qZA(),t.TgZ(16,"span",16),t._uU(17),t.qZA()()()()()),2&e&&(t.xp6(3),t.Q6J("value",n.dataLogs)("scrollable",!0)("loading",n.loading),t.xp6(10),t.Q6J("rows",n.itemsPerPage)("totalRecords",n.totalItems)("rowsPerPageOptions",t.DdM(11,K))("showJumpToPageDropdown",!0)("showPageLinks",!1),t.xp6(4),t.lnq("Hi\u1ec3n th\u1ecb ",(n.currentPage-1)*n.itemsPerPage+1,"-",(n.currentPage-1)*n.itemsPerPage+n.itemsPerPage>n.totalItems?n.totalItems:(n.currentPage-1)*n.itemsPerPage+n.itemsPerPage,"/",n.totalItems,""))},directives:[_.iA,m.jx,T.Fj,x.o,T.JJ,T.On,Z.Hq,b.H,I.Lt,l.u,F.SP,_.lQ,_.fz,w.D],styles:[""]}),a})()}];let tt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[f.Bz.forChild(X)],f.Bz]}),a})();var et=o(8910);let nt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[v.ez,tt,et.m]]}),a})()}}]);