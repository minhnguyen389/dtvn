"use strict";(self.webpackChunkweb_cms_dtvn=self.webpackChunkweb_cms_dtvn||[]).push([[235],{1489:(k,Z,l)=>{l.d(Z,{P:()=>P});var C=l(520),v=l(2340),e=l(5e3);let P=(()=>{class x{constructor(p){this.http=p}getList(p,g,d,f,m,_){let s=new C.LE;return s=s.append("limit",m),s=s.append("offset",_),p&&(s=s.append("name",p)),g&&(s=s.append("code",g)),d&&(s=s.append("project_id",d)),f&&(s=s.append("device_type",f)),this.http.get(`${v.N.url.BASE_URL}/station`,{params:s})}getByLocation(p,g,d,f){let m=new C.LE;return m=m.append("lat_min",p),m=m.append("lat_max",d),m=m.append("long_min",g),m=m.append("long_max",f),this.http.get(`${v.N.url.BASE_URL}/station/by_location`,{params:m})}getAll(){return this.http.get(`${v.N.url.BASE_URL}/station/all`)}getDetail(p){return this.http.get(`${v.N.url.BASE_URL}/station/${p}`)}create(p,g,d,f,m,_,s){let c=new C.LE;return c=c.append("name",p),c=c.append("code",d),c=c.append("device_type",s),c=c.append("project_id",f),g&&(c=c.append("description",g)),(null!=m||null!=m)&&(c=c.append("latitude",m)),(null!=_||null!=_)&&(c=c.append("longitude",_)),this.http.post(`${v.N.url.BASE_URL}/station`,c)}edit(p,g,d,f,m,_,s,c,E){let h=new C.LE;return g&&(h=h.append("name",g)),d&&(h=h.append("description",d)),(null!=f||null!=f)&&(h=h.append("latitude",f)),(null!=m||null!=m)&&(h=h.append("longitude",m)),_&&(h=h.append("code",_)),s&&(h=h.append("gateway",s)),E&&(h=h.append("tcp_server_ip",E)),(null!=c||null!=c)&&(h=h.append("en_display",c)),this.http.put(`${v.N.url.BASE_URL}/station/${p}`,h)}delete(p){return this.http.delete(`${v.N.url.BASE_URL}/station/${p}`)}active(p,g){let d=new C.LE;return d=d.append("activated",!!g),this.http.put(`${v.N.url.BASE_URL}/station/${p}/active`,d)}removeClient(p,g){let d=new C.LE;return d=d.append("client_id",g),this.http.put(`${v.N.url.BASE_URL}/station/${p}/remove_client`,d)}downloadConfig(p,g,d,f){let m=new C.LE;return m=m.append("data",g),m=m.append("type",d),m=m.append("mac",f),this.http.put(`${v.N.url.BASE_URL}/station/${p}/download_config`,m)}}return x.\u0275fac=function(p){return new(p||x)(e.LFG(C.eN))},x.\u0275prov=e.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})()},2235:(k,Z,l)=>{l.r(Z),l.d(Z,{ParameterModule:()=>Le});var C=l(9808),v=l(8753),e=l(5e3),P=l(6675),x=l(535),T=l(8215),p=l(5330),g=l(1489),d=l(9783),f=l(845),m=l(5787),_=l(8952),s=l(2382),c=l(1424),E=l(4119),h=l(4132);const H=["divBound"],I=["divTable"],B=["divPaginator"];function U(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",24)(1,"div",25)(2,"div",26)(3,"input",27),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().project_name=n}),e.qZA(),e.TgZ(4,"button",28),e.NdJ("click",function(){return e.CHM(t),e.oxw().onPickProject()}),e.qZA()()(),e.TgZ(5,"div",25)(6,"input",29),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().name=n}),e.qZA()(),e.TgZ(7,"div",25)(8,"input",30),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().code=n}),e.qZA()(),e.TgZ(9,"div",31)(10,"div",32)(11,"span")(12,"button",33),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClear()}),e.qZA(),e.TgZ(13,"button",34),e.NdJ("click",function(){return e.CHM(t),e.oxw().fetchListOfStations()}),e.qZA()()()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.project_name),e.xp6(3),e.Q6J("ngModel",t.name),e.xp6(2),e.Q6J("ngModel",t.code)}}function F(o,r){1&o&&(e.TgZ(0,"tr")(1,"th",35),e._uU(2,"#"),e.qZA(),e.TgZ(3,"th",36),e._uU(4,"T\xean "),e._UZ(5,"p-sortIcon",37),e.qZA(),e.TgZ(6,"th",38),e._uU(7,"M\xe3"),e.qZA(),e.TgZ(8,"th",39),e._uU(9,"Lo\u1ea1i"),e.qZA(),e.TgZ(10,"th",40),e._uU(11,"K\xedch ho\u1ea1t"),e.qZA(),e.TgZ(12,"th",41),e._uU(13,"C\xf4ng tr\xecnh"),e.qZA()())}function O(o,r){1&o&&e._UZ(0,"i",45)}function R(o,r){if(1&o&&(e.TgZ(0,"tr",42)(1,"td",35),e._uU(2),e.qZA(),e.TgZ(3,"td",41),e._uU(4),e.qZA(),e.TgZ(5,"td",38),e._uU(6),e.qZA(),e.TgZ(7,"td",39),e._uU(8),e.qZA(),e.TgZ(9,"td",43),e.YNc(10,O,1,0,"i",44),e.qZA(),e.TgZ(11,"td",41),e._uU(12),e.qZA()()),2&o){const t=r.$implicit,i=r.rowIndex,n=e.oxw();e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu((n.currentPage-1)*n.itemsPerPage+1+i),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.code),e.xp6(2),e.Oqu(n.getDeviceType(t.device_type)),e.xp6(2),e.Q6J("ngIf",t.activated),e.xp6(2),e.Oqu(null==t.project?null:t.project.name)}}function Q(o,r){1&o&&(e.TgZ(0,"div",46),e._uU(1," Kh\xf4ng c\xf3 d\u1eef li\u1ec7u trong m\u1ee5c n\xe0y. "),e.qZA())}const Y=function(){return[15,20,30,50]};let q=(()=>{class o{constructor(t,i,n,a,u,b){this.ref=t,this.config=i,this.sHttpService=n,this.messageService=a,this.renderer=u,this.dialogService=b,this.title="Ch\u1ecdn tr\u1ea1m",this.deviceTypeOption=T.o.deviceTypeOption,this.offset=0,this.totalItems=0,this.itemsPerPage=15,this.currentPage=1,this.stations=[],this.loading=!1}ngOnDestroy(){this.loadingTime&&clearTimeout(this.loadingTime)}ngAfterViewInit(){this.renderer.setStyle(this.divTable.nativeElement,"height",`  ${this.divBound.nativeElement.offsetHeight-this.divPaginator.nativeElement.offsetHeight-40}px`)}onWindowResize(){this.renderer.setStyle(this.divTable.nativeElement,"height",`  ${this.divBound.nativeElement.offsetHeight-this.divPaginator.nativeElement.offsetHeight-40}px`)}ngOnInit(){this.fetchListOfStations()}onPickProject(){this.dialogService.open(x.A,{showHeader:!1,width:"99vw",height:"99vh",contentStyle:{padding:"0",margin:0}}).onClose.subscribe(i=>{i&&(this.project_name=i.name,this.project_id=i._id)})}onClear(){this.name=null,this.code=null,this.project_id=null,this.project_name=null}fetchListOfStations(){this.loadingTime=setTimeout(()=>{this.loading=!0},1e3),this.sHttpService.getList(this.name,this.code,this.project_id,null,this.itemsPerPage,this.offset).subscribe({next:t=>{t&&200===t.status?(this.stations=t.metadata.docs,this.totalItems=t.metadata.totalDocs,this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime),this.currentStation=null):this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"C\u1ea3nh b\xe1o: No Content"})},error:t=>{let i;i=t&&t.error&&t.error.message?t.error.message:"C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i!",this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:i}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",t),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime)}})}onPageChange(t){this.currentPage=t.page+1,this.itemsPerPage=t.rows,this.offset=(this.currentPage-1)*this.itemsPerPage,this.fetchListOfStations()}onReSync(){this.fetchListOfStations()}onSubmit(){this.ref.close(this.currentStation)}onDestroy(){this.ref.destroy()}getDeviceType(t){let i=this.deviceTypeOption.find(n=>n.value==t);return i?i.name:t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.E7),e.Y36(p.S),e.Y36(g.P),e.Y36(d.ez),e.Y36(e.Qsj),e.Y36(p.xA))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-pick-station"]],viewQuery:function(t,i){if(1&t&&(e.Gf(H,5,e.SBq),e.Gf(I,5,e.SBq),e.Gf(B,5,e.SBq)),2&t){let n;e.iGM(n=e.CRH())&&(i.divBound=n.first),e.iGM(n=e.CRH())&&(i.divTable=n.first),e.iGM(n=e.CRH())&&(i.divPaginator=n.first)}},decls:26,vars:15,consts:[[1,"absolute","top-0","left-0","bottom-0","right-0",3,"resize"],["divBound",""],[1,"absolute","top-0","left-0","w-full"],[1,"flex","align-items-center","justify-content-between","border-bottom-1","border-gray-300"],[1,"ml-2","text-xl","font-bold"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-danger","p-button-text",3,"click"],[1,"page-content","mt-1"],["divTable",""],["selectionMode","single","styleClass","p-datatable-sm p-datatable-striped","scrollHeight","flex",3,"selection","value","scrollable","loading","selectionChange"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"absolute","bottom-0","left-0","w-full","p-1","border-top-1","border-gray-300"],["divPaginator",""],[1,"grid","grid-nogutter"],[1,"col-12","md:col-5","flex","align-items-center"],["pButton","","pRipple","","type","button","label","Ch\u1ecdn","icon","fa-solid fa-check",1,"mr-1",3,"disabled","click"],["pButton","","pRipple","","type","button","label","H\u1ee7y b\u1ecf","icon","fa-solid fa-times",1,"p-button-outlined","mr-1",3,"click"],[1,"col-12","md:col-5","flex","align-items-center","justify-content-end"],["styleClass","p-0",3,"rows","totalRecords","rowsPerPageOptions","showJumpToPageDropdown","showPageLinks","onPageChange"],[1,"col-12","md:col-2","flex","align-items-center"],["pButton","","pRipple","","type","button","icon","fa-solid fa-sync",1,"p-button-raised","p-button-text",3,"click"],[1,"ml-1"],[1,"p-fluid","grid","formgrid"],[1,"field","col-12","md:col-3","mb-1"],[1,"p-inputgroup"],["type","text","pInputText","","placeholder","Ch\u1ecdn c\xf4ng tr\xecnh","disabled","",3,"ngModel","ngModelChange"],["type","button","pButton","","pRipple","","icon","pi pi-ellipsis-h",3,"click"],["type","text","pInputText","","placeholder","Nh\u1eadp t\xean tr\u1ea1m",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Nh\u1eadp m\xe3 tr\u1ea1m (MAC)",3,"ngModel","ngModelChange"],[1,"field","col-12","md:col-3"],[1,"flex","justify-content-between"],["type","button","pButton","","icon","fa-solid fa-undo","pTooltip","\u0110\u1eb7t l\u1ea1i","tooltipPosition","top",1,"mr-1",3,"click"],["type","button","pButton","","icon","fa-solid fa-search","pTooltip","T\xecm ki\u1ebfm","tooltipPosition","top",1,"mr-1",3,"click"],[2,"width","60px","max-width","60px"],["pSortableColumn","name",2,"min-width","200px"],["field","name"],[2,"min-width","50px"],[2,"min-width","150px"],[2,"min-width","100px"],[2,"min-width","200px"],[3,"pSelectableRow"],[1,"text-green-500",2,"min-width","100px"],["class","pi pi-check-circle",4,"ngIf"],[1,"pi","pi-check-circle"],[1,"p-fluid","p-2"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1),e.NdJ("resize",function(){return i.onWindowResize()},!1,e.Jf7),e.TgZ(2,"div",2)(3,"div",3)(4,"span",4),e._uU(5),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return i.onDestroy()}),e.qZA()(),e.TgZ(7,"div",6,7)(9,"p-table",8),e.NdJ("selectionChange",function(a){return i.currentStation=a}),e.YNc(10,U,14,3,"ng-template",9),e.YNc(11,F,14,0,"ng-template",10),e.YNc(12,R,13,7,"ng-template",11),e.YNc(13,Q,2,0,"ng-template",12),e.qZA()()(),e.TgZ(14,"div",13,14)(16,"div",15)(17,"div",16)(18,"button",17),e.NdJ("click",function(){return i.onSubmit()}),e.qZA(),e.TgZ(19,"button",18),e.NdJ("click",function(){return i.onDestroy()}),e.qZA()(),e.TgZ(20,"div",19)(21,"p-paginator",20),e.NdJ("onPageChange",function(a){return i.onPageChange(a)}),e.qZA()(),e.TgZ(22,"div",21)(23,"button",22),e.NdJ("click",function(){return i.onReSync()}),e.qZA(),e.TgZ(24,"span",23),e._uU(25),e.qZA()()()()()),2&t&&(e.xp6(5),e.Oqu(i.title),e.xp6(4),e.Q6J("selection",i.currentStation)("value",i.stations)("scrollable",!0)("loading",i.loading),e.xp6(9),e.Q6J("disabled",!i.currentStation),e.xp6(3),e.Q6J("rows",i.itemsPerPage)("totalRecords",i.totalItems)("rowsPerPageOptions",e.DdM(14,Y))("showJumpToPageDropdown",!0)("showPageLinks",!1),e.xp6(4),e.lnq("Displaying ",(i.currentPage-1)*i.itemsPerPage+1,"-",(i.currentPage-1)*i.itemsPerPage+i.itemsPerPage>i.totalItems?i.totalItems:(i.currentPage-1)*i.itemsPerPage+i.itemsPerPage," of ",i.totalItems,""))},directives:[f.Hq,m.H,_.iA,d.jx,s.Fj,c.o,s.JJ,s.On,E.u,_.lQ,_.fz,_.Ei,C.O5,h.D],styles:[""]}),o})();var M=l(5834),L=l(8386),j=l(3407);function G(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," *C\u1ea7n \u0111i\u1ec1n t\xean th\xf4ng s\u1ed1 ."),e.qZA())}function $(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," *T\xean th\xf4ng s\u1ed1 d\xe0i \xedt nh\u1ea5t 2 k\xfd t\u1ef1."),e.qZA())}function z(o,r){if(1&o&&(e.TgZ(0,"small",24),e.YNc(1,G,2,0,"div",25),e.YNc(2,$,2,0,"div",25),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.name.invalid),e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.name.errors.minlength)}}function V(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," *C\u1ea7n \u0111i\u1ec1n m\xe3 qu\u1ea3n l\xfd th\xf4ng s\u1ed1."),e.qZA())}function W(o,r){if(1&o&&(e.TgZ(0,"small",24),e.YNc(1,V,2,0,"div",25),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formGroup.controls.code.invalid)}}let D=(()=>{class o{constructor(t,i,n,a,u,b,y){this.ref=t,this.config=i,this.formBuilder=n,this.pHttpService=a,this.messageService=u,this.dialogService=b,this.userService=y,this.title="Th\xeam m\u1edbi th\xf4ng s\u1ed1 "}ngOnInit(){this.user=this.userService.getMyAccount(),this.formGroup=this.formBuilder.group({name:["",[s.kI.required,s.kI.minLength(2)]],description:[],code:["",[s.kI.required]],station:["",[s.kI.required]]}),this.config.data&&(this.title=this.config.data.title,this.parameter=this.config.data.parameter,this.parameter&&(this.formGroup.controls.station.disable(),this.formGroup.setValue({name:this.parameter.name,description:this.parameter.description?this.parameter.description:null,code:this.parameter.code,station:this.parameter.station})))}onPickProject(){this.dialogService.open(x.A,{showHeader:!1,width:"99vw",height:"99vh",contentStyle:{padding:"0",margin:0}}).onClose.subscribe(i=>{i&&this.formGroup.controls.project.setValue(i)})}onPickStation(){this.dialogService.open(q,{showHeader:!1,width:"99vw",height:"99vh",contentStyle:{padding:"0",margin:0}}).onClose.subscribe(i=>{i&&this.formGroup.controls.station.setValue(i)})}onSubmit(){this.parameter?this.onEdit():this.onAdd()}onAdd(){this.pHttpService.create(this.formGroup.value.name,this.formGroup.value.description,this.formGroup.value.code,this.formGroup.value.station._id).subscribe({next:t=>{t&&200===t.status&&(this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"\u0110\xe3 t\u1ea1o th\xf4ng s\u1ed1  th\xe0nh c\xf4ng"}),this.ref.close("success"))},error:t=>{let i;i=t&&t.error&&t.error.message?t.error.message:"C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i!",this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:i}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",t)}})}onEdit(){this.pHttpService.edit(this.parameter._id,this.formGroup.value.name,this.formGroup.value.description,this.formGroup.value.code).subscribe({next:t=>{t&&200===t.status?(this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"\u0110\xe3 c\u1eadp nh\u1eadt th\xf4ng s\u1ed1  th\xe0nh c\xf4ng"}),this.ref.close("success")):(this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"Kh\xf4ng t\xecm th\u1ea5y th\xf4ng s\u1ed1"}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",t.message))},error:t=>{let i;i=t&&t.error&&t.error.message?t.error.message:"C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i!",this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:i}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",t)}})}onDestroy(){this.ref.destroy()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.E7),e.Y36(p.S),e.Y36(s.qu),e.Y36(M.v),e.Y36(d.ez),e.Y36(p.xA),e.Y36(L.K))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-or-edit-parameter"]],decls:37,vars:8,consts:[[3,"formGroup","ngSubmit"],[1,"outbound"],[1,"header","flex","align-items-center","justify-content-between","border-bottom-1","border-gray-300"],[1,"ml-2","text-xl","font-bold"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-danger","p-button-text",3,"click"],[1,"content"],[1,"p-fluid","m-2"],[1,"field","mb-2"],["for","name"],[1,"ml-2","text-red-500"],["id","name","type","text","pInputText","","formControlName","name"],["class","text-red-500",4,"ngIf"],["for","desc"],["id","desc","pInputTextarea","","formControlName","description",3,"rows"],[1,"field","mb-3"],["for","code"],["id","code","type","text","pInputText","","formControlName","code"],["for","con"],["id","con",1,"p-inputgroup"],["type","text","pInputText","","disabled","",3,"value"],["type","button","pButton","","pRipple","","icon","pi pi-ellipsis-h",3,"disabled","click"],[1,"footer","flex","align-items-center","justify-content-end","border-top-1","border-gray-300"],["pButton","","pRipple","","type","button","label","H\u1ee7y b\u1ecf","icon","fa-solid fa-times",1,"p-button-outlined","mr-1",3,"click"],["pButton","","pRipple","","type","submit","label","L\u01b0u th\xf4ng tin","icon","fa-solid fa-floppy-disk",1,"mr-1",3,"disabled"],[1,"text-red-500"],[4,"ngIf"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.onDestroy()}),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"label",8),e._uU(10,"T\xean "),e.TgZ(11,"span",9),e._uU(12,"(*)"),e.qZA()(),e._UZ(13,"input",10),e.YNc(14,z,3,2,"small",11),e.qZA(),e.TgZ(15,"div",7)(16,"label",12),e._uU(17,"M\xf4 t\u1ea3"),e.qZA(),e._UZ(18,"textarea",13),e.qZA(),e.TgZ(19,"div",14)(20,"label",15),e._uU(21,"M\xe3 qu\u1ea3n l\xfd"),e.TgZ(22,"span",9),e._uU(23,"(*)"),e.qZA()(),e._UZ(24,"input",16),e.YNc(25,W,2,1,"small",11),e.qZA(),e.TgZ(26,"div",7)(27,"label",17),e._uU(28,"Tr\u1ea1m "),e.TgZ(29,"span",9),e._uU(30,"(*)"),e.qZA()(),e.TgZ(31,"div",18),e._UZ(32,"input",19),e.TgZ(33,"button",20),e.NdJ("click",function(){return i.onPickStation()}),e.qZA()()()()(),e.TgZ(34,"div",21)(35,"button",22),e.NdJ("click",function(){return i.onDestroy()}),e.qZA(),e._UZ(36,"button",23),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.formGroup),e.xp6(4),e.Oqu(i.title),e.xp6(10),e.Q6J("ngIf",i.formGroup.controls.name.invalid&&i.formGroup.controls.name.touched),e.xp6(4),e.Q6J("rows",2),e.xp6(7),e.Q6J("ngIf",i.formGroup.controls.code.invalid&&i.formGroup.controls.code.touched),e.xp6(7),e.Q6J("value",null!=i.formGroup.controls.station.value&&i.formGroup.controls.station.value.name?i.formGroup.controls.station.value.name:"Ch\u1ecdn tr\u1ea1m"),e.xp6(1),e.Q6J("disabled",i.parameter),e.xp6(3),e.Q6J("disabled",i.formGroup.invalid))},directives:[s._Y,s.JL,s.sg,f.Hq,m.H,s.Fj,c.o,s.JJ,s.u,C.O5,j.g],styles:[".outbound[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;overflow:hidden}.outbound[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:45px}.outbound[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:absolute;top:45px;bottom:45px;left:0;width:100%;overflow:auto}.outbound[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{position:absolute;bottom:0;height:45px;left:0;width:100%}"]}),o})();var A=l(5431),X=l(3542);function K(o,r){1&o&&(e.TgZ(0,"tr")(1,"th",4),e._uU(2,"#"),e.qZA(),e.TgZ(3,"th",5),e._uU(4,"Th\xf4ng tin"),e.qZA(),e.TgZ(5,"th",5),e._uU(6,"Chi ti\u1ebft"),e.qZA()())}function ee(o,r){if(1&o&&(e.TgZ(0,"tr")(1,"td",4),e._uU(2),e.qZA(),e.TgZ(3,"td",5),e._uU(4),e.qZA(),e.TgZ(5,"td",5),e._uU(6),e.qZA()()),2&o){const t=r.$implicit,i=r.rowIndex;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.key),e.xp6(2),e.Oqu(t.value)}}let te=(()=>{class o{constructor(){this.characteristics=[],this.totalItems=0}ngOnInit(){this.getCharacteristics()}getCharacteristics(){var t;this.totalItems=0;for(const i in this.parameter)"name"==i?(this.characteristics[this.totalItems]={key:"T\xean",value:this.parameter[i]},this.totalItems+=1):"description"==i?(this.characteristics[this.totalItems]={key:"M\xf4 t\u1ea3",value:this.parameter[i]},this.totalItems+=1):"code"==i?(this.characteristics[this.totalItems]={key:"M\xe3 qu\u1ea3n l\xfd",value:this.parameter[i]},this.totalItems+=1):"project_name"==i?(this.characteristics[this.totalItems]={key:"C\xf4ng tr\xecnh",value:this.parameter[i]},this.totalItems+=1):"station"==i?(this.characteristics[this.totalItems]={key:"Tr\u1ea1m",value:null===(t=this.parameter[i])||void 0===t?void 0:t.name},this.totalItems+=1):"created_at"==i?(this.characteristics[this.totalItems]={key:"Th\u1eddi gian t\u1ea1o",value:this.convertTime(this.parameter[i])},this.totalItems+=1):"updated_at"==i&&(this.characteristics[this.totalItems]={key:"C\u1eadp nh\u1eadt",value:this.convertTime(this.parameter[i])},this.totalItems+=1)}convertTime(t){return P.I.isoToVnTime(t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-parameter-info"]],inputs:{parameter:"parameter"},decls:4,vars:2,consts:[[1,"absolute","top-0","left-0","bottom-0","right-0"],["styleClass","p-datatable-sm p-datatable-striped","scrollHeight","flex",3,"value","scrollable"],["pTemplate","header"],["pTemplate","body"],[2,"width","60px","max-width","60px"],[2,"min-width","200px"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"p-table",1),e.YNc(2,K,7,0,"ng-template",2),e.YNc(3,ee,7,3,"ng-template",3),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("value",i.characteristics)("scrollable",!0))},directives:[_.iA,d.jx],styles:[""]}),o})();var w=l(9269),ie=l(4036),ne=l(7010),oe=l(1208),J=l(5034);const ae=["divBound"],re=["divTable"],se=["divPaginator"];function le(o,r){1&o&&(e.TgZ(0,"tr")(1,"th",44),e._uU(2,"#"),e.qZA(),e.TgZ(3,"th",45),e._uU(4,"X"),e.qZA(),e.TgZ(5,"th",45),e._uU(6,"Y"),e.qZA(),e.TgZ(7,"th",46),e._uU(8,"X\xf3a"),e.qZA()())}function pe(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",44),e._uU(2),e.qZA(),e.TgZ(3,"td",45)(4,"div",47)(5,"p-inputNumber",48),e.NdJ("ngModelChange",function(n){return e.CHM(t).$implicit.x=n}),e.qZA()()(),e.TgZ(6,"td",45)(7,"div",47)(8,"p-inputNumber",48),e.NdJ("ngModelChange",function(n){return e.CHM(t).$implicit.y=n}),e.qZA()()(),e.TgZ(9,"td",46)(10,"button",49),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(3).onRemoveXY(a)}),e.qZA()()()}if(2&o){const t=r.$implicit,i=r.rowIndex;e.xp6(2),e.Oqu(i+1),e.xp6(3),e.Q6J("showClear",!0)("minFractionDigits",0)("maxFractionDigits",6)("ngModel",t.x),e.xp6(3),e.Q6J("showClear",!0)("minFractionDigits",0)("maxFractionDigits",6)("ngModel",t.y)}}function me(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",50)(1,"button",51),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).onAddXY()}),e.qZA()()}}function de(o,r){if(1&o&&(e.TgZ(0,"div",9)(1,"label",38),e._uU(2,"B\u1ea3ng tra:"),e.qZA(),e.TgZ(3,"div",11)(4,"div",39)(5,"p-table",40),e.YNc(6,le,9,0,"ng-template",41),e.YNc(7,pe,11,9,"ng-template",42),e.YNc(8,me,2,0,"ng-template",43),e.qZA()()()()),2&o){const t=e.oxw(2);e.xp6(5),e.Q6J("value",t.xyItems)("scrollable",!0)}}function ce(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",9)(1,"label",52),e._uU(2,"B\u1ed9 th\xf4ng s\u1ed1 t\xednh \u0111\u1ed9 m\u1edf van cung theo g\xf3c:"),e.qZA(),e.TgZ(3,"div",11)(4,"div",53)(5,"div",47)(6,"span",54),e._uU(7,"H0 (m)"),e.qZA(),e.TgZ(8,"p-inputNumber",55),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw(2).H0=n}),e.qZA()(),e.TgZ(9,"div",47)(10,"span",54),e._uU(11,"R (m)"),e.qZA(),e.TgZ(12,"p-inputNumber",56),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw(2).Radius=n}),e.qZA()(),e.TgZ(13,"div",47)(14,"span",54),e._uU(15,"\u03b10 (\u0111\u1ed9)"),e.qZA(),e.TgZ(16,"p-inputNumber",57),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw(2).anpha0=n}),e.qZA()()()()()}if(2&o){const t=e.oxw(2);e.xp6(8),e.Q6J("minFractionDigits",0)("maxFractionDigits",3)("ngModel",t.H0)("min",0),e.xp6(4),e.Q6J("minFractionDigits",0)("maxFractionDigits",3)("ngModel",t.Radius)("min",0),e.xp6(4),e.Q6J("minFractionDigits",0)("maxFractionDigits",3)("ngModel",t.anpha0)("min",0)}}function ue(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"p",8),e._uU(3,"C\xe0i \u0111\u1eb7t t\xednh to\xe1n "),e.qZA(),e.YNc(4,de,9,2,"div",27),e.TgZ(5,"div",9)(6,"label",28),e._uU(7,"C\xf4ng th\u1ee9c t\xednh to\xe1n:"),e.qZA(),e.TgZ(8,"div",11)(9,"div",12)(10,"p-dropdown",29),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().ftype=n})("ngModelChange",function(){return e.CHM(t),e.oxw().onChangeFtype()}),e.qZA()()()(),e.YNc(11,ce,17,12,"div",27),e.TgZ(12,"div",9)(13,"label",30),e._uU(14,"H\u1ec7 s\u1ed1 \u0111i\u1ec1u ch\u1ec9nh:"),e.qZA(),e.TgZ(15,"div",11)(16,"div",12)(17,"p-inputNumber",31),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().hs=n}),e.qZA()()()(),e.TgZ(18,"div",9)(19,"label",32),e._uU(20,"Lo\u1ea1i gi\xe1 tr\u1ecb t\xednh to\xe1n:"),e.qZA(),e.TgZ(21,"div",11)(22,"div",12)(23,"p-dropdown",33),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().cval=n}),e.qZA()()()(),e.TgZ(24,"div",9)(25,"label",34),e._uU(26,"Gi\xe1 tr\u1ecb ch\xeanh l\u1ec7ch (delta):"),e.qZA(),e.TgZ(27,"div",11)(28,"div",12)(29,"p-inputNumber",35),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().dval=n}),e.qZA()()()(),e.TgZ(30,"div",9)(31,"label",36),e._uU(32,"Chu k\u1ef3 g\u1eedi s\u1ed1 li\u1ec7u (gi\xe2y):"),e.qZA(),e.TgZ(33,"div",11)(34,"div",12)(35,"p-inputNumber",37),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().cycle=n}),e.qZA()()()()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.has_xyItems_cfg),e.xp6(6),e.Q6J("options",t.funcTypeOption)("ngModel",t.ftype),e.xp6(1),e.Q6J("ngIf",t.has_valve_cfg),e.xp6(6),e.Q6J("ngModel",t.hs)("minFractionDigits",0)("maxFractionDigits",3),e.xp6(6),e.Q6J("options",t.valOption)("ngModel",t.cval),e.xp6(6),e.Q6J("minFractionDigits",0)("maxFractionDigits",3)("ngModel",t.dval)("min",0),e.xp6(6),e.Q6J("ngModel",t.cycle)("min",0)}}function ge(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"p",8),e._uU(3,"C\xe0i \u0111\u1eb7t hi\u1ec3n th\u1ecb tr\xean HMI"),e.qZA(),e.TgZ(4,"div",9)(5,"label",58),e._uU(6,"Cho ph\xe9p hi\u1ec3n th\u1ecb:"),e.qZA(),e.TgZ(7,"div",11)(8,"div",59)(9,"p-checkbox",60),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().en_hmi_display=n}),e.qZA(),e.TgZ(10,"label",61),e._uU(11),e.qZA()()()(),e.TgZ(12,"div",9)(13,"label",62),e._uU(14,"Lo\u1ea1i gi\xe1 tr\u1ecb hi\u1ec3n th\u1ecb:"),e.qZA(),e.TgZ(15,"div",11)(16,"div",12)(17,"p-dropdown",63),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().hmi_data=n}),e.qZA()()()(),e.TgZ(18,"div",9)(19,"label",64),e._uU(20,"V\u1ecb tr\xed hi\u1ec3n th\u1ecb:"),e.qZA(),e.TgZ(21,"div",11)(22,"div",12)(23,"div",12)(24,"p-inputNumber",65),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().hmi_reg=n}),e.qZA()()()()(),e.TgZ(25,"div",9)(26,"label",66),e._uU(27,"\u0110\u1ecba ch\u1ec9 HMI:"),e.qZA(),e.TgZ(28,"div",11)(29,"div",12)(30,"p-inputNumber",67),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().hmi_addr=n}),e.qZA()()()()()()}if(2&o){const t=e.oxw();e.xp6(9),e.Q6J("ngModel",t.en_hmi_display)("binary",!0),e.xp6(2),e.hij("(",t.en_hmi_display?"Cho ph\xe9p":"Kh\xf4ng cho ph\xe9p",")"),e.xp6(6),e.Q6J("options",t.valOption)("ngModel",t.hmi_data),e.xp6(7),e.Q6J("ngModel",t.hmi_reg)("min",40001),e.xp6(6),e.Q6J("ngModel",t.hmi_addr)("min",1)}}function he(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"p",8),e._uU(3,"C\xe0i \u0111\u1eb7t \u0111i\u1ec1u khi\u1ec3n c\xf2i "),e.qZA(),e.TgZ(4,"div",9)(5,"label",68),e._uU(6,"Thanh ghi \u0111i\u1ec1u khi\u1ec3n:"),e.qZA(),e.TgZ(7,"div",11)(8,"div",12)(9,"p-inputNumber",69),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().siren_control_reg=n}),e.qZA()()()(),e.TgZ(10,"div",9)(11,"label",70),e._uU(12,"Thanh ghi tr\u1ea1ng th\xe1i:"),e.qZA(),e.TgZ(13,"div",11)(14,"div",12)(15,"p-inputNumber",71),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().siren_status_reg=n}),e.qZA()()()(),e.TgZ(16,"div",9)(17,"label",72),e._uU(18,"Chu k\u1ef3 \u0111\u1ecdc tr\u1ea1ng th\xe1i (ms):"),e.qZA(),e.TgZ(19,"div",11)(20,"div",12)(21,"p-inputNumber",73),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().siren_read_cycle=n}),e.qZA()()()()()()}if(2&o){const t=e.oxw();e.xp6(9),e.Q6J("ngModel",t.siren_control_reg)("min",40001),e.xp6(6),e.Q6J("ngModel",t.siren_status_reg)("min",40001),e.xp6(6),e.Q6J("ngModel",t.siren_read_cycle)("min",0)}}let _e=(()=>{class o{constructor(t,i,n,a,u,b,y,S){this.sHttpService=t,this.messageService=i,this.renderer=n,this.permissionService=a,this.dialogService=u,this.pHttpService=b,this.router=y,this.confirmService=S,this.sensorAndActuatorTypeOption=T.o.sensorAndActuatorTypeOption,this.funcTypeOption=T.o.funcTypeOption,this.valOption=T.o.valOption,this.portOption=T.o.portOption,this.xyItems=[],this.has_calc_cfg=!1,this.has_xyItems_cfg=!1,this.has_valve_cfg=!1,this.has_hmi_cfg=!1,this.has_siren_modbus_cfg=!1,this.loading=!1}ngAfterViewChecked(){this.renderer.setStyle(this.divTable.nativeElement,"height",`  ${this.divBound.nativeElement.offsetHeight-this.divPaginator.nativeElement.offsetHeight}px`)}ngOnDestroy(){this.subPermission&&this.subPermission.unsubscribe(),this.loadingTime&&clearTimeout(this.loadingTime)}ngOnInit(){this.subPermission=this.permissionService.currentPermission.subscribe(t=>{t&&(this.permission=t)}),this.fetchParameterInfo()}fetchParameterInfo(){this.loadingTime=setTimeout(()=>{this.loading=!0},1e3),this.pHttpService.getDetail(this.parameter._id).subscribe({next:t=>{t&&200===t.status&&(this.parameter=t.metadata,this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime),this.loadConfig())},error:t=>{let i;i=t&&t.error&&t.error.message?t.error.message:"C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i!",this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:i}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",t),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime)}})}loadConfig(){if(this.parameter.dtype&&(this.dtype=this.parameter.dtype),this.parameter.port&&(this.port=this.parameter.port),this.parameter.address&&(this.address=this.parameter.address),this.onChangeDtype(),this.has_calc_cfg){if(this.has_xyItems_cfg&&this.parameter.table)try{this.xyItems=JSON.parse(this.parameter.table)}catch(t){this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"L\u1ed7i t\u1ea3i b\u1ea3ng tra"})}if(this.parameter.ftype&&(this.ftype=this.parameter.ftype),this.parameter.params)try{this.params=JSON.parse(this.parameter.params),this.hs=this.params.hs,this.onChangeFtype()}catch(t){this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"L\u1ed7i t\u1ea3i b\u1ed9 tham s\u1ed1 c\xf4ng th\u1ee9c"})}this.parameter.cval&&(this.cval=this.parameter.cval),this.parameter.dval&&(this.dval=this.parameter.dval),this.parameter.cycle&&(this.cycle=this.parameter.cycle)}if(this.has_hmi_cfg&&this.parameter.hmi)try{let t=JSON.parse(this.parameter.hmi);this.hmi_addr=t.addr,this.hmi_reg=t.reg,this.hmi_data=t.data,this.en_hmi_display=1==t.en}catch(t){this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"L\u1ed7i t\u1ea3i c\xe0i \u0111\u1eb7t hmi"})}if(this.has_siren_modbus_cfg&&this.parameter.siren_control)try{let t=JSON.parse(this.parameter.siren_control);this.address=t.addr,this.siren_control_reg=t.creg,this.siren_status_reg=t.sreg,this.siren_read_cycle=t.cycle}catch(t){this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"L\u1ed7i t\u1ea3i c\xe0i \u0111\u1eb7t \u0111i\u1ec1u khi\u1ec3n c\xf2i"})}}onChangeDtype(){this.dtype&&this.dtype.includes("s")?(this.has_calc_cfg=!0,this.has_hmi_cfg=!0,this.has_siren_modbus_cfg=!1,this.has_xyItems_cfg="s6"!=this.dtype,this.has_valve_cfg="ct2"==this.ftype):this.dtype&&this.dtype.includes("c")&&(this.has_calc_cfg=!1,this.has_xyItems_cfg=!1,this.has_valve_cfg=!1,this.has_hmi_cfg=!1,this.has_siren_modbus_cfg="c1"==this.dtype)}onChangeFtype(){"ct2"==this.ftype?(this.has_valve_cfg=!0,this.has_valve_cfg&&(this.H0=this.params&&this.params.h0?this.params.h0:0,this.Radius=this.params&&this.params.radius?this.params.radius:0,this.anpha0=this.params&&this.params.a0?this.params.a0:0)):this.has_valve_cfg=!1}onSaveConfig(){let t,i,n,a;try{if(this.dtype&&this.dtype.includes("s")){if("DO"==this.port)return void this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"C\u1ea5u h\xecnh sai c\u1ed5ng k\u1ebft n\u1ed1i!"});if("DI"==this.port&&"s4"!=this.dtype)return void this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"C\u1ea5u h\xecnh sai c\u1ed5ng k\u1ebft n\u1ed1i!"});if("AI"==this.port&&"s1"!=this.dtype&&"s2"!=this.dtype&&"s3"!=this.dtype&&"s5"!=this.dtype&&"s7"!=this.dtype)return void this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"C\u1ea5u h\xecnh sai c\u1ed5ng k\u1ebft n\u1ed1i!"});if("RS485"==this.port&&"s6"!=this.dtype&&"s8"!=this.dtype)return void this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"C\u1ea5u h\xecnh sai c\u1ed5ng k\u1ebft n\u1ed1i!"});a=null,t="s6"==this.dtype?null:JSON.stringify(this.xyItems),i="ct2"==this.ftype?JSON.stringify({h0:this.H0,radius:this.Radius,a0:this.anpha0,hs:this.hs}):JSON.stringify({hs:this.hs}),n=JSON.stringify({addr:this.hmi_addr,reg:this.hmi_reg,data:this.hmi_data,en:this.en_hmi_display?1:0})}else if(this.dtype&&this.dtype.includes("c")){if("c1"==this.dtype&&"RS485"!=this.port)return void this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"C\u1ea5u h\xecnh sai c\u1ed5ng k\u1ebft n\u1ed1i!"});if("c2"==this.dtype&&"DO"!=this.port)return void this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"C\u1ea5u h\xecnh sai c\u1ed5ng k\u1ebft n\u1ed1i!"});if(!this.siren_control_reg||!this.siren_status_reg||!this.siren_read_cycle)return void this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"Thi\u1ebfu c\xe1c th\xf4ng tin thanh ghi v\xe0 chu k\u1ef3 c\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i!"});t=null,i=null,n=null,this.cval=null,this.dval=null,this.cycle=null,this.ftype=null,a="c1"==this.dtype?JSON.stringify({addr:this.address,creg:this.siren_control_reg,sreg:this.siren_status_reg,cycle:this.siren_read_cycle}):null}}catch(u){return void this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"C\xf3 l\u1ed7i x\u1ea3y ra khi l\u01b0u c\u1ea5u h\xecnh!"})}this.pHttpService.config(this.parameter._id,this.dtype,this.port,this.address,this.ftype,this.cval,this.dval,this.cycle,t,i,n,a).subscribe({next:u=>{this.messageService.add(u&&200===u.status?{severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"\u0110\xe3 l\u01b0u c\u1ea5u h\xecnh th\xf4ng s\u1ed1 th\xe0nh c\xf4ng"}:{severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"Kh\xf4ng t\xecm th\u1ea5y th\xf4ng s\u1ed1!"})},error:u=>{let b;b=u&&u.error&&u.error.message?u.error.message:"C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i!",this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:b}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",u)}})}onRemoveXY(t){this.xyItems.splice(this.xyItems.indexOf(t),1)}onAddXY(){this.xyItems.push({x:0,y:0})}onCancel(){this.loadConfig()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.P),e.Y36(d.ez),e.Y36(e.Qsj),e.Y36(A.$),e.Y36(p.xA),e.Y36(M.v),e.Y36(v.F0),e.Y36(w.I))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-parameter-config"]],viewQuery:function(t,i){if(1&t&&(e.Gf(ae,5,e.SBq),e.Gf(re,5,e.SBq),e.Gf(se,5,e.SBq)),2&t){let n;e.iGM(n=e.CRH())&&(i.divBound=n.first),e.iGM(n=e.CRH())&&(i.divTable=n.first),e.iGM(n=e.CRH())&&(i.divPaginator=n.first)}},inputs:{parameter:"parameter"},decls:44,vars:14,consts:[[1,"absolute","top-0","left-0","bottom-0","right-0"],["divBound",""],[1,"absolute","top-0","left-0","w-full","overflow-auto"],["divTable",""],[1,"grid","grid-nogutter"],[1,"col-12","lg:col-6"],[1,"m-1","p-1","mb-2","bg-blue-100","border-round","border-1","border-blue-100"],[1,"bg-white","p-2"],[1,"m-0","mb-2","px-0","pt-0","pb-2","font-bold","border-bottom-1","border-gray-300"],[1,"grid"],["for","dtypeOp",1,"col-12","mb-2","lg:col-4","lg:mb-0"],[1,"col-12","lg:col-8"],[1,"p-fluid"],["id","dtypeOp","optionLabel","name","optionValue","value","placeholder","Ch\u1ecdn lo\u1ea1i thi\u1ebft b\u1ecb","panelStyleClass","text-overflow-ellipsis text-sm",3,"options","ngModel","ngModelChange","onChange"],["for","dl",1,"col-12","mb-2","lg:col-4","lg:mb-0"],["type","text","pInputText","","disabled","",3,"ngModel","ngModelChange"],["for","port",1,"col-12","mb-2","lg:col-4","lg:mb-0"],["id","port","optionLabel","name","optionValue","value","placeholder","Ch\u1ecdn c\u1ed5ng k\u1ebft n\u1ed1i","panelStyleClass","text-overflow-ellipsis text-sm",3,"options","ngModel","ngModelChange"],["for","addrp",1,"col-12","mb-2","lg:col-4","lg:mb-0"],["mode","decimal","placeholder","\u0110\u1ecba ch\u1ec9 c\u1ed5ng k\u1ebft n\u1ed1i (vd: 1,2,3,...)",3,"showClear","min","max","ngModel","ngModelChange"],["class","m-1 p-1 mb-2 bg-blue-100 border-round border-1 border-blue-100",4,"ngIf"],[1,"absolute","bottom-0","left-0","p-1","w-full","border-top-1","border-gray-300"],["divPaginator",""],[1,"col-12","flex","align-items-center"],["pButton","","pRipple","","type","button","label","L\u01b0u th\xf4ng tin","icon","fa-solid fa-floppy-disk",1,"mr-1",3,"disabled","click"],["pButton","","pRipple","","type","button","label","H\u1ee7y b\u1ecf","icon","fa-solid fa-times",1,"p-button-outlined","mr-1",3,"click"],[3,"show"],["class","grid",4,"ngIf"],["for","func",1,"col-12","mb-2","lg:col-4","lg:mb-0"],["id","func","optionLabel","name","optionValue","value","placeholder","Ch\u1ecdn c\xf4ng th\u1ee9c t\xednh to\xe1n s\u1ed1 li\u1ec7u","panelStyleClass","text-overflow-ellipsis text-sm",3,"options","ngModel","ngModelChange"],["for","hs",1,"col-12","mb-2","lg:col-4","lg:mb-0"],["id","hs","mode","decimal","placeholder","Nh\u1eadp h\u1ec7 s\u1ed1 \u0111i\u1ec1u ch\u1ec9nh (cao tr\xecnh/b\xf9/...)",3,"ngModel","minFractionDigits","maxFractionDigits","ngModelChange"],["for","val",1,"col-12","mb-2","lg:col-4","lg:mb-0"],["id","val","optionLabel","name","optionValue","value","placeholder","Ch\u1ecdn lo\u1ea1i gi\xe1 tr\u1ecb \u0111\u1ec3 hi\u1ec3n th\u1ecb, truy\u1ec1n s\u1ed1 li\u1ec7u","panelStyleClass","text-overflow-ellipsis text-sm",3,"options","ngModel","ngModelChange"],["for","delt",1,"col-12","mb-2","lg:col-4","lg:mb-0"],["id","delt","mode","decimal","placeholder","Gi\xe1 tr\u1ecb delta k\xedch ho\u1ea1t g\u1eedi s\u1ed1 li\u1ec7u v\u1ec1 server",3,"minFractionDigits","maxFractionDigits","ngModel","min","ngModelChange"],["for","cyc",1,"col-12","mb-2","lg:col-4","lg:mb-0"],["id","cyc","mode","decimal","placeholder","Chu k\u1ef3 g\u1eedi s\u1ed1 li\u1ec7u v\u1ec1 server (gi\xe2y)",3,"ngModel","min","ngModelChange"],["for","tbl",1,"col-12","mb-2","lg:col-4","lg:mb-0"],[1,"p-1","bg-white"],["id","tbl","styleClass","p-datatable-sm p-datatable-striped","scrollHeight","flex",3,"value","scrollable"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[2,"max-width","30px"],[2,"min-width","30px"],[2,"max-width","50px"],[1,"p-inputgroup"],["mode","decimal",3,"showClear","minFractionDigits","maxFractionDigits","ngModel","ngModelChange"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-danger",3,"click"],[1,"flex","align-items-center","justify-content-end"],["pButton","","pRipple","","label","Th\xeam","type","button","icon","pi pi-plus",1,"p-button-sm","mr-2",3,"click"],["for","pram",1,"col-12","mb-2","lg:col-4","lg:mb-0"],["id","pram",1,"p-fluid"],[1,"p-inputgroup-addon",2,"width","80px"],["mode","decimal","placeholder","Nh\u1eadp h\u1ec7 s\u1ed1 H0 theo c\xf4ng th\u1ee9c",3,"minFractionDigits","maxFractionDigits","ngModel","min","ngModelChange"],["mode","decimal","placeholder","Nh\u1eadp b\xe1n k\xednh van cung",3,"minFractionDigits","maxFractionDigits","ngModel","min","ngModelChange"],["mode","decimal","placeholder","Nh\u1eadp g\xf3c anpha 0",3,"minFractionDigits","maxFractionDigits","ngModel","min","ngModelChange"],["for","ehmi",1,"col-12","mb-2","lg:col-4","lg:mb-0"],[1,"field-checkbox"],["id","ehmi","inputId","binary",3,"ngModel","binary","ngModelChange"],["for","binary"],["for","vhmi",1,"col-12","mb-2","lg:col-4","lg:mb-0"],["id","vhmi","optionLabel","name","optionValue","value","placeholder","Ch\u1ecdn lo\u1ea1i gi\xe1 tr\u1ecb c\u1ea7n hi\u1ec3n th\u1ecb","panelStyleClass","text-overflow-ellipsis text-sm",3,"options","ngModel","ngModelChange"],["for","reghmi",1,"col-12","mb-2","lg:col-4","lg:mb-0"],["id","reghmi","mode","decimal","placeholder","\u0110\u1ecba ch\u1ec9 thanh ghi hi\u1ec3n th\u1ecb",3,"ngModel","min","ngModelChange"],["for","addhmi",1,"col-12","mb-2","lg:col-4","lg:mb-0"],["id","addhmi","mode","decimal","placeholder","\u0110\u1ecba ch\u1ec9 c\u1ee7a m\xe0n h\xecnh HMI theo modbus RTU",3,"ngModel","min","ngModelChange"],["for","addctlsir",1,"col-12","mb-2","lg:col-4","lg:mb-0"],["id","addctlsir","mode","decimal","placeholder","\u0110\u1ecba ch\u1ec9 thanh ghi \u0111i\u1ec1u khi\u1ec3n",3,"ngModel","min","ngModelChange"],["for","addstsir",1,"col-12","mb-2","lg:col-4","lg:mb-0"],["id","addstsir","mode","decimal","placeholder","\u0110\u1ecba ch\u1ec9 thanh ghi tr\u1ea1ng th\xe1i \u0111i\u1ec1u khi\u1ec3n",3,"ngModel","min","ngModelChange"],["for","cycsir",1,"col-12","mb-2","lg:col-4","lg:mb-0"],["id","cycsir","mode","decimal","placeholder","Chu k\u1ef3 \u0111\u1ecdc thanh ghi tr\u1ea1ng th\xe1i \u0111i\u1ec1u khi\u1ec3n (ms)",3,"ngModel","min","ngModelChange"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1)(2,"div",2,3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"p",8),e._uU(9,"C\u1ea5u h\xecnh thi\u1ebft b\u1ecb "),e.qZA(),e.TgZ(10,"div",9)(11,"label",10),e._uU(12,"Lo\u1ea1i thi\u1ebft b\u1ecb:"),e.qZA(),e.TgZ(13,"div",11)(14,"div",12)(15,"p-dropdown",13),e.NdJ("ngModelChange",function(a){return i.dtype=a})("onChange",function(){return i.onChangeDtype()}),e.qZA()()()(),e.TgZ(16,"div",9)(17,"label",14),e._uU(18,"Thu\u1ed9c tr\u1ea1m:"),e.qZA(),e.TgZ(19,"div",11)(20,"div",12)(21,"input",15),e.NdJ("ngModelChange",function(a){return i.parameter.station.name=a}),e.qZA()()()(),e.TgZ(22,"div",9)(23,"label",16),e._uU(24,"K\u1ebft n\u1ed1i \u0111\u1ebfn c\u1ed5ng:"),e.qZA(),e.TgZ(25,"div",11)(26,"div",12)(27,"p-dropdown",17),e.NdJ("ngModelChange",function(a){return i.port=a}),e.qZA()()()(),e.TgZ(28,"div",9)(29,"label",18),e._uU(30,"\u0110\u1ecba ch\u1ec9 c\u1ed5ng:"),e.qZA(),e.TgZ(31,"div",11)(32,"div",12)(33,"p-inputNumber",19),e.NdJ("ngModelChange",function(a){return i.address=a}),e.qZA()()()()()(),e.YNc(34,ue,36,15,"div",20),e.YNc(35,ge,31,9,"div",20),e.YNc(36,he,22,6,"div",20),e.qZA()()(),e.TgZ(37,"div",21,22)(39,"div",4)(40,"div",23)(41,"button",24),e.NdJ("click",function(){return i.onSaveConfig()}),e.qZA(),e.TgZ(42,"button",25),e.NdJ("click",function(){return i.onCancel()}),e.qZA()()()()(),e._UZ(43,"ngx-loading",26)),2&t&&(e.xp6(15),e.Q6J("options",i.sensorAndActuatorTypeOption)("ngModel",i.dtype),e.xp6(6),e.Q6J("ngModel",i.parameter.station.name),e.xp6(6),e.Q6J("options",i.portOption)("ngModel",i.port),e.xp6(6),e.Q6J("showClear",!0)("min",1)("max",32)("ngModel",i.address),e.xp6(1),e.Q6J("ngIf",i.has_calc_cfg),e.xp6(1),e.Q6J("ngIf",i.has_hmi_cfg),e.xp6(1),e.Q6J("ngIf",i.has_siren_modbus_cfg),e.xp6(5),e.Q6J("disabled",!i.permission.parameter.edit),e.xp6(2),e.Q6J("show",i.loading))},directives:[ie.Lt,s.JJ,s.On,s.Fj,c.o,ne.Rn,C.O5,_.iA,d.jx,f.Hq,m.H,oe.XZ,J.RJ],styles:[""]}),o})(),fe=(()=>{class o{constructor(t,i,n,a,u,b,y,S){this.sHttpService=t,this.messageService=i,this.renderer=n,this.permissionService=a,this.dialogService=u,this.pHttpService=b,this.router=y,this.confirmService=S,this.loading=!1}ngOnDestroy(){this.subPermission&&this.subPermission.unsubscribe(),this.loadingTime&&clearTimeout(this.loadingTime)}ngOnInit(){this.subPermission=this.permissionService.currentPermission.subscribe(t=>{t&&(this.permission=t)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.P),e.Y36(d.ez),e.Y36(e.Qsj),e.Y36(A.$),e.Y36(p.xA),e.Y36(M.v),e.Y36(v.F0),e.Y36(w.I))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-control-panel"]],inputs:{parameter:"parameter"},decls:3,vars:1,consts:[[1,"absolute","top-0","left-0","bottom-0","right-0"],[3,"show"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._uU(1," N\u1ed9i dung\n"),e.qZA(),e._UZ(2,"ngx-loading",1)),2&t&&(e.xp6(2),e.Q6J("show",i.loading))},directives:[J.RJ],styles:[""]}),o})();var N=l(97);const ve=["divBound"],Ce=["divHeader"],be=["divTable"];function xe(o,r){if(1&o&&e._UZ(0,"app-parameter-info",13),2&o){const t=e.oxw(2);e.Q6J("parameter",t.parameter)}}function Te(o,r){if(1&o&&e._UZ(0,"app-parameter-config",13),2&o){const t=e.oxw(2);e.Q6J("parameter",t.parameter)}}function ye(o,r){if(1&o&&e._UZ(0,"app-control-panel",13),2&o){const t=e.oxw(2);e.Q6J("parameter",t.parameter)}}function Ee(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",2,3),e.NdJ("resize",function(){return e.CHM(t),e.oxw().onWindowResize()},!1,e.Jf7),e.TgZ(2,"div",4,5)(4,"div",6)(5,"span",7),e._uU(6),e.qZA(),e.TgZ(7,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().onDestroy()}),e.qZA()(),e._UZ(8,"p-tabMenu",9),e.qZA(),e.TgZ(9,"div",10,11),e.YNc(11,xe,1,1,"app-parameter-info",12),e.YNc(12,Te,1,1,"app-parameter-config",12),e.YNc(13,ye,1,1,"app-control-panel",12),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(6),e.AsE("",t.title," ",t.parameter.name,""),e.xp6(2),e.Q6J("model",t.tabs)("activeItem",t.activeTab),e.xp6(3),e.Q6J("ngIf",1==t.tabIndex),e.xp6(1),e.Q6J("ngIf",2==t.tabIndex),e.xp6(1),e.Q6J("ngIf",3==t.tabIndex)}}function Ze(o,r){1&o&&(e._UZ(0,"i",16),e.TgZ(1,"span",17),e._uU(2,"B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp v\xe0o m\u1ee5c n\xe0y!"),e.qZA())}function Pe(o,r){1&o&&(e.TgZ(0,"p-messages",14),e.YNc(1,Ze,3,0,"ng-template",15),e.qZA())}let Me=(()=>{class o{constructor(t,i,n,a){this.renderer=t,this.permissionService=i,this.ref=n,this.config=a,this.tabIndex=1,this.title="Chi ti\u1ebft th\xf4ng s\u1ed1"}ngOnDestroy(){this.subPermission&&this.subPermission.unsubscribe()}setStyleDiv(){this.renderer.setStyle(this.divTable.nativeElement,"height",`  ${this.divBound.nativeElement.offsetHeight-this.divHeader.nativeElement.offsetHeight}px`)}ngAfterViewInit(){this.setStyleDiv()}onWindowResize(){this.setStyleDiv()}ngOnInit(){this.subPermission=this.permissionService.currentPermission.subscribe(t=>{t&&(this.permission=t,this.config.data.parameter&&(this.parameter=this.config.data.parameter),this.initForm())})}initForm(){this.tabs=[{label:"Th\xf4ng tin chung",command:()=>{this.tabIndex=1}},{label:"C\u1ea5u h\xecnh",command:()=>{this.tabIndex=2}},{label:"B\u1ea3ng \u0110i\u1ec1u khi\u1ec3n & Gi\xe1m s\xe1t",disabled:!0,command:()=>{this.tabIndex=3}}],this.activeTab=this.tabs[0],this.tabIndex=1}onDestroy(){this.ref.destroy()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.Qsj),e.Y36(A.$),e.Y36(p.E7),e.Y36(p.S))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-parameter-detail"]],viewQuery:function(t,i){if(1&t&&(e.Gf(ve,5,e.SBq),e.Gf(Ce,5,e.SBq),e.Gf(be,5,e.SBq)),2&t){let n;e.iGM(n=e.CRH())&&(i.divBound=n.first),e.iGM(n=e.CRH())&&(i.divHeader=n.first),e.iGM(n=e.CRH())&&(i.divTable=n.first)}},decls:3,vars:2,consts:[["class","absolute top-0 left-0 bottom-0 right-0",3,"resize",4,"ngIf","ngIfElse"],["noPermission",""],[1,"absolute","top-0","left-0","bottom-0","right-0",3,"resize"],["divBound",""],[1,"absolute","top-0","left-0","w-full"],["divHeader",""],[1,"flex","align-items-center","justify-content-between","border-bottom-1","border-gray-300"],[1,"ml-2","text-xl","font-bold"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-danger","p-button-text",3,"click"],[3,"model","activeItem"],[1,"absolute","bottom-0","left-0","w-full"],["divTable",""],[3,"parameter",4,"ngIf"],[3,"parameter"],["severity","error"],["pTemplate",""],[1,"pi","pi-times-circle"],[1,"ml-2"]],template:function(t,i){if(1&t&&(e.YNc(0,Ee,14,7,"div",0),e.YNc(1,Pe,2,0,"ng-template",null,1,e.W1O)),2&t){const n=e.MAs(2);e.Q6J("ngIf",i.permission.project.self)("ngIfElse",n)}},directives:[C.O5,f.Hq,m.H,X.d,te,_e,fe,N.V,d.jx],styles:[""]}),o})();var Ae=l(7658),we=l(9955);const Se=["divBound"],qe=["divTable"],De=["divPaginator"];function Je(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",28)(1,"div",29)(2,"div",30)(3,"input",31),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw(2).project_name=n}),e.qZA(),e.TgZ(4,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onPickProject()}),e.qZA()()(),e.TgZ(5,"div",29)(6,"div",30)(7,"input",33),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw(2).station_name=n}),e.qZA(),e.TgZ(8,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onPickStation()}),e.qZA()()(),e.TgZ(9,"div",34)(10,"input",35),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw(2).name=n}),e.qZA()(),e.TgZ(11,"div",34)(12,"input",36),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw(2).code=n}),e.qZA()(),e.TgZ(13,"div",37)(14,"div",38)(15,"span")(16,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onClear()}),e.qZA(),e.TgZ(17,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).fetchListOfParameters()}),e.qZA()()()()()}if(2&o){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.project_name),e.xp6(4),e.Q6J("ngModel",t.station_name),e.xp6(3),e.Q6J("ngModel",t.name),e.xp6(2),e.Q6J("ngModel",t.code)}}function Ne(o,r){1&o&&(e.TgZ(0,"tr")(1,"th",41),e._uU(2,"#"),e.qZA(),e.TgZ(3,"th",42),e._uU(4,"T\xean "),e._UZ(5,"p-sortIcon",43),e.qZA(),e.TgZ(6,"th",44),e._uU(7,"M\xe3"),e.qZA(),e.TgZ(8,"th",45),e._uU(9,"Tr\u1ea1m"),e.qZA(),e.TgZ(10,"th",45),e._uU(11,"C\xf4ng tr\xecnh"),e.qZA(),e.TgZ(12,"th",46),e._uU(13,"Th\u1eddi gian t\u1ea1o "),e._UZ(14,"p-sortIcon",47),e.qZA(),e.TgZ(15,"th",48),e._uU(16,"C\u1eadp nh\u1eadt "),e._UZ(17,"p-sortIcon",49),e.qZA()())}function ke(o,r){if(1&o&&(e.TgZ(0,"tr",50)(1,"td",41),e._uU(2),e.qZA(),e.TgZ(3,"td",45),e._uU(4),e.qZA(),e.TgZ(5,"td",44),e._uU(6),e.qZA(),e.TgZ(7,"td",45),e._uU(8),e.qZA(),e.TgZ(9,"td",45),e._uU(10),e.qZA(),e.TgZ(11,"td",45),e._uU(12),e.qZA(),e.TgZ(13,"td",45),e._uU(14),e.qZA()()),2&o){const t=r.$implicit,i=r.rowIndex,n=e.oxw(2);e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu((n.currentPage-1)*n.itemsPerPage+1+i),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.code),e.xp6(2),e.Oqu(null==t.station?null:t.station.name),e.xp6(2),e.Oqu(t.project_name),e.xp6(2),e.Oqu(n.convertTime(t.created_at)),e.xp6(2),e.Oqu(n.convertTime(t.updated_at))}}function He(o,r){1&o&&(e.TgZ(0,"div",51),e._uU(1," Kh\xf4ng c\xf3 d\u1eef li\u1ec7u trong m\u1ee5c n\xe0y. "),e.qZA())}function Ie(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"p-splitButton",52),e.NdJ("onClick",function(){return e.CHM(t),e.oxw(2).onViewDetail()}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("showTransitionOptions","200ms")("hideTransitionOptions","200ms")("model",t.moreCommands)("disabled",!t.currentParameter)}}const Be=function(){return[15,20,30,50]};function Ue(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",2,3),e.NdJ("resize",function(){return e.CHM(t),e.oxw().onWindowResize()},!1,e.Jf7),e.TgZ(2,"div",4),e._UZ(3,"p-breadcrumb",5),e.TgZ(4,"div",6)(5,"h3",7),e._UZ(6,"i",8),e._uU(7,"Danh s\xe1ch th\xf4ng s\u1ed1 "),e.qZA()(),e.TgZ(8,"div",9,10)(10,"p-table",11),e.NdJ("selectionChange",function(n){return e.CHM(t),e.oxw().currentParameter=n})("onRowSelect",function(n){return e.CHM(t),e.oxw().onRowSelect(n)})("onRowUnselect",function(n){return e.CHM(t),e.oxw().onRowUnselect(n)}),e.YNc(11,Je,18,4,"ng-template",12),e.YNc(12,Ne,18,0,"ng-template",13),e.YNc(13,ke,15,8,"ng-template",14),e.YNc(14,He,2,0,"ng-template",15),e.qZA()()(),e.TgZ(15,"div",16,17)(17,"div",18)(18,"div",19)(19,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().onAdd()}),e.qZA(),e.TgZ(20,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().onEdit()}),e.qZA(),e.YNc(21,Ie,1,4,"p-splitButton",22),e.qZA(),e.TgZ(22,"div",23)(23,"p-paginator",24),e.NdJ("onPageChange",function(n){return e.CHM(t),e.oxw().onPageChange(n)}),e.qZA()(),e.TgZ(24,"div",25)(25,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().onReSync()}),e.qZA(),e.TgZ(26,"span",27),e._uU(27),e.qZA()()()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("model",t.pathLinks)("home",t.homeLink),e.xp6(7),e.Q6J("selection",t.currentParameter)("value",t.parameters)("scrollable",!0)("loading",t.loading),e.xp6(9),e.Q6J("disabled",!t.permission.parameter.create),e.xp6(1),e.Q6J("disabled",!t.currentParameter||!t.permission.parameter.edit),e.xp6(1),e.Q6J("ngIf",t.permission.parameter.self),e.xp6(2),e.Q6J("rows",t.itemsPerPage)("totalRecords",t.totalItems)("rowsPerPageOptions",e.DdM(17,Be))("showJumpToPageDropdown",!0)("showPageLinks",!1),e.xp6(4),e.lnq("Hi\u1ec3n th\u1ecb ",(t.currentPage-1)*t.itemsPerPage+1,"-",(t.currentPage-1)*t.itemsPerPage+t.itemsPerPage>t.totalItems?t.totalItems:(t.currentPage-1)*t.itemsPerPage+t.itemsPerPage,"/",t.totalItems,"")}}function Fe(o,r){1&o&&(e._UZ(0,"i",60),e.TgZ(1,"span",61),e._uU(2,"B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp v\xe0o m\u1ee5c n\xe0y!"),e.qZA())}function Oe(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",53)(1,"p-messages",54),e.YNc(2,Fe,3,0,"ng-template",55),e.qZA()(),e.TgZ(3,"div",56)(4,"div",57),e.NdJ("click",function(){return e.CHM(t),e.oxw().onGoBackHome()}),e._UZ(5,"span",58),e.TgZ(6,"span",59),e._uU(7,"Quay l\u1ea1i Trang ch\u1ee7"),e.qZA()()()}}const Re=[{path:"",component:(()=>{class o{constructor(t,i,n,a,u,b,y){this.pHttpService=t,this.messageService=i,this.renderer=n,this.dialogService=a,this.permissionService=u,this.router=b,this.confirmService=y,this.offset=0,this.totalItems=0,this.itemsPerPage=15,this.currentPage=1,this.parameters=[],this.loading=!1}ngOnDestroy(){this.subPermission&&this.subPermission.unsubscribe(),this.loadingTime&&clearTimeout(this.loadingTime)}setStyleDiv(){this.windowWidth=this.divBound.nativeElement.offsetWidth,this.renderer.setStyle(this.divTable.nativeElement,"height",`  ${this.divBound.nativeElement.offsetHeight-this.divPaginator.nativeElement.offsetHeight-62}px`)}ngAfterViewInit(){this.setStyleDiv()}onWindowResize(){this.setStyleDiv()}calcWidth(){let t="";return t=this.windowWidth<450?.99*this.windowWidth+"px":"450px",t}ngOnInit(){this.subPermission=this.permissionService.currentPermission.subscribe(t=>{t&&(this.permission=t,this.initForm(),this.fetchListOfParameters())})}initForm(){this.pathLinks=[{label:"Qu\u1ea3n l\xfd",disabled:!0},{label:"th\xf4ng s\u1ed1 ",disabled:!0}],this.homeLink={icon:"fa-solid fa-home",routerLink:"/"},this.moreCommands=[{label:"X\xf3a b\u1ecf",icon:"fa-solid fa-minus",disabled:!0,command:()=>{this.onDelete()}}]}onPickProject(){this.dialogService.open(x.A,{showHeader:!1,width:"99vw",height:"99vh",contentStyle:{padding:"0",margin:0}}).onClose.subscribe(i=>{i&&(this.project_name=i.name,this.project_id=i._id)})}onPickStation(){this.dialogService.open(q,{showHeader:!1,width:"99vw",height:"99vh",contentStyle:{padding:"0",margin:0}}).onClose.subscribe(i=>{i&&(this.station_name=i.name,this.station_id=i._id)})}onClear(){this.name=null,this.code=null,this.project_id=null,this.project_name=null,this.station_name=null,this.station_id=null}fetchListOfParameters(){this.loadingTime=setTimeout(()=>{this.loading=!0},1e3),this.pHttpService.getList(this.name,this.code,this.project_id,this.station_id,this.itemsPerPage,this.offset).subscribe({next:t=>{t&&200===t.status&&(this.parameters=t.metadata.docs,this.totalItems=t.metadata.totalDocs,this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime),this.currentParameter=null)},error:t=>{let i;i=t&&t.error&&t.error.message?t.error.message:"C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i!",this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:i}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",t),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime)}})}onPageChange(t){this.currentPage=t.page+1,this.itemsPerPage=t.rows,this.offset=(this.currentPage-1)*this.itemsPerPage,this.fetchListOfParameters()}onReSync(){this.fetchListOfParameters()}onRowSelect(t){this.moreCommands[0].disabled=!this.permission.parameter.delete||!this.currentParameter}onRowUnselect(t){this.moreCommands[0].disabled=!this.permission.parameter.delete||!this.currentParameter}onAdd(){this.dialogService.open(D,{showHeader:!1,height:"700px",width:this.calcWidth(),contentStyle:{padding:"0",margin:0}}).onClose.subscribe(()=>{this.fetchListOfParameters()})}onEdit(){this.dialogService.open(D,{data:{parameter:this.currentParameter,title:"C\u1eadp nh\u1eadt th\xf4ng s\u1ed1 "},showHeader:!1,height:"700px",width:this.calcWidth(),contentStyle:{padding:"0",margin:0}}).onClose.subscribe(()=>{this.fetchListOfParameters()})}onDelete(){this.confirmService.confirm({message:`B\u1ea1n c\xf3 mu\u1ed1n x\xf3a th\xf4ng s\u1ed1 "${this.currentParameter.name}" kh\xf4ng?`,header:"X\xe1c nh\u1eadn x\xf3a th\xf4ng s\u1ed1 ",icon:"pi pi-info-circle"}).then(t=>{t&&this.pHttpService.delete(this.currentParameter._id).subscribe({next:i=>{i&&200===i.status?(this.fetchListOfParameters(),this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"\u0110\xe3 x\xf3a th\xf4ng s\u1ed1 th\xe0nh c\xf4ng"})):(this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"Kh\xf4ng t\xecm th\u1ea5y th\xf4ng s\u1ed1"}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",i.message))},error:i=>{let n;n=i&&i.error&&i.error.message?i.error.message:"C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i!",this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:n}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",i)}})}).catch(t=>{})}onViewDetail(){this.dialogService.open(Me,{data:{parameter:this.currentParameter},showHeader:!1,width:"99vw",height:"99vh",contentStyle:{padding:"0",margin:0}})}convertTime(t){return P.I.isoToVnTime(t)}onGoBackHome(){this.router.navigate(["/"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(M.v),e.Y36(d.ez),e.Y36(e.Qsj),e.Y36(p.xA),e.Y36(A.$),e.Y36(v.F0),e.Y36(w.I))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-parameter-management"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Se,5,e.SBq),e.Gf(qe,5,e.SBq),e.Gf(De,5,e.SBq)),2&t){let n;e.iGM(n=e.CRH())&&(i.divBound=n.first),e.iGM(n=e.CRH())&&(i.divTable=n.first),e.iGM(n=e.CRH())&&(i.divPaginator=n.first)}},decls:3,vars:2,consts:[["class","relative h-full w-full",3,"resize",4,"ngIf","ngIfElse"],["noPermission",""],[1,"relative","h-full","w-full",3,"resize"],["divBound",""],[1,"absolute","top-0","left-0","w-full"],["styleClass","text-sm p-1",3,"model","home"],[1,"flex","align-items-center"],[1,"text-blue-700","m-0","px-2","pt-2","pb-0"],[1,"fa-solid","fa-list","mr-2"],[1,"page-content","mt-1"],["divTable",""],["selectionMode","single","styleClass","p-datatable-sm p-datatable-striped","scrollHeight","flex",3,"selection","value","scrollable","loading","selectionChange","onRowSelect","onRowUnselect"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"absolute","bottom-0","left-0","p-1","w-full","border-top-1","border-gray-300"],["divPaginator",""],[1,"grid","grid-nogutter"],[1,"col-12","md:col-5","flex","align-items-center"],["pButton","","pRipple","","type","button","label","Th\xeam","icon","fa-solid fa-plus",1,"mr-1",3,"disabled","click"],["pButton","","pRipple","","type","button","label","Ch\u1ec9nh s\u1eeda","icon","fa-solid fa-pen",1,"mr-1",3,"disabled","click"],["label","Chi ti\u1ebft","icon","fa-solid fa-wand-sparkles",3,"showTransitionOptions","hideTransitionOptions","model","disabled","onClick",4,"ngIf"],[1,"col-12","md:col-5","flex","align-items-center","justify-content-end"],["styleClass","p-0",3,"rows","totalRecords","rowsPerPageOptions","showJumpToPageDropdown","showPageLinks","onPageChange"],[1,"col-12","md:col-2","flex","align-items-center"],["pButton","","pRipple","","type","button","icon","fa-solid fa-sync",1,"p-button-raised","p-button-text","m-0","p-1",3,"click"],[1,"ml-1"],[1,"p-fluid","grid","formgrid"],[1,"field","col-12","md:col-3","mb-1"],[1,"p-inputgroup"],["type","text","pInputText","","placeholder","Ch\u1ecdn c\xf4ng tr\xecnh","disabled","",3,"ngModel","ngModelChange"],["type","button","pButton","","pRipple","","icon","pi pi-ellipsis-h",3,"click"],["type","text","pInputText","","placeholder","Ch\u1ecdn tr\u1ea1m","disabled","",3,"ngModel","ngModelChange"],[1,"field","col-12","md:col-2","mb-1"],["type","text","pInputText","","placeholder","Nh\u1eadp t\xean th\xf4ng s\u1ed1",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Nh\u1eadp m\xe3 th\xf4ng s\u1ed1",3,"ngModel","ngModelChange"],[1,"field","col-12","md:col-2"],[1,"flex","justify-content-between"],["type","button","pButton","","icon","fa-solid fa-undo","pTooltip","\u0110\u1eb7t l\u1ea1i","tooltipPosition","top",1,"mr-1",3,"click"],["type","button","pButton","","icon","fa-solid fa-search","pTooltip","T\xecm ki\u1ebfm","tooltipPosition","top",1,"mr-1",3,"click"],[2,"width","60px","max-width","60px"],["pSortableColumn","name",2,"min-width","200px"],["field","name"],[2,"min-width","50px"],[2,"min-width","200px"],["pSortableColumn","created_at",2,"min-width","200px"],["field","created_at"],["pSortableColumn","updated_at",2,"min-width","200px"],["field","updated_at"],[3,"pSelectableRow"],[1,"p-fluid","p-2"],["label","Chi ti\u1ebft","icon","fa-solid fa-wand-sparkles",3,"showTransitionOptions","hideTransitionOptions","model","disabled","onClick"],[1,"flex","align-items-center","justify-content-center"],["severity","error"],["pTemplate",""],[1,"flex","align-items-center","justify-content-center","cursor-pointer"],["pRipple","",1,"flex","align-items-center","justify-content-center","w-full","h-4rem","max-w-20rem","bg-blue-500","border-round-md","shadow-8","text-white","font-bold",3,"click"],[1,"fa-solid","fa-home"],[1,"text-center","text-xl","mx-2"],[1,"pi","pi-times-circle"],[1,"ml-2"]],template:function(t,i){if(1&t&&(e.YNc(0,Ue,28,18,"div",0),e.YNc(1,Oe,8,0,"ng-template",null,1,e.W1O)),2&t){const n=e.MAs(2);e.Q6J("ngIf",i.permission.parameter.self)("ngIfElse",n)}},directives:[C.O5,Ae.a,_.iA,d.jx,s.Fj,c.o,s.JJ,s.On,f.Hq,m.H,E.u,_.lQ,_.fz,_.Ei,we.a,h.D,N.V],styles:[""]}),o})()}];let Qe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[v.Bz.forChild(Re)],v.Bz]}),o})();var Ye=l(8910);let Le=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[C.ez,Qe,Ye.m]]}),o})()}}]);